2025-07-14 00:11:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cye53xd1] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:11:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cye53xd1
2025-07-14 00:11:13 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:11:13 [clientInboundChannel-672] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cye53xd1
2025-07-14 00:11:13 [clientOutboundChannel-183] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cye53xd1}], simpSessionId=cye53xd1}]
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428478156", parameters={masked}
2025-07-14 00:11:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428478156
2025-07-14 00:11:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/154/3yhdxgap/websocket", parameters={}
2025-07-14 00:11:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/154/3yhdxgap/websocket
2025-07-14 00:11:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:11:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3yhdxgap]
2025-07-14 00:11:18 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:11:18 [clientInboundChannel-675] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3yhdxgap
2025-07-14 00:11:18 [clientInboundChannel-678] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3yhdxgap
2025-07-14 00:11:18 [clientInboundChannel-681] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3yhdxgap
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3yhdxgap] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:11:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3yhdxgap
2025-07-14 00:11:20 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:11:20 [clientInboundChannel-684] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3yhdxgap
2025-07-14 00:11:20 [clientOutboundChannel-185] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3yhdxgap}], simpSessionId=3yhdxgap}]
2025-07-14 00:11:20 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cye53xd1]
2025-07-14 00:11:25 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [3yhdxgap]
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 00:11:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428496426", parameters={masked}
2025-07-14 00:11:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428496426
2025-07-14 00:11:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/238/2df1muty/websocket", parameters={}
2025-07-14 00:11:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/238/2df1muty/websocket
2025-07-14 00:11:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:11:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2df1muty]
2025-07-14 00:11:36 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:11:36 [clientInboundChannel-687] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2df1muty
2025-07-14 00:11:36 [clientInboundChannel-690] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=2df1muty
2025-07-14 00:11:36 [clientInboundChannel-693] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=2df1muty
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:11:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:38 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428498453", parameters={masked}
2025-07-14 00:11:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428498453
2025-07-14 00:11:38 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/181/we0mxqhh/websocket", parameters={}
2025-07-14 00:11:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/181/we0mxqhh/websocket
2025-07-14 00:11:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:11:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=we0mxqhh]
2025-07-14 00:11:38 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:11:38 [clientInboundChannel-696] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=we0mxqhh
2025-07-14 00:11:38 [clientInboundChannel-699] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=we0mxqhh
2025-07-14 00:11:38 [clientInboundChannel-702] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=we0mxqhh
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:38 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:11:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=t", parameters={masked}
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:11:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:11:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:11:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:11:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:11:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:11:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=we0mxqhh] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:11:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session we0mxqhh
2025-07-14 00:11:49 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:11:49 [clientInboundChannel-671] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=we0mxqhh
2025-07-14 00:11:49 [clientOutboundChannel-188] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=we0mxqhh}], simpSessionId=we0mxqhh}]
2025-07-14 00:11:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428509600", parameters={masked}
2025-07-14 00:11:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428509600
2025-07-14 00:11:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/290/sotbhsp2/websocket", parameters={}
2025-07-14 00:11:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d2eb4c6
2025-07-14 00:11:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/290/sotbhsp2/websocket
2025-07-14 00:11:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:11:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sotbhsp2]
2025-07-14 00:11:49 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:11:49 [clientInboundChannel-676] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=sotbhsp2
2025-07-14 00:11:49 [clientInboundChannel-679] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=sotbhsp2
2025-07-14 00:11:49 [clientInboundChannel-680] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=sotbhsp2
2025-07-14 00:11:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:11:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:11:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:11:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:11:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:52 [clientInboundChannel-684] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/28/messages id=sub-3 session=sotbhsp2
2025-07-14 00:11:52 [clientInboundChannel-685] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=sotbhsp2
2025-07-14 00:11:52 [clientInboundChannel-689] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/28/messages id=sub-4 session=sotbhsp2
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=1", parameters={masked}
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:52 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=1", parameters={masked}
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:53 [clientInboundChannel-693] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=2df1muty
2025-07-14 00:11:53 [clientInboundChannel-694] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/28/messages id=sub-3 session=2df1muty
2025-07-14 00:11:53 [clientInboundChannel-700] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/28/messages id=sub-4 session=2df1muty
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=2", parameters={masked}
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:53 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=1", parameters={masked}
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:53 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=2", parameters={masked}
2025-07-14 00:11:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:54 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:54 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:54 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/28?userId=2", parameters={masked}
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:11:54 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:11:55 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [we0mxqhh]
2025-07-14 00:11:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:11:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:11:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:11:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":28,"senderId":1,"content":"Apple","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/28/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=69, conversat (truncated)...]
2025-07-14 00:11:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:12:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sotbhsp2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:12:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sotbhsp2
2025-07-14 00:12:07 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:12:07 [clientInboundChannel-699] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sotbhsp2
2025-07-14 00:12:07 [clientOutboundChannel-194] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sotbhsp2}], simpSessionId=sotbhsp2}]
2025-07-14 00:12:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2df1muty] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:12:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2df1muty
2025-07-14 00:12:08 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:12:08 [clientInboundChannel-674] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2df1muty
2025-07-14 00:12:08 [clientOutboundChannel-195] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2df1muty}], simpSessionId=2df1muty}]
2025-07-14 00:12:15 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [2df1muty, sotbhsp2]
2025-07-14 00:14:54 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 85 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(85)-CONNECTED(85)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1413], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 195], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 1, completed tasks = 1383]
2025-07-14 00:18:07 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 00:18:07 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 00:18:08 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@13d7410a]]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@13d7410a]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@13d7410a]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 00:18:08 [RMI TCP Connection(99)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 00:18:09 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 29640 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 00:18:09 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 00:18:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 00:18:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-14 00:18:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 00:18:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 00:18:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 00:18:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 00:18:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 769 ms
2025-07-14 00:18:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 00:18:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 00:18:10 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 00:18:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 00:18:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 00:18:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2acb1264
2025-07-14 00:18:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 00:18:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 00:18:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 00:18:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 00:18:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 00:18:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:18:12 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 00:18:13 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 00:18:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 00:18:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:18:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]
2025-07-14 00:18:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]]
2025-07-14 00:18:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:18:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:18:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 00:18:13 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.42 seconds (process running for 4.741)
2025-07-14 00:18:24 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 00:18:24 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@22d7e121
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@13421eb0
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 00:18:24 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428904804", parameters={masked}
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428904804
2025-07-14 00:18:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/728/dyvyuwk3/websocket", parameters={}
2025-07-14 00:18:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/728/dyvyuwk3/websocket
2025-07-14 00:18:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:18:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dyvyuwk3]
2025-07-14 00:18:24 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:18:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dyvyuwk3
2025-07-14 00:18:24 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=dyvyuwk3
2025-07-14 00:18:24 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dyvyuwk3
2025-07-14 00:18:24 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:38 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 00:18:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 00:18:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 00:18:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 00:18:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428919282", parameters={masked}
2025-07-14 00:18:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428919282
2025-07-14 00:18:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/700/za4lhlts/websocket", parameters={}
2025-07-14 00:18:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/700/za4lhlts/websocket
2025-07-14 00:18:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:18:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=za4lhlts]
2025-07-14 00:18:39 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:18:39 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=za4lhlts
2025-07-14 00:18:39 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=za4lhlts
2025-07-14 00:18:39 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=za4lhlts
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:18:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dyvyuwk3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:18:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dyvyuwk3
2025-07-14 00:18:41 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:18:41 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dyvyuwk3
2025-07-14 00:18:41 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dyvyuwk3}], simpSessionId=dyvyuwk3}]
2025-07-14 00:18:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752428921943", parameters={masked}
2025-07-14 00:18:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752428921943
2025-07-14 00:18:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/881/yejgmkb0/websocket", parameters={}
2025-07-14 00:18:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:18:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/881/yejgmkb0/websocket
2025-07-14 00:18:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:18:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yejgmkb0]
2025-07-14 00:18:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:18:41 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yejgmkb0
2025-07-14 00:18:41 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yejgmkb0
2025-07-14 00:18:41 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yejgmkb0
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:18:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:49 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dyvyuwk3]
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw%20Htin%20AUng", parameters={masked}
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:18:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:54 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:54 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw%20Htin%20A", parameters={masked}
2025-07-14 00:18:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:18:54 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:18:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:18:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:18:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:18:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:18:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:18:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:18:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:18:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:18:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:18:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:19:13 [MessageBroker-11] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 30, active threads = 0, queued tasks = 0, completed tasks = 30], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 12]
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=za4lhlts] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session za4lhlts
2025-07-14 00:20:37 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:20:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=za4lhlts
2025-07-14 00:20:37 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=za4lhlts}], simpSessionId=za4lhlts}]
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yejgmkb0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yejgmkb0
2025-07-14 00:20:37 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:20:37 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yejgmkb0
2025-07-14 00:20:37 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yejgmkb0}], simpSessionId=yejgmkb0}]
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:20:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429037326", parameters={masked}
2025-07-14 00:20:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:20:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429037326
2025-07-14 00:20:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/980/1rvez2vb/websocket", parameters={}
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/980/1rvez2vb/websocket
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1rvez2vb]
2025-07-14 00:20:37 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:20:37 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1rvez2vb
2025-07-14 00:20:37 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=1rvez2vb
2025-07-14 00:20:37 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=1rvez2vb
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429037646", parameters={masked}
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429037646
2025-07-14 00:20:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/211/enn0m5pl/websocket", parameters={}
2025-07-14 00:20:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:20:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/211/enn0m5pl/websocket
2025-07-14 00:20:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:20:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=enn0m5pl]
2025-07-14 00:20:37 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:20:37 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=enn0m5pl
2025-07-14 00:20:37 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=enn0m5pl
2025-07-14 00:20:37 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=enn0m5pl
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:20:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:20:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:20:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:20:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:20:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:20:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:20:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:20:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:20:38 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:20:38 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:20:44 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [yejgmkb0, za4lhlts]
2025-07-14 00:22:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=enn0m5pl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:22:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session enn0m5pl
2025-07-14 00:22:14 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:22:14 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=enn0m5pl
2025-07-14 00:22:14 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=enn0m5pl}], simpSessionId=enn0m5pl}]
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1rvez2vb] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1rvez2vb
2025-07-14 00:22:14 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:22:14 [clientInboundChannel-59] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1rvez2vb
2025-07-14 00:22:14 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1rvez2vb}], simpSessionId=1rvez2vb}]
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429134267", parameters={masked}
2025-07-14 00:22:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:22:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429134267
2025-07-14 00:22:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/328/zzhdpqev/websocket", parameters={}
2025-07-14 00:22:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:22:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/328/zzhdpqev/websocket
2025-07-14 00:22:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:22:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zzhdpqev]
2025-07-14 00:22:14 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:22:14 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zzhdpqev
2025-07-14 00:22:14 [clientInboundChannel-65] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zzhdpqev
2025-07-14 00:22:14 [clientInboundChannel-68] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zzhdpqev
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429134609", parameters={masked}
2025-07-14 00:22:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:22:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429134609
2025-07-14 00:22:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/434/ygkcar1q/websocket", parameters={}
2025-07-14 00:22:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@26d38b98
2025-07-14 00:22:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/434/ygkcar1q/websocket
2025-07-14 00:22:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:22:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ygkcar1q]
2025-07-14 00:22:14 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:22:14 [clientInboundChannel-71] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ygkcar1q
2025-07-14 00:22:14 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ygkcar1q
2025-07-14 00:22:14 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ygkcar1q
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:22:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:22:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:22:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:22:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:22:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:19 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [1rvez2vb, enn0m5pl]
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=THaw", parameters={masked}
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:22:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:22:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:22:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:22:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:22:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:22:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:22:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:22:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:22:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:22:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 00:27:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ygkcar1q with CloseStatus[code=1001, reason=null]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ygkcar1q]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ygkcar1q] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ygkcar1q
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:27:21 [clientInboundChannel-80] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ygkcar1q
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session zzhdpqev with CloseStatus[code=1001, reason=null]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=zzhdpqev]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zzhdpqev] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zzhdpqev
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@564c0e38]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 00:27:21 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 00:27:23 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 23388 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 00:27:23 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 00:27:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 00:27:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 6 JPA repository interfaces.
2025-07-14 00:27:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 00:27:24 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 00:27:24 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 00:27:24 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 00:27:24 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 806 ms
2025-07-14 00:27:24 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 00:27:24 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 00:27:24 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 00:27:24 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 00:27:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 00:27:25 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18cbc3c2
2025-07-14 00:27:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 00:27:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 00:27:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 00:27:25 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 00:27:25 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 00:27:26 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:27:26 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 00:27:26 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 00:27:27 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 00:27:27 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:27:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]
2025-07-14 00:27:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]]
2025-07-14 00:27:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:27:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:27:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 00:27:27 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.508 seconds (process running for 4.837)
2025-07-14 00:27:43 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 00:27:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4377d616
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@13106eec
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 00:27:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 00:27:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429463716", parameters={masked}
2025-07-14 00:27:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:27:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429463716
2025-07-14 00:27:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/119/urywgx15/websocket", parameters={}
2025-07-14 00:27:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:27:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/119/urywgx15/websocket
2025-07-14 00:27:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:27:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=urywgx15]
2025-07-14 00:27:43 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:27:43 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=urywgx15
2025-07-14 00:27:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=urywgx15
2025-07-14 00:27:43 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:27:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:27:43 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=urywgx15
2025-07-14 00:27:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429463618", parameters={masked}
2025-07-14 00:27:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:27:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429463618
2025-07-14 00:27:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/157/ui01zpgj/websocket", parameters={}
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/157/ui01zpgj/websocket
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:27:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ui01zpgj]
2025-07-14 00:27:43 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:27:43 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ui01zpgj
2025-07-14 00:27:43 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ui01zpgj
2025-07-14 00:27:43 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ui01zpgj
2025-07-14 00:27:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:27:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:27:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:27:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:27:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:27:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:27:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:27:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:27:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:27:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:27:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:27:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:27:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=urywgx15] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:28:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ui01zpgj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:28:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session urywgx15
2025-07-14 00:28:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ui01zpgj
2025-07-14 00:28:23 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:28:23 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:28:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=urywgx15
2025-07-14 00:28:23 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ui01zpgj
2025-07-14 00:28:23 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=urywgx15}], simpSessionId=urywgx15}]
2025-07-14 00:28:23 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ui01zpgj}], simpSessionId=ui01zpgj}]
2025-07-14 00:28:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429503666", parameters={masked}
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429503666
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/605/f2pjkcpy/websocket", parameters={}
2025-07-14 00:28:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/605/f2pjkcpy/websocket
2025-07-14 00:28:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:28:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=f2pjkcpy]
2025-07-14 00:28:23 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:28:23 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=f2pjkcpy
2025-07-14 00:28:23 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=f2pjkcpy
2025-07-14 00:28:23 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=f2pjkcpy
2025-07-14 00:28:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:28:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429503842", parameters={masked}
2025-07-14 00:28:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429503842
2025-07-14 00:28:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/756/0huqskja/websocket", parameters={}
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/756/0huqskja/websocket
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:28:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0huqskja]
2025-07-14 00:28:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:28:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0huqskja
2025-07-14 00:28:23 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0huqskja
2025-07-14 00:28:23 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0huqskja
2025-07-14 00:28:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:27 [MessageBroker-11] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 32, active threads = 0, queued tasks = 0, completed tasks = 42], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 11]
2025-07-14 00:28:28 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ui01zpgj, urywgx15]
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=f2pjkcpy] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0huqskja] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session f2pjkcpy
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0huqskja
2025-07-14 00:28:29 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:28:29 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:28:29 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0huqskja
2025-07-14 00:28:29 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=f2pjkcpy
2025-07-14 00:28:29 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0huqskja}], simpSessionId=0huqskja}]
2025-07-14 00:28:29 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=f2pjkcpy}], simpSessionId=f2pjkcpy}]
2025-07-14 00:28:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429509584", parameters={masked}
2025-07-14 00:28:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429509584
2025-07-14 00:28:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/134/oaytjsz0/websocket", parameters={}
2025-07-14 00:28:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/134/oaytjsz0/websocket
2025-07-14 00:28:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:28:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oaytjsz0]
2025-07-14 00:28:29 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:28:29 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=oaytjsz0
2025-07-14 00:28:29 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=oaytjsz0
2025-07-14 00:28:29 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=oaytjsz0
2025-07-14 00:28:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429509736", parameters={masked}
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429509736
2025-07-14 00:28:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/814/x3t0xcc4/websocket", parameters={}
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/814/x3t0xcc4/websocket
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:28:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=x3t0xcc4]
2025-07-14 00:28:29 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:28:29 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=x3t0xcc4
2025-07-14 00:28:29 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=x3t0xcc4
2025-07-14 00:28:29 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=x3t0xcc4
2025-07-14 00:28:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:28:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:38 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [f2pjkcpy, 0huqskja]
2025-07-14 00:28:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oaytjsz0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:28:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oaytjsz0
2025-07-14 00:28:48 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:28:48 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oaytjsz0
2025-07-14 00:28:48 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=oaytjsz0}], simpSessionId=oaytjsz0}]
2025-07-14 00:28:48 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429529003", parameters={masked}
2025-07-14 00:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429529003
2025-07-14 00:28:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/734/okdwi0v2/websocket", parameters={}
2025-07-14 00:28:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:28:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/734/okdwi0v2/websocket
2025-07-14 00:28:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:28:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=okdwi0v2]
2025-07-14 00:28:49 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:28:49 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=okdwi0v2
2025-07-14 00:28:49 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=okdwi0v2
2025-07-14 00:28:49 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=okdwi0v2
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:28:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:28:58 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [oaytjsz0]
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:29:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:06 [http-nio-8080-exec-1] INFO  c.b.c.ConversationController - Sent conversation update to user 2
2025-07-14 00:29:06 [http-nio-8080-exec-1] INFO  c.b.c.ConversationController - Sent conversation update to user 1
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:29:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:29:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:29:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=x3t0xcc4] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:29:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session x3t0xcc4
2025-07-14 00:29:40 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:29:40 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=x3t0xcc4
2025-07-14 00:29:40 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=x3t0xcc4}], simpSessionId=x3t0xcc4}]
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429580215", parameters={masked}
2025-07-14 00:29:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:29:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429580215
2025-07-14 00:29:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/750/e222kuid/websocket", parameters={}
2025-07-14 00:29:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:29:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/750/e222kuid/websocket
2025-07-14 00:29:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:29:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=e222kuid]
2025-07-14 00:29:40 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:29:40 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=e222kuid
2025-07-14 00:29:40 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=e222kuid
2025-07-14 00:29:40 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=e222kuid
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:29:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:29:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:29:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:48 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [x3t0xcc4]
2025-07-14 00:29:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:29:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:29:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:29:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:50 [http-nio-8080-exec-7] INFO  c.b.c.ConversationController - Sent conversation update to user 2
2025-07-14 00:29:50 [http-nio-8080-exec-7] INFO  c.b.c.ConversationController - Sent conversation update to user 1
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:29:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:29:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:29:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:29:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:29:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:29:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:29:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:29:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=okdwi0v2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:31:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session okdwi0v2
2025-07-14 00:31:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=e222kuid] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:31:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e222kuid
2025-07-14 00:31:40 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:31:40 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:31:40 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=e222kuid
2025-07-14 00:31:40 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=e222kuid}], simpSessionId=e222kuid}]
2025-07-14 00:31:40 [clientInboundChannel-55] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=okdwi0v2
2025-07-14 00:31:40 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=okdwi0v2}], simpSessionId=okdwi0v2}]
2025-07-14 00:31:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:31:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429700987", parameters={masked}
2025-07-14 00:31:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:31:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429700987
2025-07-14 00:31:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/724/04kkqtyd/websocket", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:31:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/724/04kkqtyd/websocket
2025-07-14 00:31:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:31:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=04kkqtyd]
2025-07-14 00:31:41 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:31:41 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=04kkqtyd
2025-07-14 00:31:41 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=04kkqtyd
2025-07-14 00:31:41 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user04kkqtyd subscriptionId=sub-0 session=04kkqtyd payload=byte[0]
2025-07-14 00:31:41 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=04kkqtyd
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:31:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429701071", parameters={masked}
2025-07-14 00:31:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:31:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429701071
2025-07-14 00:31:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/123/zczy011q/websocket", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:31:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/123/zczy011q/websocket
2025-07-14 00:31:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:31:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zczy011q]
2025-07-14 00:31:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:31:41 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zczy011q
2025-07-14 00:31:41 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userzczy011q subscriptionId=sub-0 session=zczy011q payload=byte[0]
2025-07-14 00:31:41 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zczy011q
2025-07-14 00:31:41 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=zczy011q
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:31:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:31:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:31:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:31:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:31:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:31:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:31:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:31:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:31:48 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [e222kuid, okdwi0v2]
2025-07-14 00:32:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=04kkqtyd] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:32:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 04kkqtyd
2025-07-14 00:32:06 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zczy011q] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zczy011q
2025-07-14 00:32:06 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=04kkqtyd
2025-07-14 00:32:06 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:32:06 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zczy011q
2025-07-14 00:32:06 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zczy011q}], simpSessionId=zczy011q}]
2025-07-14 00:32:06 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=04kkqtyd}], simpSessionId=04kkqtyd}]
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429726542", parameters={masked}
2025-07-14 00:32:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:32:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429726542
2025-07-14 00:32:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/669/rn23tale/websocket", parameters={}
2025-07-14 00:32:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:32:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/669/rn23tale/websocket
2025-07-14 00:32:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:32:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rn23tale]
2025-07-14 00:32:06 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:32:06 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rn23tale
2025-07-14 00:32:06 [clientInboundChannel-59] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userrn23tale subscriptionId=sub-0 session=rn23tale payload=byte[0]
2025-07-14 00:32:06 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rn23tale
2025-07-14 00:32:06 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=rn23tale
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429726730", parameters={masked}
2025-07-14 00:32:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:32:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429726730
2025-07-14 00:32:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/526/oqaljnlc/websocket", parameters={}
2025-07-14 00:32:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5ad07f8a
2025-07-14 00:32:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/526/oqaljnlc/websocket
2025-07-14 00:32:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:32:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oqaljnlc]
2025-07-14 00:32:06 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:06 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=oqaljnlc
2025-07-14 00:32:06 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useroqaljnlc subscriptionId=sub-0 session=oqaljnlc payload=byte[0]
2025-07-14 00:32:06 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=oqaljnlc
2025-07-14 00:32:06 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=oqaljnlc
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:13 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [04kkqtyd, zczy011q]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 00:32:22 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session oqaljnlc with CloseStatus[code=1001, reason=null]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=oqaljnlc]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oqaljnlc] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oqaljnlc
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:32:22 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oqaljnlc
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session rn23tale with CloseStatus[code=1001, reason=null]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=rn23tale]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rn23tale] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rn23tale
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:32:22 [clientInboundChannel-81] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rn23tale
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2693d31f]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 00:32:22 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 00:32:29 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 10844 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 00:32:29 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 00:32:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 00:32:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 6 JPA repository interfaces.
2025-07-14 00:32:30 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 00:32:30 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 00:32:30 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 00:32:30 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 00:32:30 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 758 ms
2025-07-14 00:32:30 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 00:32:30 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 00:32:30 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 00:32:30 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 00:32:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 00:32:31 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ca278bc
2025-07-14 00:32:31 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 00:32:31 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 00:32:31 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 00:32:31 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 00:32:32 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 00:32:32 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:32:33 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 00:32:33 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 00:32:33 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 00:32:33 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:32:33 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 00:32:33 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 00:32:33 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:32:33 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:32:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 00:32:33 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.369 seconds (process running for 4.689)
2025-07-14 00:32:47 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 00:32:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1d0544b3
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@384edc3b
2025-07-14 00:32:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 00:32:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 00:32:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429767336", parameters={masked}
2025-07-14 00:32:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:32:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429767336
2025-07-14 00:32:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/161/qlnvojtj/websocket", parameters={}
2025-07-14 00:32:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:32:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/161/qlnvojtj/websocket
2025-07-14 00:32:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:32:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qlnvojtj]
2025-07-14 00:32:47 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:32:47 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qlnvojtj
2025-07-14 00:32:47 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qlnvojtj
2025-07-14 00:32:47 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userqlnvojtj subscriptionId=sub-0 session=qlnvojtj payload=byte[0]
2025-07-14 00:32:47 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=qlnvojtj
2025-07-14 00:32:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:47 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:32:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429768291", parameters={masked}
2025-07-14 00:32:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429768291
2025-07-14 00:32:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/135/4woxgayn/websocket", parameters={}
2025-07-14 00:32:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:32:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/135/4woxgayn/websocket
2025-07-14 00:32:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:32:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4woxgayn]
2025-07-14 00:32:48 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:32:48 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=4woxgayn
2025-07-14 00:32:48 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user4woxgayn subscriptionId=sub-0 session=4woxgayn payload=byte[0]
2025-07-14 00:32:48 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=4woxgayn
2025-07-14 00:32:48 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=4woxgayn
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:49 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:49 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:32:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:32:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qlnvojtj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:33:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qlnvojtj
2025-07-14 00:33:08 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:33:08 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qlnvojtj
2025-07-14 00:33:08 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qlnvojtj}], simpSessionId=qlnvojtj}]
2025-07-14 00:33:08 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429788581", parameters={masked}
2025-07-14 00:33:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:33:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429788581
2025-07-14 00:33:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/183/pqthhddy/websocket", parameters={}
2025-07-14 00:33:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:33:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/183/pqthhddy/websocket
2025-07-14 00:33:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:33:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pqthhddy]
2025-07-14 00:33:08 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:33:08 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pqthhddy
2025-07-14 00:33:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userpqthhddy subscriptionId=sub-0 session=pqthhddy payload=byte[0]
2025-07-14 00:33:08 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=pqthhddy
2025-07-14 00:33:08 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=pqthhddy
2025-07-14 00:33:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:33:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:08 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4woxgayn] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:33:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4woxgayn
2025-07-14 00:33:09 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:33:09 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4woxgayn
2025-07-14 00:33:09 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=4woxgayn}], simpSessionId=4woxgayn}]
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429789354", parameters={masked}
2025-07-14 00:33:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:33:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429789354
2025-07-14 00:33:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/179/xljcwvye/websocket", parameters={}
2025-07-14 00:33:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:33:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/179/xljcwvye/websocket
2025-07-14 00:33:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:33:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xljcwvye]
2025-07-14 00:33:09 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:33:09 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xljcwvye
2025-07-14 00:33:09 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userxljcwvye subscriptionId=sub-0 session=xljcwvye payload=byte[0]
2025-07-14 00:33:09 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xljcwvye
2025-07-14 00:33:09 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=xljcwvye
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:33:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:33:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:33:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Th", parameters={masked}
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:33:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:17 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [qlnvojtj, 4woxgayn]
2025-07-14 00:33:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:33:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:33:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:33:19 [http-nio-8080-exec-2] INFO  c.b.c.ConversationController - Sent conversation update to user 2
2025-07-14 00:33:19 [http-nio-8080-exec-2] INFO  c.b.c.ConversationController - Sent conversation update to user 1
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:33:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:19 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:33:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:33:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:33:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:33:33 [MessageBroker-12] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 32, active threads = 0, queued tasks = 0, completed tasks = 54], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 11]
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pqthhddy] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pqthhddy
2025-07-14 00:36:22 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:36:22 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pqthhddy
2025-07-14 00:36:22 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pqthhddy}], simpSessionId=pqthhddy}]
2025-07-14 00:36:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xljcwvye] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:36:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xljcwvye
2025-07-14 00:36:22 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:36:22 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xljcwvye
2025-07-14 00:36:22 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xljcwvye}], simpSessionId=xljcwvye}]
2025-07-14 00:36:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429982680", parameters={masked}
2025-07-14 00:36:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429982680
2025-07-14 00:36:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:22 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/996/dtur1kjs/websocket", parameters={}
2025-07-14 00:36:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/996/dtur1kjs/websocket
2025-07-14 00:36:22 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:36:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dtur1kjs]
2025-07-14 00:36:22 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:36:22 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dtur1kjs
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429982719", parameters={masked}
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429982719
2025-07-14 00:36:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:22 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdtur1kjs subscriptionId=sub-0 session=dtur1kjs payload=byte[0]
2025-07-14 00:36:22 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dtur1kjs
2025-07-14 00:36:22 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=dtur1kjs
2025-07-14 00:36:22 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:36:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:22 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/428/efieyvnz/websocket", parameters={}
2025-07-14 00:36:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/428/efieyvnz/websocket
2025-07-14 00:36:22 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:36:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=efieyvnz]
2025-07-14 00:36:22 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:36:22 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=efieyvnz
2025-07-14 00:36:22 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userefieyvnz subscriptionId=sub-0 session=efieyvnz payload=byte[0]
2025-07-14 00:36:22 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=efieyvnz
2025-07-14 00:36:22 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=efieyvnz
2025-07-14 00:36:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:36:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dtur1kjs] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:36:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dtur1kjs
2025-07-14 00:36:26 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:36:26 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dtur1kjs
2025-07-14 00:36:26 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dtur1kjs}], simpSessionId=dtur1kjs}]
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752429987014", parameters={masked}
2025-07-14 00:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752429987014
2025-07-14 00:36:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/314/i1wgxenq/websocket", parameters={}
2025-07-14 00:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/314/i1wgxenq/websocket
2025-07-14 00:36:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i1wgxenq]
2025-07-14 00:36:27 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:36:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=i1wgxenq
2025-07-14 00:36:27 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useri1wgxenq subscriptionId=sub-0 session=i1wgxenq payload=byte[0]
2025-07-14 00:36:27 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=i1wgxenq
2025-07-14 00:36:27 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=i1wgxenq
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:27 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [xljcwvye, pqthhddy]
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:36:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:32 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dtur1kjs]
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:36:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:36:39 [http-nio-8080-exec-4] INFO  c.b.c.ConversationController - Sent conversation update to user 1
2025-07-14 00:36:39 [http-nio-8080-exec-4] INFO  c.b.c.ConversationController - Sent conversation update to user 2
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:36:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:36:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:36:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:36:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:36:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:36:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:36:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:36:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:00 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-3 session=efieyvnz
2025-07-14 00:38:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:38:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i1wgxenq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i1wgxenq
2025-07-14 00:38:07 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:38:07 [clientInboundChannel-69] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i1wgxenq
2025-07-14 00:38:07 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=i1wgxenq}], simpSessionId=i1wgxenq}]
2025-07-14 00:38:07 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430087623", parameters={masked}
2025-07-14 00:38:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430087623
2025-07-14 00:38:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/736/0k2qecuk/websocket", parameters={}
2025-07-14 00:38:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/736/0k2qecuk/websocket
2025-07-14 00:38:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:38:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0k2qecuk]
2025-07-14 00:38:07 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:38:07 [clientInboundChannel-72] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0k2qecuk
2025-07-14 00:38:07 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user0k2qecuk subscriptionId=sub-0 session=0k2qecuk payload=byte[0]
2025-07-14 00:38:07 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0k2qecuk
2025-07-14 00:38:07 [clientInboundChannel-81] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=0k2qecuk
2025-07-14 00:38:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:38:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:07 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:07 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:09 [clientInboundChannel-84] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-3 session=0k2qecuk
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:38:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:10 [clientInboundChannel-87] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-4 session=efieyvnz
2025-07-14 00:38:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:11 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:38:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":2,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=70, conversat (truncated)...]
2025-07-14 00:38:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:17 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [i1wgxenq]
2025-07-14 00:38:28 [clientInboundChannel-90] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-5 session=efieyvnz
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:30 [clientInboundChannel-93] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-6 session=efieyvnz
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:30 [clientInboundChannel-96] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-7 session=efieyvnz
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:31 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-8 session=efieyvnz
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:31 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-9 session=efieyvnz
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=70, co (truncated)...]
2025-07-14 00:38:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":2,"content":"Hello\\","messageType":"TEXT","status":"SENT","sentAt": (truncated)..."]
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:38:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=71, conversat (truncated)...]
2025-07-14 00:38:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0k2qecuk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0k2qecuk
2025-07-14 00:38:55 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:38:55 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0k2qecuk
2025-07-14 00:38:55 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0k2qecuk}], simpSessionId=0k2qecuk}]
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=efieyvnz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session efieyvnz
2025-07-14 00:38:55 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:38:55 [clientInboundChannel-75] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=efieyvnz
2025-07-14 00:38:55 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=efieyvnz}], simpSessionId=efieyvnz}]
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430135619", parameters={masked}
2025-07-14 00:38:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430135619
2025-07-14 00:38:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/783/n2l1tpap/websocket", parameters={}
2025-07-14 00:38:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/783/n2l1tpap/websocket
2025-07-14 00:38:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:38:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n2l1tpap]
2025-07-14 00:38:55 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:38:55 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=n2l1tpap
2025-07-14 00:38:55 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=n2l1tpap
2025-07-14 00:38:55 [clientInboundChannel-85] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=n2l1tpap
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430135802", parameters={masked}
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430135802
2025-07-14 00:38:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/781/wvwysmkh/websocket", parameters={}
2025-07-14 00:38:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 00:38:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/781/wvwysmkh/websocket
2025-07-14 00:38:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:38:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wvwysmkh]
2025-07-14 00:38:55 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:38:55 [clientInboundChannel-88] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wvwysmkh
2025-07-14 00:38:55 [clientInboundChannel-91] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wvwysmkh
2025-07-14 00:38:55 [clientInboundChannel-94] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wvwysmkh
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:38:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:38:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:38:59 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 00:38:59 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 00:39:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session wvwysmkh with CloseStatus[code=1001, reason=null]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=wvwysmkh]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wvwysmkh] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wvwysmkh
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session n2l1tpap with CloseStatus[code=1001, reason=null]
2025-07-14 00:39:00 [clientInboundChannel-95] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wvwysmkh
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=n2l1tpap]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n2l1tpap] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n2l1tpap
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:39:00 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=n2l1tpap
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 00:39:00 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 00:39:01 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 22892 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 00:39:01 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 00:39:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 00:39:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 6 JPA repository interfaces.
2025-07-14 00:39:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 00:39:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 00:39:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 00:39:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 00:39:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 765 ms
2025-07-14 00:39:02 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 00:39:02 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 00:39:02 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 00:39:02 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 00:39:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 00:39:03 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@8d810f2
2025-07-14 00:39:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 00:39:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 00:39:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 00:39:03 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 00:39:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 00:39:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:39:04 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 00:39:05 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 00:39:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 00:39:05 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:39:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]
2025-07-14 00:39:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]]
2025-07-14 00:39:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:39:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:39:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 00:39:05 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.591 seconds (process running for 4.896)
2025-07-14 00:39:05 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 00:39:05 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@18809db8
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5b54fe5b
2025-07-14 00:39:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 00:39:05 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:06 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430166975", parameters={masked}
2025-07-14 00:39:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:39:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430166975
2025-07-14 00:39:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/794/zyjo2fdp/websocket", parameters={}
2025-07-14 00:39:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:39:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/794/zyjo2fdp/websocket
2025-07-14 00:39:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:39:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zyjo2fdp]
2025-07-14 00:39:27 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:39:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zyjo2fdp
2025-07-14 00:39:27 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zyjo2fdp
2025-07-14 00:39:27 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zyjo2fdp
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:39:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:39:28 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=zyjo2fdp
2025-07-14 00:39:28 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-3 session=zyjo2fdp
2025-07-14 00:39:28 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-4 session=zyjo2fdp
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:39:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=71, co (truncated)...]
2025-07-14 00:39:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:39:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:39:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":1,"content":"Moto","messageType":"TEXT","status":"SENT","sentAt":nul (truncated)..."]
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=72, conversat (truncated)...]
2025-07-14 00:39:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=72, co (truncated)...]
2025-07-14 00:39:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=72, co (truncated)...]
2025-07-14 00:39:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:39:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=72, co (truncated)...]
2025-07-14 00:39:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":1,"content":"Super Mario","messageType":"TEXT","status":"SENT","sent (truncated)..."]
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=73, conversat (truncated)...]
2025-07-14 00:39:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:05 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 5], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 2, completed tasks = 8]
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430212559", parameters={masked}
2025-07-14 00:40:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:40:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430212559
2025-07-14 00:40:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/532/rdxzx21v/websocket", parameters={}
2025-07-14 00:40:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:40:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/532/rdxzx21v/websocket
2025-07-14 00:40:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:40:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rdxzx21v]
2025-07-14 00:40:12 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:40:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rdxzx21v
2025-07-14 00:40:12 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=rdxzx21v
2025-07-14 00:40:12 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rdxzx21v
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:40:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:40:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:40:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zyjo2fdp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:40:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zyjo2fdp
2025-07-14 00:40:14 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:40:14 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zyjo2fdp
2025-07-14 00:40:14 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zyjo2fdp}], simpSessionId=zyjo2fdp}]
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430215146", parameters={masked}
2025-07-14 00:40:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:40:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430215146
2025-07-14 00:40:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/044/xn5l35ct/websocket", parameters={}
2025-07-14 00:40:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7e389cd6
2025-07-14 00:40:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/044/xn5l35ct/websocket
2025-07-14 00:40:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:40:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xn5l35ct]
2025-07-14 00:40:15 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:40:15 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xn5l35ct
2025-07-14 00:40:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xn5l35ct
2025-07-14 00:40:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xn5l35ct
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:40:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:40:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:40:16 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=rdxzx21v
2025-07-14 00:40:16 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-3 session=rdxzx21v
2025-07-14 00:40:16 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-4 session=rdxzx21v
2025-07-14 00:40:16 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:40:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:19 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-6 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-7 session=rdxzx21v
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-8 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-9 session=rdxzx21v
2025-07-14 00:40:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-10 session=rdxzx21v
2025-07-14 00:40:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:20 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=rdxzx21v
2025-07-14 00:40:20 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-9 session=rdxzx21v
2025-07-14 00:40:20 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-11 session=rdxzx21v
2025-07-14 00:40:20 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-12 session=rdxzx21v
2025-07-14 00:40:20 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-13 session=rdxzx21v
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:21 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zyjo2fdp]
2025-07-14 00:40:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=2", parameters={masked}
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:27 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-3 session=xn5l35ct
2025-07-14 00:40:27 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=xn5l35ct
2025-07-14 00:40:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/34/messages id=sub-4 session=xn5l35ct
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:27 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:28 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/34?userId=1", parameters={masked}
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=73, co (truncated)...]
2025-07-14 00:40:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":1,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:34 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:40:34 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:40:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=74, conversat (truncated)...]
2025-07-14 00:40:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:40:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:40:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":1,"content":"What up","messageType":"TEXT","status":"SENT","sentAt": (truncated)..."]
2025-07-14 00:40:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=75, conversat (truncated)...]
2025-07-14 00:40:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":34,"senderId":1,"content":"You are nice","messageType":"TEXT","status":"SENT","sen (truncated)..."]
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/34/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=76, conversat (truncated)...]
2025-07-14 00:40:41 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 00:41:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session xn5l35ct with CloseStatus[code=1001, reason=null]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=xn5l35ct]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xn5l35ct] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xn5l35ct
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session rdxzx21v with CloseStatus[code=1001, reason=null]
2025-07-14 00:41:21 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xn5l35ct
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=rdxzx21v]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rdxzx21v] closed with CloseStatus[code=1001, reason=null]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rdxzx21v
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:41:21 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rdxzx21v
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2ff35182]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 00:41:21 [RMI TCP Connection(5)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 00:41:23 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 23072 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 00:41:23 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 00:41:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 00:41:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 6 JPA repository interfaces.
2025-07-14 00:41:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 00:41:23 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 00:41:23 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 00:41:23 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 00:41:23 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 768 ms
2025-07-14 00:41:23 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 00:41:24 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 00:41:24 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 00:41:24 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 00:41:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 00:41:25 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45bf93bb
2025-07-14 00:41:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 00:41:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 00:41:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 00:41:25 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 00:41:25 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 00:41:26 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 00:41:26 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 00:41:26 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 00:41:26 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 00:41:26 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 00:41:26 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 00:41:27 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 00:41:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 00:41:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]]
2025-07-14 00:41:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:41:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 00:41:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 00:41:27 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.409 seconds (process running for 4.732)
2025-07-14 00:42:27 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-07-14 00:43:04 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 00:43:04 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5b54fe5b
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@21ffedc7
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 00:43:04 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 00:43:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430384067", parameters={masked}
2025-07-14 00:43:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:43:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430384067
2025-07-14 00:43:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/265/5rnts0pf/websocket", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/265/5rnts0pf/websocket
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5rnts0pf]
2025-07-14 00:43:04 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:43:04 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5rnts0pf
2025-07-14 00:43:04 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5rnts0pf
2025-07-14 00:43:04 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5rnts0pf
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430384353", parameters={masked}
2025-07-14 00:43:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:43:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430384353
2025-07-14 00:43:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/583/gqmpsxur/websocket", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/583/gqmpsxur/websocket
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:43:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gqmpsxur]
2025-07-14 00:43:04 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:43:04 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=gqmpsxur
2025-07-14 00:43:04 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=gqmpsxur
2025-07-14 00:43:04 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=gqmpsxur
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:43:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:43:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:43:05 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:43:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:43:05 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:43:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:43:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:43:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:43:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:43:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:43:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:43:27 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:43:27 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:43:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:43:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:43:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:47:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gqmpsxur] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:47:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gqmpsxur
2025-07-14 00:47:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5rnts0pf] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:47:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5rnts0pf
2025-07-14 00:47:59 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:47:59 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:47:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gqmpsxur
2025-07-14 00:47:59 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5rnts0pf
2025-07-14 00:47:59 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5rnts0pf}], simpSessionId=5rnts0pf}]
2025-07-14 00:47:59 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gqmpsxur}], simpSessionId=gqmpsxur}]
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430680441", parameters={masked}
2025-07-14 00:48:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430680441
2025-07-14 00:48:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/028/czpiklsy/websocket", parameters={}
2025-07-14 00:48:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/028/czpiklsy/websocket
2025-07-14 00:48:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=czpiklsy]
2025-07-14 00:48:00 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:48:00 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=czpiklsy
2025-07-14 00:48:00 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=czpiklsy
2025-07-14 00:48:00 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=czpiklsy
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430680579", parameters={masked}
2025-07-14 00:48:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430680579
2025-07-14 00:48:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/580/3052uoil/websocket", parameters={}
2025-07-14 00:48:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/580/3052uoil/websocket
2025-07-14 00:48:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3052uoil]
2025-07-14 00:48:00 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:48:00 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3052uoil
2025-07-14 00:48:00 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3052uoil
2025-07-14 00:48:00 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3052uoil
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:09 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [gqmpsxur, 5rnts0pf]
2025-07-14 00:48:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3052uoil] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:48:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3052uoil
2025-07-14 00:48:14 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:48:14 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3052uoil
2025-07-14 00:48:14 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3052uoil}], simpSessionId=3052uoil}]
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430694404", parameters={masked}
2025-07-14 00:48:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430694404
2025-07-14 00:48:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/388/u40xwrfk/websocket", parameters={}
2025-07-14 00:48:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/388/u40xwrfk/websocket
2025-07-14 00:48:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=u40xwrfk]
2025-07-14 00:48:14 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:48:14 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=u40xwrfk
2025-07-14 00:48:14 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=u40xwrfk
2025-07-14 00:48:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=u40xwrfk
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=czpiklsy] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:48:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session czpiklsy
2025-07-14 00:48:15 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:48:15 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=czpiklsy
2025-07-14 00:48:15 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=czpiklsy}], simpSessionId=czpiklsy}]
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430695481", parameters={masked}
2025-07-14 00:48:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430695481
2025-07-14 00:48:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/689/qkax2xuh/websocket", parameters={}
2025-07-14 00:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/689/qkax2xuh/websocket
2025-07-14 00:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qkax2xuh]
2025-07-14 00:48:15 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:48:15 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qkax2xuh
2025-07-14 00:48:15 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qkax2xuh
2025-07-14 00:48:15 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qkax2xuh
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=u40xwrfk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:48:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session u40xwrfk
2025-07-14 00:48:20 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:48:20 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=u40xwrfk
2025-07-14 00:48:20 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=u40xwrfk}], simpSessionId=u40xwrfk}]
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430700354", parameters={masked}
2025-07-14 00:48:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430700354
2025-07-14 00:48:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/145/pq21moru/websocket", parameters={}
2025-07-14 00:48:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/145/pq21moru/websocket
2025-07-14 00:48:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pq21moru]
2025-07-14 00:48:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:48:20 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pq21moru
2025-07-14 00:48:20 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=pq21moru
2025-07-14 00:48:20 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=pq21moru
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 00:48:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:24 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [czpiklsy, 3052uoil]
2025-07-14 00:48:29 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [u40xwrfk]
2025-07-14 00:48:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qkax2xuh] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:48:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qkax2xuh
2025-07-14 00:48:36 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:48:36 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qkax2xuh
2025-07-14 00:48:36 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qkax2xuh}], simpSessionId=qkax2xuh}]
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430717094", parameters={masked}
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430717094
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/168/wipl4ltk/websocket", parameters={}
2025-07-14 00:48:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/168/wipl4ltk/websocket
2025-07-14 00:48:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wipl4ltk]
2025-07-14 00:48:37 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:48:37 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wipl4ltk
2025-07-14 00:48:37 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wipl4ltk
2025-07-14 00:48:37 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wipl4ltk
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:48:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pq21moru] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:48:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pq21moru
2025-07-14 00:48:37 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:48:37 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pq21moru
2025-07-14 00:48:37 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pq21moru}], simpSessionId=pq21moru}]
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:48:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430717995", parameters={masked}
2025-07-14 00:48:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430717995
2025-07-14 00:48:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/908/uy3arkpq/websocket", parameters={}
2025-07-14 00:48:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:48:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/908/uy3arkpq/websocket
2025-07-14 00:48:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:48:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uy3arkpq]
2025-07-14 00:48:38 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:48:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uy3arkpq
2025-07-14 00:48:38 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uy3arkpq
2025-07-14 00:48:38 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uy3arkpq
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:48:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:48:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:44 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [qkax2xuh, pq21moru]
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:48:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:48:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:48:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:48:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:48:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wipl4ltk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:52:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uy3arkpq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wipl4ltk
2025-07-14 00:52:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uy3arkpq
2025-07-14 00:52:25 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:52:25 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:52:25 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uy3arkpq
2025-07-14 00:52:25 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wipl4ltk
2025-07-14 00:52:25 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=uy3arkpq}], simpSessionId=uy3arkpq}]
2025-07-14 00:52:25 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wipl4ltk}], simpSessionId=wipl4ltk}]
2025-07-14 00:52:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430945748", parameters={masked}
2025-07-14 00:52:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430945748
2025-07-14 00:52:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/433/z2hiqayn/websocket", parameters={}
2025-07-14 00:52:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/433/z2hiqayn/websocket
2025-07-14 00:52:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:52:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z2hiqayn]
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430945764", parameters={masked}
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430945764
2025-07-14 00:52:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:25 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:52:25 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=z2hiqayn
2025-07-14 00:52:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/672/15zd1ojp/websocket", parameters={}
2025-07-14 00:52:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/672/15zd1ojp/websocket
2025-07-14 00:52:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:52:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=15zd1ojp]
2025-07-14 00:52:25 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=z2hiqayn
2025-07-14 00:52:25 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=z2hiqayn
2025-07-14 00:52:25 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:52:25 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=15zd1ojp
2025-07-14 00:52:25 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=15zd1ojp
2025-07-14 00:52:25 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=15zd1ojp
2025-07-14 00:52:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:52:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:52:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=15zd1ojp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:52:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 15zd1ojp
2025-07-14 00:52:30 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:52:30 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=15zd1ojp
2025-07-14 00:52:30 [clientOutboundChannel-21] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=15zd1ojp}], simpSessionId=15zd1ojp}]
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430950372", parameters={masked}
2025-07-14 00:52:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430950372
2025-07-14 00:52:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/504/isjntnbv/websocket", parameters={}
2025-07-14 00:52:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/504/isjntnbv/websocket
2025-07-14 00:52:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:52:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=isjntnbv]
2025-07-14 00:52:30 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:52:30 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=isjntnbv
2025-07-14 00:52:30 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=isjntnbv
2025-07-14 00:52:30 [clientInboundChannel-51] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=isjntnbv
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z2hiqayn] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:52:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z2hiqayn
2025-07-14 00:52:31 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:52:31 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z2hiqayn
2025-07-14 00:52:31 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=z2hiqayn}], simpSessionId=z2hiqayn}]
2025-07-14 00:52:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752430951313", parameters={masked}
2025-07-14 00:52:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752430951313
2025-07-14 00:52:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/307/twq3j1st/websocket", parameters={}
2025-07-14 00:52:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:52:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/307/twq3j1st/websocket
2025-07-14 00:52:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:52:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=twq3j1st]
2025-07-14 00:52:31 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:52:31 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=twq3j1st
2025-07-14 00:52:31 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=twq3j1st
2025-07-14 00:52:31 [clientInboundChannel-65] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=twq3j1st
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:52:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:52:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:52:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:52:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:34 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [uy3arkpq, wipl4ltk]
2025-07-14 00:52:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Th", parameters={masked}
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 00:52:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:39 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [z2hiqayn, 15zd1ojp]
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 00:52:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 00:52:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:40 [clientInboundChannel-68] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=isjntnbv
2025-07-14 00:52:40 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/37/messages id=sub-3 session=isjntnbv
2025-07-14 00:52:40 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/37/messages id=sub-4 session=isjntnbv
2025-07-14 00:52:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/37?userId=2", parameters={masked}
2025-07-14 00:52:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:52:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:52:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:52:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:52:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/37?userId=2", parameters={masked}
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:52:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:52:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:52:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/37?userId=2", parameters={masked}
2025-07-14 00:52:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 00:52:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 00:52:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 00:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 00:52:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=isjntnbv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:54:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session isjntnbv
2025-07-14 00:54:34 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:54:34 [clientInboundChannel-84] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=isjntnbv
2025-07-14 00:54:34 [clientOutboundChannel-25] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=isjntnbv}], simpSessionId=isjntnbv}]
2025-07-14 00:54:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=twq3j1st] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:54:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session twq3j1st
2025-07-14 00:54:34 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:54:34 [clientInboundChannel-87] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=twq3j1st
2025-07-14 00:54:34 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=twq3j1st}], simpSessionId=twq3j1st}]
2025-07-14 00:54:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431074601", parameters={masked}
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431074601
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/838/vbo2zewd/websocket", parameters={}
2025-07-14 00:54:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:54:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/838/vbo2zewd/websocket
2025-07-14 00:54:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:54:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vbo2zewd]
2025-07-14 00:54:34 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:54:34 [clientInboundChannel-90] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vbo2zewd
2025-07-14 00:54:34 [clientInboundChannel-93] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=vbo2zewd
2025-07-14 00:54:34 [clientInboundChannel-96] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=vbo2zewd
2025-07-14 00:54:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:54:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:54:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:54:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431074787", parameters={masked}
2025-07-14 00:54:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:54:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431074787
2025-07-14 00:54:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/070/juvw3ug1/websocket", parameters={}
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/070/juvw3ug1/websocket
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:54:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=juvw3ug1]
2025-07-14 00:54:34 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:54:34 [clientInboundChannel-99] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=juvw3ug1
2025-07-14 00:54:34 [clientInboundChannel-102] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=juvw3ug1
2025-07-14 00:54:34 [clientInboundChannel-105] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=juvw3ug1
2025-07-14 00:54:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:54:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:54:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:54:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:54:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:54:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:54:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:54:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 00:54:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 00:54:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:54:39 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [isjntnbv, twq3j1st]
2025-07-14 00:55:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vbo2zewd] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:55:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vbo2zewd
2025-07-14 00:55:50 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:55:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=juvw3ug1] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:55:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session juvw3ug1
2025-07-14 00:55:50 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:55:50 [clientInboundChannel-108] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vbo2zewd
2025-07-14 00:55:50 [clientInboundChannel-111] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=juvw3ug1
2025-07-14 00:55:50 [clientOutboundChannel-29] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=vbo2zewd}], simpSessionId=vbo2zewd}]
2025-07-14 00:55:50 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=juvw3ug1}], simpSessionId=juvw3ug1}]
2025-07-14 00:55:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431150628", parameters={masked}
2025-07-14 00:55:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:55:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431150628
2025-07-14 00:55:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:55:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/461/43zthtg1/websocket", parameters={}
2025-07-14 00:55:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:55:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/461/43zthtg1/websocket
2025-07-14 00:55:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:55:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=43zthtg1]
2025-07-14 00:55:50 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:55:50 [clientInboundChannel-114] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=43zthtg1
2025-07-14 00:55:50 [clientInboundChannel-117] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=43zthtg1
2025-07-14 00:55:50 [clientInboundChannel-120] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=43zthtg1
2025-07-14 00:55:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431150858", parameters={masked}
2025-07-14 00:55:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:55:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431150858
2025-07-14 00:55:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:55:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/203/zfjiiejw/websocket", parameters={}
2025-07-14 00:55:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:55:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/203/zfjiiejw/websocket
2025-07-14 00:55:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:55:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zfjiiejw]
2025-07-14 00:55:50 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:55:50 [clientInboundChannel-123] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zfjiiejw
2025-07-14 00:55:50 [clientInboundChannel-126] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zfjiiejw
2025-07-14 00:55:50 [clientInboundChannel-129] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zfjiiejw
2025-07-14 00:55:59 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [vbo2zewd, juvw3ug1]
2025-07-14 00:56:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=43zthtg1] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:56:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 43zthtg1
2025-07-14 00:56:05 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:56:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zfjiiejw] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:56:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zfjiiejw
2025-07-14 00:56:05 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:56:05 [clientInboundChannel-132] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=43zthtg1
2025-07-14 00:56:05 [clientInboundChannel-135] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zfjiiejw
2025-07-14 00:56:05 [clientOutboundChannel-33] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=43zthtg1}], simpSessionId=43zthtg1}]
2025-07-14 00:56:05 [clientOutboundChannel-34] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zfjiiejw}], simpSessionId=zfjiiejw}]
2025-07-14 00:56:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431165648", parameters={masked}
2025-07-14 00:56:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431165648
2025-07-14 00:56:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:56:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/717/ao1fd4b2/websocket", parameters={}
2025-07-14 00:56:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/717/ao1fd4b2/websocket
2025-07-14 00:56:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:56:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ao1fd4b2]
2025-07-14 00:56:05 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:56:05 [clientInboundChannel-138] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ao1fd4b2
2025-07-14 00:56:05 [clientInboundChannel-109] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ao1fd4b2
2025-07-14 00:56:05 [clientInboundChannel-112] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ao1fd4b2
2025-07-14 00:56:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431165627", parameters={masked}
2025-07-14 00:56:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431165627
2025-07-14 00:56:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:56:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/170/q3ozbwxf/websocket", parameters={}
2025-07-14 00:56:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/170/q3ozbwxf/websocket
2025-07-14 00:56:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:56:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=q3ozbwxf]
2025-07-14 00:56:05 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:56:05 [clientInboundChannel-115] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=q3ozbwxf
2025-07-14 00:56:05 [clientInboundChannel-117] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=q3ozbwxf
2025-07-14 00:56:05 [clientInboundChannel-120] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=q3ozbwxf
2025-07-14 00:56:14 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [zfjiiejw, 43zthtg1]
2025-07-14 00:56:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ao1fd4b2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:56:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ao1fd4b2
2025-07-14 00:56:19 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:56:19 [clientInboundChannel-124] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ao1fd4b2
2025-07-14 00:56:19 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ao1fd4b2}], simpSessionId=ao1fd4b2}]
2025-07-14 00:56:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=q3ozbwxf] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:56:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session q3ozbwxf
2025-07-14 00:56:19 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:56:19 [clientInboundChannel-127] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=q3ozbwxf
2025-07-14 00:56:19 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=q3ozbwxf}], simpSessionId=q3ozbwxf}]
2025-07-14 00:56:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431179420", parameters={masked}
2025-07-14 00:56:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431179420
2025-07-14 00:56:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:56:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/673/33tmu2qt/websocket", parameters={}
2025-07-14 00:56:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/673/33tmu2qt/websocket
2025-07-14 00:56:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:56:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=33tmu2qt]
2025-07-14 00:56:19 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:56:19 [clientInboundChannel-130] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=33tmu2qt
2025-07-14 00:56:19 [clientInboundChannel-133] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=33tmu2qt
2025-07-14 00:56:19 [clientInboundChannel-133] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=33tmu2qt
2025-07-14 00:56:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431179497", parameters={masked}
2025-07-14 00:56:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431179497
2025-07-14 00:56:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:56:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/678/idfa4t0r/websocket", parameters={}
2025-07-14 00:56:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:56:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/678/idfa4t0r/websocket
2025-07-14 00:56:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:56:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=idfa4t0r]
2025-07-14 00:56:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:56:19 [clientInboundChannel-137] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=idfa4t0r
2025-07-14 00:56:19 [clientInboundChannel-110] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=idfa4t0r
2025-07-14 00:56:19 [clientInboundChannel-113] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=idfa4t0r
2025-07-14 00:56:24 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [q3ozbwxf, ao1fd4b2]
2025-07-14 00:58:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=33tmu2qt] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:58:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 33tmu2qt
2025-07-14 00:58:13 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:58:13 [clientInboundChannel-140] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=33tmu2qt
2025-07-14 00:58:13 [clientOutboundChannel-41] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=33tmu2qt}], simpSessionId=33tmu2qt}]
2025-07-14 00:58:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=idfa4t0r] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:58:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session idfa4t0r
2025-07-14 00:58:13 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:58:13 [clientInboundChannel-143] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=idfa4t0r
2025-07-14 00:58:13 [clientOutboundChannel-42] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=idfa4t0r}], simpSessionId=idfa4t0r}]
2025-07-14 00:58:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431294198", parameters={masked}
2025-07-14 00:58:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431294198
2025-07-14 00:58:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:58:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431296498", parameters={masked}
2025-07-14 00:58:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431296498
2025-07-14 00:58:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:58:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/782/wa2b44wc/websocket", parameters={}
2025-07-14 00:58:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/782/wa2b44wc/websocket
2025-07-14 00:58:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:58:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wa2b44wc]
2025-07-14 00:58:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:58:16 [clientInboundChannel-146] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wa2b44wc
2025-07-14 00:58:16 [clientInboundChannel-149] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wa2b44wc
2025-07-14 00:58:16 [clientInboundChannel-152] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wa2b44wc
2025-07-14 00:58:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/838/n5sfxywx/websocket", parameters={}
2025-07-14 00:58:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/838/n5sfxywx/websocket
2025-07-14 00:58:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:58:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n5sfxywx]
2025-07-14 00:58:16 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:58:16 [clientInboundChannel-155] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=n5sfxywx
2025-07-14 00:58:16 [clientInboundChannel-158] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=n5sfxywx
2025-07-14 00:58:16 [clientInboundChannel-161] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=n5sfxywx
2025-07-14 00:58:19 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [idfa4t0r, 33tmu2qt]
2025-07-14 00:58:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n5sfxywx] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:58:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n5sfxywx
2025-07-14 00:58:59 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:58:59 [clientInboundChannel-164] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=n5sfxywx
2025-07-14 00:58:59 [clientOutboundChannel-45] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=n5sfxywx}], simpSessionId=n5sfxywx}]
2025-07-14 00:58:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431339598", parameters={masked}
2025-07-14 00:58:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431339598
2025-07-14 00:58:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:58:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/604/m5ytbbm2/websocket", parameters={}
2025-07-14 00:58:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:58:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/604/m5ytbbm2/websocket
2025-07-14 00:58:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:58:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m5ytbbm2]
2025-07-14 00:58:59 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:58:59 [clientInboundChannel-167] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=m5ytbbm2
2025-07-14 00:58:59 [clientInboundChannel-141] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=m5ytbbm2
2025-07-14 00:58:59 [clientInboundChannel-170] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=m5ytbbm2
2025-07-14 00:59:09 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [n5sfxywx]
2025-07-14 00:59:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wa2b44wc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:59:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wa2b44wc
2025-07-14 00:59:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m5ytbbm2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 00:59:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m5ytbbm2
2025-07-14 00:59:36 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:59:36 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 00:59:36 [clientInboundChannel-174] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wa2b44wc
2025-07-14 00:59:36 [clientInboundChannel-173] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=m5ytbbm2
2025-07-14 00:59:36 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=m5ytbbm2}], simpSessionId=m5ytbbm2}]
2025-07-14 00:59:36 [clientOutboundChannel-48] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wa2b44wc}], simpSessionId=wa2b44wc}]
2025-07-14 00:59:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431376461", parameters={masked}
2025-07-14 00:59:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:59:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431376461
2025-07-14 00:59:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:59:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/389/fjk2h1ud/websocket", parameters={}
2025-07-14 00:59:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:59:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/389/fjk2h1ud/websocket
2025-07-14 00:59:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:59:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fjk2h1ud]
2025-07-14 00:59:36 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 00:59:36 [clientInboundChannel-178] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fjk2h1ud
2025-07-14 00:59:36 [clientInboundChannel-181] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fjk2h1ud
2025-07-14 00:59:36 [clientInboundChannel-184] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fjk2h1ud
2025-07-14 00:59:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431376447", parameters={masked}
2025-07-14 00:59:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:59:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431376447
2025-07-14 00:59:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 00:59:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/455/k3minb0t/websocket", parameters={}
2025-07-14 00:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 00:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/455/k3minb0t/websocket
2025-07-14 00:59:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 00:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=k3minb0t]
2025-07-14 00:59:36 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 00:59:36 [clientInboundChannel-187] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=k3minb0t
2025-07-14 00:59:36 [clientInboundChannel-190] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=k3minb0t
2025-07-14 00:59:36 [clientInboundChannel-163] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=k3minb0t
2025-07-14 00:59:44 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [m5ytbbm2, wa2b44wc]
2025-07-14 01:00:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=k3minb0t] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:00:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session k3minb0t
2025-07-14 01:00:23 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:00:23 [clientInboundChannel-193] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=k3minb0t
2025-07-14 01:00:23 [clientOutboundChannel-51] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=k3minb0t}], simpSessionId=k3minb0t}]
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fjk2h1ud] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fjk2h1ud
2025-07-14 01:00:23 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:00:23 [clientInboundChannel-196] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fjk2h1ud
2025-07-14 01:00:23 [clientOutboundChannel-52] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=fjk2h1ud}], simpSessionId=fjk2h1ud}]
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431423348", parameters={masked}
2025-07-14 01:00:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431423348
2025-07-14 01:00:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:00:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/280/yxohn3sl/websocket", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/280/yxohn3sl/websocket
2025-07-14 01:00:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:00:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yxohn3sl]
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:00:23 [clientInboundChannel-199] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yxohn3sl
2025-07-14 01:00:23 [clientInboundChannel-171] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yxohn3sl
2025-07-14 01:00:23 [clientInboundChannel-175] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yxohn3sl
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431423473", parameters={masked}
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431423473
2025-07-14 01:00:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:00:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/240/3x1jyp3z/websocket", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/240/3x1jyp3z/websocket
2025-07-14 01:00:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:00:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3x1jyp3z]
2025-07-14 01:00:23 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:00:23 [clientInboundChannel-177] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3x1jyp3z
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/apiconversations", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:23 [clientInboundChannel-180] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3x1jyp3z
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource apiconversations.]
2025-07-14 01:00:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:23 [clientInboundChannel-183] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3x1jyp3z
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/apiconversations", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource apiconversations.]
2025-07-14 01:00:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/apiconversations", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource apiconversations.]
2025-07-14 01:00:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/apiconversations", parameters={}
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource apiconversations.]
2025-07-14 01:00:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:29 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [fjk2h1ud, k3minb0t]
2025-07-14 01:00:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3x1jyp3z] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:00:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3x1jyp3z
2025-07-14 01:00:31 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:00:31 [clientInboundChannel-186] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3x1jyp3z
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yxohn3sl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yxohn3sl
2025-07-14 01:00:31 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:00:31 [clientInboundChannel-191] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yxohn3sl
2025-07-14 01:00:31 [clientOutboundChannel-55] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3x1jyp3z}], simpSessionId=3x1jyp3z}]
2025-07-14 01:00:31 [clientOutboundChannel-56] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yxohn3sl}], simpSessionId=yxohn3sl}]
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431431492", parameters={masked}
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431431492
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/271/gllmi3rf/websocket", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/271/gllmi3rf/websocket
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gllmi3rf]
2025-07-14 01:00:31 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:00:31 [clientInboundChannel-164] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=gllmi3rf
2025-07-14 01:00:31 [clientInboundChannel-193] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=gllmi3rf
2025-07-14 01:00:31 [clientInboundChannel-197] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=gllmi3rf
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/conversations.]
2025-07-14 01:00:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431431667", parameters={masked}
2025-07-14 01:00:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431431667
2025-07-14 01:00:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/conversations.]
2025-07-14 01:00:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/986/ljj5lcwl/websocket", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/986/ljj5lcwl/websocket
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:00:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ljj5lcwl]
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:00:31 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:00:31 [clientInboundChannel-200] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ljj5lcwl
2025-07-14 01:00:31 [clientInboundChannel-173] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ljj5lcwl
2025-07-14 01:00:31 [clientInboundChannel-176] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ljj5lcwl
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/conversations.]
2025-07-14 01:00:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations", parameters={}
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleGeneralException(Exception)
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=An unexpected error occurred, data=null)]
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/conversations.]
2025-07-14 01:00:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-07-14 01:00:39 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [yxohn3sl, 3x1jyp3z]
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ljj5lcwl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:02:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gllmi3rf] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ljj5lcwl
2025-07-14 01:02:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gllmi3rf
2025-07-14 01:02:05 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:02:05 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:02:05 [clientInboundChannel-204] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ljj5lcwl
2025-07-14 01:02:05 [clientInboundChannel-203] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gllmi3rf
2025-07-14 01:02:05 [clientOutboundChannel-59] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ljj5lcwl}], simpSessionId=ljj5lcwl}]
2025-07-14 01:02:05 [clientOutboundChannel-60] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gllmi3rf}], simpSessionId=gllmi3rf}]
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431525357", parameters={masked}
2025-07-14 01:02:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431525357
2025-07-14 01:02:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/154/f53j0m1a/websocket", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/154/f53j0m1a/websocket
2025-07-14 01:02:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:02:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=f53j0m1a]
2025-07-14 01:02:05 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:02:05 [clientInboundChannel-208] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=f53j0m1a
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:05 [clientInboundChannel-211] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=f53j0m1a
2025-07-14 01:02:05 [clientInboundChannel-214] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=f53j0m1a
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431525463", parameters={masked}
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431525463
2025-07-14 01:02:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/441/iwithbwo/websocket", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/441/iwithbwo/websocket
2025-07-14 01:02:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:02:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iwithbwo]
2025-07-14 01:02:05 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:02:05 [clientInboundChannel-217] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=iwithbwo
2025-07-14 01:02:05 [clientInboundChannel-220] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=iwithbwo
2025-07-14 01:02:05 [clientInboundChannel-223] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=iwithbwo
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:05 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:05 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:02:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:06 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:14 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [gllmi3rf, ljj5lcwl]
2025-07-14 01:02:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:02:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iwithbwo] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:02:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iwithbwo
2025-07-14 01:02:33 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:02:33 [clientInboundChannel-226] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iwithbwo
2025-07-14 01:02:33 [clientOutboundChannel-63] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iwithbwo}], simpSessionId=iwithbwo}]
2025-07-14 01:02:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431553625", parameters={masked}
2025-07-14 01:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431553625
2025-07-14 01:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/859/1xvez3n3/websocket", parameters={}
2025-07-14 01:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/859/1xvez3n3/websocket
2025-07-14 01:02:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1xvez3n3]
2025-07-14 01:02:33 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:02:33 [clientInboundChannel-229] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1xvez3n3
2025-07-14 01:02:33 [clientInboundChannel-232] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=1xvez3n3
2025-07-14 01:02:33 [clientInboundChannel-201] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=1xvez3n3
2025-07-14 01:02:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:02:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:02:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:02:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:02:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:02:39 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [iwithbwo]
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:02:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=f53j0m1a] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:02:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session f53j0m1a
2025-07-14 01:02:56 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:02:56 [clientInboundChannel-204] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=f53j0m1a
2025-07-14 01:02:56 [clientOutboundChannel-65] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=f53j0m1a}], simpSessionId=f53j0m1a}]
2025-07-14 01:02:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431576698", parameters={masked}
2025-07-14 01:02:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431576698
2025-07-14 01:02:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/062/yidkd3vr/websocket", parameters={}
2025-07-14 01:02:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:02:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/062/yidkd3vr/websocket
2025-07-14 01:02:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:02:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yidkd3vr]
2025-07-14 01:02:56 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:02:56 [clientInboundChannel-209] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yidkd3vr
2025-07-14 01:02:56 [clientInboundChannel-212] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yidkd3vr
2025-07-14 01:02:56 [clientInboundChannel-212] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yidkd3vr
2025-07-14 01:02:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:02:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:02:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:02:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:02:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:03:04 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [f53j0m1a]
2025-07-14 01:03:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yidkd3vr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:03:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yidkd3vr
2025-07-14 01:03:42 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:03:42 [clientInboundChannel-234] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yidkd3vr
2025-07-14 01:03:42 [clientOutboundChannel-67] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yidkd3vr}], simpSessionId=yidkd3vr}]
2025-07-14 01:03:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:03:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431622613", parameters={masked}
2025-07-14 01:03:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:03:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431622613
2025-07-14 01:03:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:03:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/834/akpi4igt/websocket", parameters={}
2025-07-14 01:03:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:03:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/834/akpi4igt/websocket
2025-07-14 01:03:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:03:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=akpi4igt]
2025-07-14 01:03:42 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:03:42 [clientInboundChannel-237] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=akpi4igt
2025-07-14 01:03:42 [clientInboundChannel-240] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=akpi4igt
2025-07-14 01:03:42 [clientInboundChannel-243] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=akpi4igt
2025-07-14 01:03:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:03:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:03:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:03:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:03:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:03:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:03:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:03:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:03:49 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [yidkd3vr]
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Tha", parameters={masked}
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:03:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:03:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:03:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:03:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:03:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:04:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=akpi4igt] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:04:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session akpi4igt
2025-07-14 01:04:18 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:04:18 [clientInboundChannel-246] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=akpi4igt
2025-07-14 01:04:18 [clientOutboundChannel-69] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=akpi4igt}], simpSessionId=akpi4igt}]
2025-07-14 01:04:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:04:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431658630", parameters={masked}
2025-07-14 01:04:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:04:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431658630
2025-07-14 01:04:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:04:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/283/dk5ykmdd/websocket", parameters={}
2025-07-14 01:04:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:04:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/283/dk5ykmdd/websocket
2025-07-14 01:04:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:04:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dk5ykmdd]
2025-07-14 01:04:18 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:04:18 [clientInboundChannel-249] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dk5ykmdd
2025-07-14 01:04:18 [clientInboundChannel-252] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=dk5ykmdd
2025-07-14 01:04:18 [clientInboundChannel-255] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dk5ykmdd
2025-07-14 01:04:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:04:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:04:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:04:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:04:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:04:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:04:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:04:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:04:24 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [akpi4igt]
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:04:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:04:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:04:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:04:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:04:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:04:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dk5ykmdd] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:05:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dk5ykmdd
2025-07-14 01:05:03 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:05:03 [clientInboundChannel-258] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dk5ykmdd
2025-07-14 01:05:03 [clientOutboundChannel-71] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dk5ykmdd}], simpSessionId=dk5ykmdd}]
2025-07-14 01:05:03 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:05:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431703672", parameters={masked}
2025-07-14 01:05:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:05:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431703672
2025-07-14 01:05:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/174/apargtuo/websocket", parameters={}
2025-07-14 01:05:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:05:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/174/apargtuo/websocket
2025-07-14 01:05:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:05:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=apargtuo]
2025-07-14 01:05:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:05:03 [clientInboundChannel-261] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=apargtuo
2025-07-14 01:05:03 [clientInboundChannel-264] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=apargtuo
2025-07-14 01:05:03 [clientInboundChannel-267] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=apargtuo
2025-07-14 01:05:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:05:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:05:03 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:05:03 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:05:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:05:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:05:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:09 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dk5ykmdd]
2025-07-14 01:05:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=apargtuo] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:05:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session apargtuo
2025-07-14 01:05:11 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:05:11 [clientInboundChannel-270] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=apargtuo
2025-07-14 01:05:11 [clientOutboundChannel-73] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=apargtuo}], simpSessionId=apargtuo}]
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:05:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431712028", parameters={masked}
2025-07-14 01:05:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:05:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431712028
2025-07-14 01:05:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/217/fjuwfxg0/websocket", parameters={}
2025-07-14 01:05:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:05:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/217/fjuwfxg0/websocket
2025-07-14 01:05:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:05:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fjuwfxg0]
2025-07-14 01:05:12 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:05:12 [clientInboundChannel-273] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fjuwfxg0
2025-07-14 01:05:12 [clientInboundChannel-245] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fjuwfxg0
2025-07-14 01:05:12 [clientInboundChannel-276] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fjuwfxg0
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:05:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:05:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:05:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:05:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:05:19 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [apargtuo]
2025-07-14 01:07:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1xvez3n3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:07:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1xvez3n3
2025-07-14 01:07:09 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:07:09 [clientInboundChannel-278] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1xvez3n3
2025-07-14 01:07:09 [clientOutboundChannel-75] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1xvez3n3}], simpSessionId=1xvez3n3}]
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431830141", parameters={masked}
2025-07-14 01:07:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:07:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431830141
2025-07-14 01:07:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/662/fvj5mcpp/websocket", parameters={}
2025-07-14 01:07:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:07:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/662/fvj5mcpp/websocket
2025-07-14 01:07:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:07:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fvj5mcpp]
2025-07-14 01:07:10 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:07:10 [clientInboundChannel-281] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fvj5mcpp
2025-07-14 01:07:10 [clientInboundChannel-284] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fvj5mcpp
2025-07-14 01:07:10 [clientInboundChannel-287] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fvj5mcpp
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:07:10 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:10 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:07:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:07:10 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:07:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:07:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:19 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1xvez3n3]
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:07:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:07:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:07:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:07:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fjuwfxg0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:07:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fjuwfxg0
2025-07-14 01:07:37 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:07:37 [clientInboundChannel-290] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fjuwfxg0
2025-07-14 01:07:37 [clientOutboundChannel-77] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=fjuwfxg0}], simpSessionId=fjuwfxg0}]
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431857334", parameters={masked}
2025-07-14 01:07:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:07:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431857334
2025-07-14 01:07:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/992/uwgs134q/websocket", parameters={}
2025-07-14 01:07:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:07:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/992/uwgs134q/websocket
2025-07-14 01:07:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:07:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uwgs134q]
2025-07-14 01:07:37 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:07:37 [clientInboundChannel-293] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uwgs134q
2025-07-14 01:07:37 [clientInboundChannel-296] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uwgs134q
2025-07-14 01:07:37 [clientInboundChannel-299] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uwgs134q
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:07:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:07:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:07:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:07:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:07:44 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [fjuwfxg0]
2025-07-14 01:08:12 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 01:08:12 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 01:08:13 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session uwgs134q with CloseStatus[code=1001, reason=null]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=uwgs134q]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uwgs134q] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uwgs134q
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session fvj5mcpp with CloseStatus[code=1001, reason=null]
2025-07-14 01:08:13 [clientInboundChannel-302] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uwgs134q
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=fvj5mcpp]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fvj5mcpp] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fvj5mcpp
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]]
2025-07-14 01:08:13 [clientInboundChannel-305] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fvj5mcpp
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 01:08:13 [RMI TCP Connection(30)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 01:08:14 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 33528 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 01:08:14 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 01:08:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 01:08:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 6 JPA repository interfaces.
2025-07-14 01:08:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 01:08:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 01:08:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 01:08:15 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 01:08:15 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 779 ms
2025-07-14 01:08:15 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 01:08:15 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 01:08:15 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 01:08:15 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 01:08:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 01:08:16 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c997de8
2025-07-14 01:08:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 01:08:17 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 01:08:17 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 01:08:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 01:08:17 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 01:08:18 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:08:18 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 01:08:18 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 01:08:18 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 01:08:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 01:08:19 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 01:08:19 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:08:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]
2025-07-14 01:08:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]]
2025-07-14 01:08:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:08:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:08:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 01:08:19 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.585 seconds (process running for 4.924)
2025-07-14 01:08:52 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 01:08:52 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@337d97e3
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@784bb800
2025-07-14 01:08:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 01:08:52 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 01:08:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431932178", parameters={masked}
2025-07-14 01:08:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:08:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431932178
2025-07-14 01:08:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:08:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/662/y54xoxrm/websocket", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:08:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/662/y54xoxrm/websocket
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752431932228", parameters={masked}
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752431932228
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/300/kwzevcjm/websocket", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/300/kwzevcjm/websocket
2025-07-14 01:08:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:08:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=y54xoxrm]
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kwzevcjm]
2025-07-14 01:08:52 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:08:52 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:08:52 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=y54xoxrm
2025-07-14 01:08:52 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=kwzevcjm
2025-07-14 01:08:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=kwzevcjm
2025-07-14 01:08:52 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=kwzevcjm
2025-07-14 01:08:52 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=y54xoxrm
2025-07-14 01:08:52 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=y54xoxrm
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:08:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:08:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:08:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:08:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:08:53 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:08:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:08:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:08:53 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:08:53 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:08:53 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:08:53 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:09:19 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 14, active threads = 1, queued tasks = 3, completed tasks = 8]
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:09:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:09:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:09:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:09:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:09:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:09:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=y54xoxrm] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:10:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session y54xoxrm
2025-07-14 01:10:17 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:10:17 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=y54xoxrm
2025-07-14 01:10:17 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=y54xoxrm}], simpSessionId=y54xoxrm}]
2025-07-14 01:10:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432017649", parameters={masked}
2025-07-14 01:10:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432017649
2025-07-14 01:10:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/071/cwyeomhe/websocket", parameters={}
2025-07-14 01:10:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/071/cwyeomhe/websocket
2025-07-14 01:10:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:10:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cwyeomhe]
2025-07-14 01:10:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:10:17 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=cwyeomhe
2025-07-14 01:10:17 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=cwyeomhe
2025-07-14 01:10:17 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=cwyeomhe
2025-07-14 01:10:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:10:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:27 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [y54xoxrm]
2025-07-14 01:10:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kwzevcjm] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:10:38 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kwzevcjm
2025-07-14 01:10:38 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:10:38 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kwzevcjm
2025-07-14 01:10:38 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=kwzevcjm}], simpSessionId=kwzevcjm}]
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432038382", parameters={masked}
2025-07-14 01:10:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432038382
2025-07-14 01:10:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/318/3tdlzf5w/websocket", parameters={}
2025-07-14 01:10:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/318/3tdlzf5w/websocket
2025-07-14 01:10:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:10:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3tdlzf5w]
2025-07-14 01:10:38 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:10:38 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3tdlzf5w
2025-07-14 01:10:38 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3tdlzf5w
2025-07-14 01:10:38 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3tdlzf5w
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cwyeomhe] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:10:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cwyeomhe
2025-07-14 01:10:43 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:10:43 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cwyeomhe
2025-07-14 01:10:43 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cwyeomhe}], simpSessionId=cwyeomhe}]
2025-07-14 01:10:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3tdlzf5w] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:10:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3tdlzf5w
2025-07-14 01:10:44 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:10:44 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3tdlzf5w
2025-07-14 01:10:44 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3tdlzf5w}], simpSessionId=3tdlzf5w}]
2025-07-14 01:10:47 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kwzevcjm]
2025-07-14 01:10:52 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3tdlzf5w, cwyeomhe]
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432055205", parameters={masked}
2025-07-14 01:10:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432055205
2025-07-14 01:10:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/448/apydxubj/websocket", parameters={}
2025-07-14 01:10:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:10:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/448/apydxubj/websocket
2025-07-14 01:10:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:10:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=apydxubj]
2025-07-14 01:10:55 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:10:55 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=apydxubj
2025-07-14 01:10:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=apydxubj
2025-07-14 01:10:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=apydxubj
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:10:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:11:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:11:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:11:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:11:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=apydxubj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:12:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session apydxubj
2025-07-14 01:12:29 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:12:29 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=apydxubj
2025-07-14 01:12:29 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=apydxubj}], simpSessionId=apydxubj}]
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:12:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432149488", parameters={masked}
2025-07-14 01:12:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:12:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432149488
2025-07-14 01:12:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:12:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/932/yphv4xja/websocket", parameters={}
2025-07-14 01:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/932/yphv4xja/websocket
2025-07-14 01:12:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:12:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yphv4xja]
2025-07-14 01:12:29 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:12:29 [clientInboundChannel-55] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yphv4xja
2025-07-14 01:12:29 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yphv4xja
2025-07-14 01:12:29 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yphv4xja
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:12:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:12:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:12:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:12:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:12:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:12:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:12:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:12:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:12:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:12:37 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [apydxubj]
2025-07-14 01:16:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yphv4xja] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:16:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yphv4xja
2025-07-14 01:16:57 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:16:57 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yphv4xja
2025-07-14 01:16:57 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yphv4xja}], simpSessionId=yphv4xja}]
2025-07-14 01:16:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:16:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432417985", parameters={masked}
2025-07-14 01:16:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:16:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432417985
2025-07-14 01:16:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:16:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/418/2xgtzyfc/websocket", parameters={}
2025-07-14 01:16:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:16:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/418/2xgtzyfc/websocket
2025-07-14 01:16:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:16:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2xgtzyfc]
2025-07-14 01:16:58 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:16:58 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2xgtzyfc
2025-07-14 01:16:58 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=2xgtzyfc
2025-07-14 01:16:58 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=2xgtzyfc
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:16:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:16:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:17:07 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [yphv4xja]
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:17:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Th", parameters={masked}
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Ht", parameters={masked}
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:17:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:17:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:17:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2xgtzyfc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:17:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2xgtzyfc
2025-07-14 01:17:53 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:17:53 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2xgtzyfc
2025-07-14 01:17:53 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2xgtzyfc}], simpSessionId=2xgtzyfc}]
2025-07-14 01:18:02 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2xgtzyfc]
2025-07-14 01:18:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:18:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432539765", parameters={masked}
2025-07-14 01:18:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:18:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432539765
2025-07-14 01:18:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:18:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/822/yt1j524o/websocket", parameters={}
2025-07-14 01:18:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:18:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/822/yt1j524o/websocket
2025-07-14 01:18:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:18:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yt1j524o]
2025-07-14 01:18:59 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:18:59 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yt1j524o
2025-07-14 01:18:59 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yt1j524o
2025-07-14 01:18:59 [clientInboundChannel-85] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yt1j524o
2025-07-14 01:18:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:18:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:18:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:43 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yt1j524o] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:19:43 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yt1j524o
2025-07-14 01:19:43 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:19:43 [clientInboundChannel-88] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yt1j524o
2025-07-14 01:19:43 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yt1j524o}], simpSessionId=yt1j524o}]
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:19:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432583288", parameters={masked}
2025-07-14 01:19:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:19:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432583288
2025-07-14 01:19:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/936/0syurg5z/websocket", parameters={}
2025-07-14 01:19:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:19:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/936/0syurg5z/websocket
2025-07-14 01:19:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:19:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0syurg5z]
2025-07-14 01:19:43 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:19:43 [clientInboundChannel-91] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0syurg5z
2025-07-14 01:19:43 [clientInboundChannel-94] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0syurg5z
2025-07-14 01:19:43 [clientInboundChannel-97] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0syurg5z
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:44 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:52 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [yt1j524o]
2025-07-14 01:19:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0syurg5z] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:19:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0syurg5z
2025-07-14 01:19:55 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:19:55 [clientInboundChannel-100] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0syurg5z
2025-07-14 01:19:55 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0syurg5z}], simpSessionId=0syurg5z}]
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:19:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432595144", parameters={masked}
2025-07-14 01:19:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:19:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432595144
2025-07-14 01:19:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/789/qajvtwtp/websocket", parameters={}
2025-07-14 01:19:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:19:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/789/qajvtwtp/websocket
2025-07-14 01:19:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:19:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qajvtwtp]
2025-07-14 01:19:55 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:19:55 [clientInboundChannel-103] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qajvtwtp
2025-07-14 01:19:55 [clientInboundChannel-106] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qajvtwtp
2025-07-14 01:19:55 [clientInboundChannel-109] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qajvtwtp
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:19:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:19:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:02 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [0syurg5z]
2025-07-14 01:20:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qajvtwtp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:20:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qajvtwtp
2025-07-14 01:20:25 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:20:25 [clientInboundChannel-111] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qajvtwtp
2025-07-14 01:20:25 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qajvtwtp}], simpSessionId=qajvtwtp}]
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:20:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432625303", parameters={masked}
2025-07-14 01:20:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:20:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432625303
2025-07-14 01:20:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/715/5qo1jklx/websocket", parameters={}
2025-07-14 01:20:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:20:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/715/5qo1jklx/websocket
2025-07-14 01:20:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:20:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5qo1jklx]
2025-07-14 01:20:25 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:20:25 [clientInboundChannel-114] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5qo1jklx
2025-07-14 01:20:25 [clientInboundChannel-117] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5qo1jklx
2025-07-14 01:20:25 [clientInboundChannel-117] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5qo1jklx
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:20:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:20:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:20:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:20:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:20:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:20:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:20:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:20:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:32 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qajvtwtp]
2025-07-14 01:20:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5qo1jklx] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:20:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5qo1jklx
2025-07-14 01:20:34 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:20:34 [clientInboundChannel-91] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5qo1jklx
2025-07-14 01:20:34 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5qo1jklx}], simpSessionId=5qo1jklx}]
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:20:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432634291", parameters={masked}
2025-07-14 01:20:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:20:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432634291
2025-07-14 01:20:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/085/ws5apwjt/websocket", parameters={}
2025-07-14 01:20:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:20:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/085/ws5apwjt/websocket
2025-07-14 01:20:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:20:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ws5apwjt]
2025-07-14 01:20:34 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:20:34 [clientInboundChannel-95] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ws5apwjt
2025-07-14 01:20:34 [clientInboundChannel-98] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ws5apwjt
2025-07-14 01:20:34 [clientInboundChannel-98] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ws5apwjt
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:20:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:20:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:20:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:20:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:20:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:20:42 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5qo1jklx]
2025-07-14 01:21:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ws5apwjt] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:21:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ws5apwjt
2025-07-14 01:21:43 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:21:43 [clientInboundChannel-119] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ws5apwjt
2025-07-14 01:21:43 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ws5apwjt}], simpSessionId=ws5apwjt}]
2025-07-14 01:21:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:21:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432703931", parameters={masked}
2025-07-14 01:21:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:21:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432703931
2025-07-14 01:21:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:21:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/187/1ehggrf5/websocket", parameters={}
2025-07-14 01:21:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:21:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/187/1ehggrf5/websocket
2025-07-14 01:21:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:21:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1ehggrf5]
2025-07-14 01:21:43 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:21:43 [clientInboundChannel-122] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1ehggrf5
2025-07-14 01:21:43 [clientInboundChannel-125] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=1ehggrf5
2025-07-14 01:21:43 [clientInboundChannel-128] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=1ehggrf5
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:21:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:21:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:21:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:21:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:21:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:21:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:21:52 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ws5apwjt]
2025-07-14 01:22:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1ehggrf5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:22:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1ehggrf5
2025-07-14 01:22:09 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:22:09 [clientInboundChannel-131] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1ehggrf5
2025-07-14 01:22:09 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1ehggrf5}], simpSessionId=1ehggrf5}]
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:22:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432729359", parameters={masked}
2025-07-14 01:22:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:22:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432729359
2025-07-14 01:22:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/324/bdfw5upd/websocket", parameters={}
2025-07-14 01:22:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:22:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/324/bdfw5upd/websocket
2025-07-14 01:22:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:22:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bdfw5upd]
2025-07-14 01:22:09 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:22:09 [clientInboundChannel-134] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bdfw5upd
2025-07-14 01:22:09 [clientInboundChannel-137] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bdfw5upd
2025-07-14 01:22:09 [clientInboundChannel-140] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bdfw5upd
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:22:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:22:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:22:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:22:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:22:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:22:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:22:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:17 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1ehggrf5]
2025-07-14 01:22:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bdfw5upd] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:22:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bdfw5upd
2025-07-14 01:22:43 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:22:43 [clientInboundChannel-143] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bdfw5upd
2025-07-14 01:22:43 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bdfw5upd}], simpSessionId=bdfw5upd}]
2025-07-14 01:22:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:22:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432763940", parameters={masked}
2025-07-14 01:22:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:22:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432763940
2025-07-14 01:22:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/286/rkgxa1t0/websocket", parameters={}
2025-07-14 01:22:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:22:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/286/rkgxa1t0/websocket
2025-07-14 01:22:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:22:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rkgxa1t0]
2025-07-14 01:22:43 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:22:43 [clientInboundChannel-146] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rkgxa1t0
2025-07-14 01:22:43 [clientInboundChannel-149] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=rkgxa1t0
2025-07-14 01:22:43 [clientInboundChannel-152] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rkgxa1t0
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:22:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:22:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:22:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:22:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:22:52 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [bdfw5upd]
2025-07-14 01:26:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rkgxa1t0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:26:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rkgxa1t0
2025-07-14 01:26:15 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:26:15 [clientInboundChannel-154] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rkgxa1t0
2025-07-14 01:26:15 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=rkgxa1t0}], simpSessionId=rkgxa1t0}]
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752432975209", parameters={masked}
2025-07-14 01:26:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752432975209
2025-07-14 01:26:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/478/ie02vcpg/websocket", parameters={}
2025-07-14 01:26:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/478/ie02vcpg/websocket
2025-07-14 01:26:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:26:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ie02vcpg]
2025-07-14 01:26:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:26:15 [clientInboundChannel-157] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ie02vcpg
2025-07-14 01:26:15 [clientInboundChannel-160] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ie02vcpg
2025-07-14 01:26:15 [clientInboundChannel-163] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ie02vcpg
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:20 [clientInboundChannel-166] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-169] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-3 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-172] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-4 session=ie02vcpg
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:20 [clientInboundChannel-175] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-178] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-181] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-184] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-6 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-155] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-7 session=ie02vcpg
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:20 [clientInboundChannel-157] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-158] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-159] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-8 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-158] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-9 session=ie02vcpg
2025-07-14 01:26:20 [clientInboundChannel-169] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-10 session=ie02vcpg
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:22 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [rkgxa1t0]
2025-07-14 01:26:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ie02vcpg] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:26:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ie02vcpg
2025-07-14 01:26:43 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:26:43 [clientInboundChannel-172] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ie02vcpg
2025-07-14 01:26:43 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ie02vcpg}], simpSessionId=ie02vcpg}]
2025-07-14 01:26:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433003911", parameters={masked}
2025-07-14 01:26:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433003911
2025-07-14 01:26:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/908/jqjm3adt/websocket", parameters={}
2025-07-14 01:26:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/908/jqjm3adt/websocket
2025-07-14 01:26:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:26:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jqjm3adt]
2025-07-14 01:26:43 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:26:43 [clientInboundChannel-176] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=jqjm3adt
2025-07-14 01:26:43 [clientInboundChannel-178] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jqjm3adt
2025-07-14 01:26:43 [clientInboundChannel-180] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jqjm3adt
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:52 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ie02vcpg]
2025-07-14 01:26:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jqjm3adt] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:26:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jqjm3adt
2025-07-14 01:26:55 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:26:55 [clientInboundChannel-183] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jqjm3adt
2025-07-14 01:26:55 [clientOutboundChannel-34] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=jqjm3adt}], simpSessionId=jqjm3adt}]
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433015219", parameters={masked}
2025-07-14 01:26:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433015219
2025-07-14 01:26:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/757/d0vz5mtk/websocket", parameters={}
2025-07-14 01:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/757/d0vz5mtk/websocket
2025-07-14 01:26:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d0vz5mtk]
2025-07-14 01:26:55 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:26:55 [clientInboundChannel-155] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=d0vz5mtk
2025-07-14 01:26:55 [clientInboundChannel-160] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=d0vz5mtk
2025-07-14 01:26:55 [clientInboundChannel-160] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=d0vz5mtk
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:55 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:26:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:57 [clientInboundChannel-166] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=d0vz5mtk
2025-07-14 01:26:57 [clientInboundChannel-167] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-3 session=d0vz5mtk
2025-07-14 01:26:57 [clientInboundChannel-171] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/42/messages id=sub-4 session=d0vz5mtk
2025-07-14 01:26:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:58 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/42?userId=1", parameters={masked}
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:26:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:02 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jqjm3adt]
2025-07-14 01:27:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d0vz5mtk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:27:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d0vz5mtk
2025-07-14 01:27:09 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:27:09 [clientInboundChannel-174] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d0vz5mtk
2025-07-14 01:27:09 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=d0vz5mtk}], simpSessionId=d0vz5mtk}]
2025-07-14 01:27:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433029092", parameters={masked}
2025-07-14 01:27:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433029092
2025-07-14 01:27:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/667/nhn0xdxg/websocket", parameters={}
2025-07-14 01:27:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/667/nhn0xdxg/websocket
2025-07-14 01:27:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:27:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nhn0xdxg]
2025-07-14 01:27:09 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:27:09 [clientInboundChannel-177] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nhn0xdxg
2025-07-14 01:27:09 [clientInboundChannel-178] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=nhn0xdxg
2025-07-14 01:27:09 [clientInboundChannel-181] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=nhn0xdxg
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:27:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:27:10 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:17 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [d0vz5mtk]
2025-07-14 01:27:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nhn0xdxg] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:27:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nhn0xdxg
2025-07-14 01:27:28 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:27:28 [clientInboundChannel-186] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nhn0xdxg
2025-07-14 01:27:28 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nhn0xdxg}], simpSessionId=nhn0xdxg}]
2025-07-14 01:27:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433048679", parameters={masked}
2025-07-14 01:27:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433048679
2025-07-14 01:27:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/524/4hwykiwp/websocket", parameters={}
2025-07-14 01:27:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/524/4hwykiwp/websocket
2025-07-14 01:27:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:27:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4hwykiwp]
2025-07-14 01:27:28 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:27:28 [clientInboundChannel-189] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=4hwykiwp
2025-07-14 01:27:28 [clientInboundChannel-192] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=4hwykiwp
2025-07-14 01:27:28 [clientInboundChannel-183] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=4hwykiwp
2025-07-14 01:27:28 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433056935", parameters={masked}
2025-07-14 01:27:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433056935
2025-07-14 01:27:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/464/moburj5e/websocket", parameters={}
2025-07-14 01:27:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/464/moburj5e/websocket
2025-07-14 01:27:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:27:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=moburj5e]
2025-07-14 01:27:37 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:27:37 [clientInboundChannel-163] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=moburj5e
2025-07-14 01:27:37 [clientInboundChannel-166] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=moburj5e
2025-07-14 01:27:37 [clientInboundChannel-171] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=moburj5e
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:37 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nhn0xdxg]
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:27:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:27:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:27:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:27:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:27:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=moburj5e] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:27:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session moburj5e
2025-07-14 01:27:50 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:27:50 [clientInboundChannel-195] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=moburj5e
2025-07-14 01:27:50 [clientOutboundChannel-41] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=moburj5e}], simpSessionId=moburj5e}]
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 01:27:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433076964", parameters={masked}
2025-07-14 01:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433076964
2025-07-14 01:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/074/ml1zfoep/websocket", parameters={}
2025-07-14 01:27:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:27:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/074/ml1zfoep/websocket
2025-07-14 01:27:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:27:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ml1zfoep]
2025-07-14 01:27:56 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:27:56 [clientInboundChannel-198] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ml1zfoep
2025-07-14 01:27:56 [clientInboundChannel-172] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ml1zfoep
2025-07-14 01:27:56 [clientInboundChannel-177] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ml1zfoep
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:57 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [moburj5e]
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:27:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4hwykiwp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:28:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4hwykiwp
2025-07-14 01:28:21 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:28:21 [clientInboundChannel-201] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4hwykiwp
2025-07-14 01:28:21 [clientOutboundChannel-43] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=4hwykiwp}], simpSessionId=4hwykiwp}]
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433101422", parameters={masked}
2025-07-14 01:28:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433101422
2025-07-14 01:28:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/970/huodp0ti/websocket", parameters={}
2025-07-14 01:28:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/970/huodp0ti/websocket
2025-07-14 01:28:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:28:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=huodp0ti]
2025-07-14 01:28:21 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:28:21 [clientInboundChannel-204] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=huodp0ti
2025-07-14 01:28:21 [clientInboundChannel-185] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=huodp0ti
2025-07-14 01:28:21 [clientInboundChannel-188] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=huodp0ti
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:28:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:28:22 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:27 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4hwykiwp]
2025-07-14 01:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:28:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:28:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:28:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:30 [clientInboundChannel-207] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=huodp0ti
2025-07-14 01:28:30 [clientInboundChannel-210] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-3 session=huodp0ti
2025-07-14 01:28:30 [clientInboundChannel-162] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-4 session=huodp0ti
2025-07-14 01:28:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:28:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:28:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:28:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:28:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:28:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:28:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ml1zfoep] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ml1zfoep
2025-07-14 01:28:49 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:28:49 [clientInboundChannel-214] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ml1zfoep
2025-07-14 01:28:49 [clientOutboundChannel-45] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ml1zfoep}], simpSessionId=ml1zfoep}]
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=huodp0ti] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session huodp0ti
2025-07-14 01:28:49 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:28:49 [clientInboundChannel-194] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=huodp0ti
2025-07-14 01:28:49 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=huodp0ti}], simpSessionId=huodp0ti}]
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433129504", parameters={masked}
2025-07-14 01:28:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433129504
2025-07-14 01:28:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/747/wyubqtqx/websocket", parameters={}
2025-07-14 01:28:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/747/wyubqtqx/websocket
2025-07-14 01:28:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:28:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wyubqtqx]
2025-07-14 01:28:49 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:28:49 [clientInboundChannel-195] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wyubqtqx
2025-07-14 01:28:49 [clientInboundChannel-198] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wyubqtqx
2025-07-14 01:28:49 [clientInboundChannel-177] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wyubqtqx
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433129702", parameters={masked}
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433129702
2025-07-14 01:28:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/838/m1ebjlsm/websocket", parameters={}
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/838/m1ebjlsm/websocket
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:28:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m1ebjlsm]
2025-07-14 01:28:49 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:28:49 [clientInboundChannel-201] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=m1ebjlsm
2025-07-14 01:28:49 [clientInboundChannel-187] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=m1ebjlsm
2025-07-14 01:28:49 [clientInboundChannel-190] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=m1ebjlsm
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:28:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:28:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:28:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:28:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:28:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:28:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:28:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:28:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:28:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:28:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:28:57 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [huodp0ti, ml1zfoep]
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m1ebjlsm] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m1ebjlsm
2025-07-14 01:29:15 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:29:15 [clientInboundChannel-218] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=m1ebjlsm
2025-07-14 01:29:15 [clientOutboundChannel-49] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=m1ebjlsm}], simpSessionId=m1ebjlsm}]
2025-07-14 01:29:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wyubqtqx] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:29:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wyubqtqx
2025-07-14 01:29:15 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:29:15 [clientInboundChannel-207] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wyubqtqx
2025-07-14 01:29:15 [clientOutboundChannel-50] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wyubqtqx}], simpSessionId=wyubqtqx}]
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433155524", parameters={masked}
2025-07-14 01:29:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433155524
2025-07-14 01:29:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/665/olbzadju/websocket", parameters={}
2025-07-14 01:29:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/665/olbzadju/websocket
2025-07-14 01:29:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:29:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=olbzadju]
2025-07-14 01:29:15 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:29:15 [clientInboundChannel-211] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=olbzadju
2025-07-14 01:29:15 [clientInboundChannel-213] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=olbzadju
2025-07-14 01:29:15 [clientInboundChannel-214] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=olbzadju
2025-07-14 01:29:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433155590", parameters={masked}
2025-07-14 01:29:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433155590
2025-07-14 01:29:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/347/4vyc40o3/websocket", parameters={}
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/347/4vyc40o3/websocket
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:29:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4vyc40o3]
2025-07-14 01:29:15 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:29:15 [clientInboundChannel-194] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=4vyc40o3
2025-07-14 01:29:15 [clientInboundChannel-198] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=4vyc40o3
2025-07-14 01:29:15 [clientInboundChannel-202] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=4vyc40o3
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:29:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:29:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:29:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:29:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:29:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:29:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:29:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:29:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:22 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [wyubqtqx, m1ebjlsm]
2025-07-14 01:29:31 [clientInboundChannel-221] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-3 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-220] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-185] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-4 session=olbzadju
2025-07-14 01:29:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:29:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:31 [clientInboundChannel-190] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-218] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-209] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-207] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-6 session=olbzadju
2025-07-14 01:29:31 [clientInboundChannel-209] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/43/messages id=sub-7 session=olbzadju
2025-07-14 01:29:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:29:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/43?userId=2", parameters={masked}
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=olbzadju] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:29:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session olbzadju
2025-07-14 01:29:49 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:29:49 [clientInboundChannel-224] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=olbzadju
2025-07-14 01:29:49 [clientOutboundChannel-53] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=olbzadju}], simpSessionId=olbzadju}]
2025-07-14 01:29:49 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433189982", parameters={masked}
2025-07-14 01:29:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433189982
2025-07-14 01:29:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/626/hqsvlwfx/websocket", parameters={}
2025-07-14 01:29:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/626/hqsvlwfx/websocket
2025-07-14 01:29:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:29:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hqsvlwfx]
2025-07-14 01:29:50 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:29:50 [clientInboundChannel-227] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=hqsvlwfx
2025-07-14 01:29:50 [clientInboundChannel-199] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=hqsvlwfx
2025-07-14 01:29:50 [clientInboundChannel-177] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=hqsvlwfx
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:29:50 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:29:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4vyc40o3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:29:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4vyc40o3
2025-07-14 01:29:50 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:29:50 [clientInboundChannel-202] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4vyc40o3
2025-07-14 01:29:50 [clientOutboundChannel-55] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=4vyc40o3}], simpSessionId=4vyc40o3}]
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433191054", parameters={masked}
2025-07-14 01:29:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433191054
2025-07-14 01:29:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/966/tvac4xm2/websocket", parameters={}
2025-07-14 01:29:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:29:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/966/tvac4xm2/websocket
2025-07-14 01:29:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:29:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tvac4xm2]
2025-07-14 01:29:51 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:29:51 [clientInboundChannel-222] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=tvac4xm2
2025-07-14 01:29:51 [clientInboundChannel-187] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=tvac4xm2
2025-07-14 01:29:51 [clientInboundChannel-217] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=tvac4xm2
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:29:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:29:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:29:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:57 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [olbzadju, 4vyc40o3]
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:29:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:29:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:29:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:58 [clientInboundChannel-207] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=hqsvlwfx
2025-07-14 01:29:58 [clientInboundChannel-218] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/44/messages id=sub-3 session=hqsvlwfx
2025-07-14 01:29:58 [clientInboundChannel-196] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/44/messages id=sub-4 session=hqsvlwfx
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/44?userId=2", parameters={masked}
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:29:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:29:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/44?userId=2", parameters={masked}
2025-07-14 01:29:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:29:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:29:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:29:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:29:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:29:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hqsvlwfx] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hqsvlwfx
2025-07-14 01:31:43 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:31:43 [clientInboundChannel-231] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hqsvlwfx
2025-07-14 01:31:43 [clientOutboundChannel-57] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=hqsvlwfx}], simpSessionId=hqsvlwfx}]
2025-07-14 01:31:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tvac4xm2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:31:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tvac4xm2
2025-07-14 01:31:43 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:31:43 [clientInboundChannel-234] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tvac4xm2
2025-07-14 01:31:43 [clientOutboundChannel-58] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=tvac4xm2}], simpSessionId=tvac4xm2}]
2025-07-14 01:31:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433303631", parameters={masked}
2025-07-14 01:31:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433303631
2025-07-14 01:31:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/751/4n4ggk5s/websocket", parameters={}
2025-07-14 01:31:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/751/4n4ggk5s/websocket
2025-07-14 01:31:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:31:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4n4ggk5s]
2025-07-14 01:31:43 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:31:43 [clientInboundChannel-237] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=4n4ggk5s
2025-07-14 01:31:43 [clientInboundChannel-240] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=4n4ggk5s
2025-07-14 01:31:43 [clientInboundChannel-243] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=4n4ggk5s
2025-07-14 01:31:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433303679", parameters={masked}
2025-07-14 01:31:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433303679
2025-07-14 01:31:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/291/olsnxccg/websocket", parameters={}
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/291/olsnxccg/websocket
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=olsnxccg]
2025-07-14 01:31:43 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:31:43 [clientInboundChannel-246] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=olsnxccg
2025-07-14 01:31:43 [clientInboundChannel-249] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=olsnxccg
2025-07-14 01:31:43 [clientInboundChannel-252] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=olsnxccg
2025-07-14 01:31:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=olsnxccg] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:31:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session olsnxccg
2025-07-14 01:31:47 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:31:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4n4ggk5s] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:31:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4n4ggk5s
2025-07-14 01:31:47 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:31:47 [clientInboundChannel-255] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=olsnxccg
2025-07-14 01:31:47 [clientInboundChannel-258] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4n4ggk5s
2025-07-14 01:31:47 [clientOutboundChannel-61] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=4n4ggk5s}], simpSessionId=4n4ggk5s}]
2025-07-14 01:31:47 [clientOutboundChannel-62] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=olsnxccg}], simpSessionId=olsnxccg}]
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:47 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433307512", parameters={masked}
2025-07-14 01:31:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433307512
2025-07-14 01:31:47 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/149/a5linvot/websocket", parameters={}
2025-07-14 01:31:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/149/a5linvot/websocket
2025-07-14 01:31:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:31:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=a5linvot]
2025-07-14 01:31:47 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:31:47 [clientInboundChannel-261] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=a5linvot
2025-07-14 01:31:47 [clientInboundChannel-232] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=a5linvot
2025-07-14 01:31:47 [clientInboundChannel-235] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=a5linvot
2025-07-14 01:31:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433307505", parameters={masked}
2025-07-14 01:31:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433307505
2025-07-14 01:31:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/183/txgqkurp/websocket", parameters={}
2025-07-14 01:31:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:31:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/183/txgqkurp/websocket
2025-07-14 01:31:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:31:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=txgqkurp]
2025-07-14 01:31:47 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:31:47 [clientInboundChannel-238] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=txgqkurp
2025-07-14 01:31:47 [clientInboundChannel-240] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=txgqkurp
2025-07-14 01:31:47 [clientInboundChannel-241] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=txgqkurp
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:31:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:31:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:31:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:31:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:31:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:31:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:31:52 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 4 sessions: [hqsvlwfx, olsnxccg, tvac4xm2, 4n4ggk5s]
2025-07-14 01:32:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=txgqkurp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:32:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session txgqkurp
2025-07-14 01:32:00 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:32:00 [clientInboundChannel-247] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=txgqkurp
2025-07-14 01:32:00 [clientOutboundChannel-65] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=txgqkurp}], simpSessionId=txgqkurp}]
2025-07-14 01:32:00 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433320796", parameters={masked}
2025-07-14 01:32:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433320796
2025-07-14 01:32:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/460/qmozk3f2/websocket", parameters={}
2025-07-14 01:32:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/460/qmozk3f2/websocket
2025-07-14 01:32:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:32:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qmozk3f2]
2025-07-14 01:32:00 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:32:00 [clientInboundChannel-250] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qmozk3f2
2025-07-14 01:32:00 [clientInboundChannel-253] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qmozk3f2
2025-07-14 01:32:00 [clientInboundChannel-256] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qmozk3f2
2025-07-14 01:32:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=a5linvot] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:32:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a5linvot
2025-07-14 01:32:03 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:32:03 [clientInboundChannel-257] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a5linvot
2025-07-14 01:32:03 [clientOutboundChannel-67] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=a5linvot}], simpSessionId=a5linvot}]
2025-07-14 01:32:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433323609", parameters={masked}
2025-07-14 01:32:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433323609
2025-07-14 01:32:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/335/wkio1idg/websocket", parameters={}
2025-07-14 01:32:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/335/wkio1idg/websocket
2025-07-14 01:32:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:32:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wkio1idg]
2025-07-14 01:32:03 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:32:03 [clientInboundChannel-260] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wkio1idg
2025-07-14 01:32:03 [clientInboundChannel-233] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wkio1idg
2025-07-14 01:32:03 [clientInboundChannel-236] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wkio1idg
2025-07-14 01:32:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:07 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [txgqkurp]
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:32:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:12 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [a5linvot]
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:32:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wkio1idg] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:32:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wkio1idg
2025-07-14 01:32:22 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:32:22 [clientInboundChannel-239] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wkio1idg
2025-07-14 01:32:22 [clientOutboundChannel-69] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wkio1idg}], simpSessionId=wkio1idg}]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671)]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:27 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wkio1idg]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 01:32:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 01:32:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433352807", parameters={masked}
2025-07-14 01:32:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433352807
2025-07-14 01:32:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/790/q0reovgp/websocket", parameters={}
2025-07-14 01:32:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/790/q0reovgp/websocket
2025-07-14 01:32:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:32:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=q0reovgp]
2025-07-14 01:32:32 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:32:32 [clientInboundChannel-242] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=q0reovgp
2025-07-14 01:32:32 [clientInboundChannel-241] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=q0reovgp
2025-07-14 01:32:32 [clientInboundChannel-241] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=q0reovgp
2025-07-14 01:32:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:32:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=q0reovgp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:32:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session q0reovgp
2025-07-14 01:32:40 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:32:40 [clientInboundChannel-251] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=q0reovgp
2025-07-14 01:32:40 [clientOutboundChannel-71] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=q0reovgp}], simpSessionId=q0reovgp}]
2025-07-14 01:32:47 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [q0reovgp]
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 01:32:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433370638", parameters={masked}
2025-07-14 01:32:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433370638
2025-07-14 01:32:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/489/3s3ydius/websocket", parameters={}
2025-07-14 01:32:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/489/3s3ydius/websocket
2025-07-14 01:32:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:32:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3s3ydius]
2025-07-14 01:32:50 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:32:50 [clientInboundChannel-263] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3s3ydius
2025-07-14 01:32:50 [clientInboundChannel-266] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3s3ydius
2025-07-14 01:32:50 [clientInboundChannel-269] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3s3ydius
2025-07-14 01:32:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:32:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:50 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:32:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qmozk3f2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:32:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qmozk3f2
2025-07-14 01:32:57 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:32:57 [clientInboundChannel-272] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qmozk3f2
2025-07-14 01:32:57 [clientOutboundChannel-73] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qmozk3f2}], simpSessionId=qmozk3f2}]
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433377254", parameters={masked}
2025-07-14 01:32:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433377254
2025-07-14 01:32:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/008/fzqgyvyn/websocket", parameters={}
2025-07-14 01:32:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:32:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/008/fzqgyvyn/websocket
2025-07-14 01:32:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:32:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fzqgyvyn]
2025-07-14 01:32:57 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:32:57 [clientInboundChannel-256] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fzqgyvyn
2025-07-14 01:32:57 [clientInboundChannel-261] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fzqgyvyn
2025-07-14 01:32:57 [clientInboundChannel-260] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fzqgyvyn
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:32:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:32:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:32:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:32:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:32:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:32:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:32:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:02 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qmozk3f2]
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=htin", parameters={masked}
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3s3ydius] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:33:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3s3ydius
2025-07-14 01:33:13 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:33:13 [clientInboundChannel-274] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3s3ydius
2025-07-14 01:33:13 [clientOutboundChannel-75] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3s3ydius}], simpSessionId=3s3ydius}]
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433394046", parameters={masked}
2025-07-14 01:33:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433394046
2025-07-14 01:33:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/152/3qbdqb1c/websocket", parameters={}
2025-07-14 01:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/152/3qbdqb1c/websocket
2025-07-14 01:33:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:33:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3qbdqb1c]
2025-07-14 01:33:14 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:33:14 [clientInboundChannel-277] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3qbdqb1c
2025-07-14 01:33:14 [clientInboundChannel-280] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3qbdqb1c
2025-07-14 01:33:14 [clientInboundChannel-244] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3qbdqb1c
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:22 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [3s3ydius]
2025-07-14 01:33:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fzqgyvyn] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:33:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fzqgyvyn
2025-07-14 01:33:24 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:33:24 [clientInboundChannel-241] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fzqgyvyn
2025-07-14 01:33:24 [clientOutboundChannel-77] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=fzqgyvyn}], simpSessionId=fzqgyvyn}]
2025-07-14 01:33:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433404587", parameters={masked}
2025-07-14 01:33:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433404587
2025-07-14 01:33:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/002/m5qvbb4a/websocket", parameters={}
2025-07-14 01:33:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/002/m5qvbb4a/websocket
2025-07-14 01:33:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:33:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m5qvbb4a]
2025-07-14 01:33:24 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:33:24 [clientInboundChannel-251] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=m5qvbb4a
2025-07-14 01:33:24 [clientInboundChannel-265] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=m5qvbb4a
2025-07-14 01:33:24 [clientInboundChannel-266] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=m5qvbb4a
2025-07-14 01:33:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:33:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:32 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [fzqgyvyn]
2025-07-14 01:33:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3qbdqb1c] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:33:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3qbdqb1c
2025-07-14 01:33:36 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:33:36 [clientInboundChannel-270] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3qbdqb1c
2025-07-14 01:33:36 [clientOutboundChannel-79] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3qbdqb1c}], simpSessionId=3qbdqb1c}]
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 01:33:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433421639", parameters={masked}
2025-07-14 01:33:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433421639
2025-07-14 01:33:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/927/q0clvmux/websocket", parameters={}
2025-07-14 01:33:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:33:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/927/q0clvmux/websocket
2025-07-14 01:33:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:33:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=q0clvmux]
2025-07-14 01:33:41 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:33:41 [clientInboundChannel-271] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=q0clvmux
2025-07-14 01:33:41 [clientInboundChannel-256] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=q0clvmux
2025-07-14 01:33:41 [clientInboundChannel-261] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=q0clvmux
2025-07-14 01:33:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:33:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:33:42 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [3qbdqb1c]
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:33:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:33:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:33:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:33:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:33:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:33:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:33:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:58 [clientInboundChannel-284] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=q0clvmux
2025-07-14 01:33:58 [clientInboundChannel-276] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/45/messages id=sub-4 session=q0clvmux
2025-07-14 01:33:58 [clientInboundChannel-287] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/45/messages id=sub-3 session=q0clvmux
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/45?userId=2", parameters={masked}
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:33:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:33:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:33:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/45?userId=2", parameters={masked}
2025-07-14 01:33:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:33:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:33:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:33:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:33:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:33:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:34:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=q0clvmux] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:34:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session q0clvmux
2025-07-14 01:34:08 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:34:08 [clientInboundChannel-239] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=q0clvmux
2025-07-14 01:34:08 [clientOutboundChannel-81] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=q0clvmux}], simpSessionId=q0clvmux}]
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:34:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433448405", parameters={masked}
2025-07-14 01:34:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:34:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433448405
2025-07-14 01:34:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:34:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/062/oqie2whr/websocket", parameters={}
2025-07-14 01:34:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:34:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/062/oqie2whr/websocket
2025-07-14 01:34:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:34:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oqie2whr]
2025-07-14 01:34:08 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:34:08 [clientInboundChannel-244] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=oqie2whr
2025-07-14 01:34:08 [clientInboundChannel-281] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=oqie2whr
2025-07-14 01:34:08 [clientInboundChannel-264] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=oqie2whr
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:34:08 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:34:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:34:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:34:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:34:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:34:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:34:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:34:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:34:17 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [q0clvmux]
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oqie2whr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oqie2whr
2025-07-14 01:35:57 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:35:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m5qvbb4a] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:35:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m5qvbb4a
2025-07-14 01:35:57 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:35:57 [clientInboundChannel-290] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oqie2whr
2025-07-14 01:35:57 [clientInboundChannel-293] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=m5qvbb4a
2025-07-14 01:35:57 [clientOutboundChannel-83] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=oqie2whr}], simpSessionId=oqie2whr}]
2025-07-14 01:35:57 [clientOutboundChannel-84] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=m5qvbb4a}], simpSessionId=m5qvbb4a}]
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:35:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433557418", parameters={masked}
2025-07-14 01:35:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:35:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433557418
2025-07-14 01:35:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:35:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/359/zcgg0oy5/websocket", parameters={}
2025-07-14 01:35:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:35:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/359/zcgg0oy5/websocket
2025-07-14 01:35:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:35:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zcgg0oy5]
2025-07-14 01:35:57 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:35:57 [clientInboundChannel-296] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zcgg0oy5
2025-07-14 01:35:57 [clientInboundChannel-302] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zcgg0oy5
2025-07-14 01:35:57 [clientInboundChannel-299] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zcgg0oy5
2025-07-14 01:35:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433557515", parameters={masked}
2025-07-14 01:35:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:35:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433557515
2025-07-14 01:35:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/145/gpfl1vui/websocket", parameters={}
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/145/gpfl1vui/websocket
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:35:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gpfl1vui]
2025-07-14 01:35:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:35:57 [clientInboundChannel-305] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=gpfl1vui
2025-07-14 01:35:57 [clientInboundChannel-308] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=gpfl1vui
2025-07-14 01:35:57 [clientInboundChannel-311] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=gpfl1vui
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:35:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:35:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:35:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:35:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:35:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:35:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:35:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:35:58 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:35:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:35:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:02 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [m5qvbb4a, oqie2whr]
2025-07-14 01:36:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:36:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:36:03 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:06 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=THaw", parameters={masked}
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:36:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=THaw==", parameters={masked}
2025-07-14 01:36:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-14 01:36:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zcgg0oy5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:36:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zcgg0oy5
2025-07-14 01:36:12 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:36:12 [clientInboundChannel-314] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zcgg0oy5
2025-07-14 01:36:12 [clientOutboundChannel-87] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zcgg0oy5}], simpSessionId=zcgg0oy5}]
2025-07-14 01:36:22 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zcgg0oy5]
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 01:36:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433584709", parameters={masked}
2025-07-14 01:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433584709
2025-07-14 01:36:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/621/kuwadhf5/websocket", parameters={}
2025-07-14 01:36:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/621/kuwadhf5/websocket
2025-07-14 01:36:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:36:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kuwadhf5]
2025-07-14 01:36:24 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:36:24 [clientInboundChannel-317] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=kuwadhf5
2025-07-14 01:36:24 [clientInboundChannel-292] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=kuwadhf5
2025-07-14 01:36:24 [clientInboundChannel-320] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=kuwadhf5
2025-07-14 01:36:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:36:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:36:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:36:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kuwadhf5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:36:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kuwadhf5
2025-07-14 01:36:41 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:36:41 [clientInboundChannel-290] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kuwadhf5
2025-07-14 01:36:41 [clientOutboundChannel-89] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=kuwadhf5}], simpSessionId=kuwadhf5}]
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433602071", parameters={masked}
2025-07-14 01:36:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433602071
2025-07-14 01:36:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/290/z4zf5enj/websocket", parameters={}
2025-07-14 01:36:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/290/z4zf5enj/websocket
2025-07-14 01:36:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:36:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z4zf5enj]
2025-07-14 01:36:42 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:36:42 [clientInboundChannel-297] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=z4zf5enj
2025-07-14 01:36:42 [clientInboundChannel-300] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=z4zf5enj
2025-07-14 01:36:42 [clientInboundChannel-300] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=z4zf5enj
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gpfl1vui] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:36:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gpfl1vui
2025-07-14 01:36:43 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:36:43 [clientInboundChannel-306] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gpfl1vui
2025-07-14 01:36:43 [clientOutboundChannel-91] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gpfl1vui}], simpSessionId=gpfl1vui}]
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433604008", parameters={masked}
2025-07-14 01:36:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433604008
2025-07-14 01:36:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/698/szmphbqs/websocket", parameters={}
2025-07-14 01:36:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:36:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/698/szmphbqs/websocket
2025-07-14 01:36:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:36:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=szmphbqs]
2025-07-14 01:36:44 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:36:44 [clientInboundChannel-309] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=szmphbqs
2025-07-14 01:36:44 [clientInboundChannel-312] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=szmphbqs
2025-07-14 01:36:44 [clientInboundChannel-315] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=szmphbqs
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:36:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:47 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kuwadhf5]
2025-07-14 01:36:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:36:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:52 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [gpfl1vui]
2025-07-14 01:36:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:36:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:36:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:55 [clientInboundChannel-318] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=szmphbqs
2025-07-14 01:36:55 [clientInboundChannel-294] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/46/messages id=sub-3 session=szmphbqs
2025-07-14 01:36:55 [clientInboundChannel-291] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/46/messages id=sub-4 session=szmphbqs
2025-07-14 01:36:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/46?userId=2", parameters={masked}
2025-07-14 01:36:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:36:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:36:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:36:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:36:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/46?userId=2", parameters={masked}
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:36:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:39:19 [MessageBroker-16] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 47 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(47)-CONNECTED(47)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 666], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 92], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 449]
2025-07-14 01:40:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=szmphbqs] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:40:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session szmphbqs
2025-07-14 01:40:59 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:40:59 [clientInboundChannel-322] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=szmphbqs
2025-07-14 01:40:59 [clientOutboundChannel-93] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=szmphbqs}], simpSessionId=szmphbqs}]
2025-07-14 01:40:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z4zf5enj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:40:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z4zf5enj
2025-07-14 01:40:59 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:40:59 [clientInboundChannel-325] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z4zf5enj
2025-07-14 01:40:59 [clientOutboundChannel-94] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=z4zf5enj}], simpSessionId=z4zf5enj}]
2025-07-14 01:40:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:40:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433859743", parameters={masked}
2025-07-14 01:40:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:40:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433859743
2025-07-14 01:40:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:40:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/721/mdz2xjcu/websocket", parameters={}
2025-07-14 01:40:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:40:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/721/mdz2xjcu/websocket
2025-07-14 01:40:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:40:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mdz2xjcu]
2025-07-14 01:40:59 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:40:59 [clientInboundChannel-328] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=mdz2xjcu
2025-07-14 01:40:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:40:59 [clientInboundChannel-331] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=mdz2xjcu
2025-07-14 01:40:59 [clientInboundChannel-334] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=mdz2xjcu
2025-07-14 01:40:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433859817", parameters={masked}
2025-07-14 01:40:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:40:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433859817
2025-07-14 01:40:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:40:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/442/jdaecunb/websocket", parameters={}
2025-07-14 01:40:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:40:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/442/jdaecunb/websocket
2025-07-14 01:40:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:40:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jdaecunb]
2025-07-14 01:40:59 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:40:59 [clientInboundChannel-337] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=jdaecunb
2025-07-14 01:40:59 [clientInboundChannel-340] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jdaecunb
2025-07-14 01:40:59 [clientInboundChannel-343] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jdaecunb
2025-07-14 01:40:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:40:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:40:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:40:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:40:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:07 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [z4zf5enj, szmphbqs]
2025-07-14 01:41:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mdz2xjcu] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:41:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mdz2xjcu
2025-07-14 01:41:25 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:41:25 [clientInboundChannel-346] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mdz2xjcu
2025-07-14 01:41:25 [clientOutboundChannel-97] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=mdz2xjcu}], simpSessionId=mdz2xjcu}]
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433885381", parameters={masked}
2025-07-14 01:41:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:41:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433885381
2025-07-14 01:41:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/031/xncun1i2/websocket", parameters={}
2025-07-14 01:41:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:41:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/031/xncun1i2/websocket
2025-07-14 01:41:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:41:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xncun1i2]
2025-07-14 01:41:25 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:41:25 [clientInboundChannel-349] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xncun1i2
2025-07-14 01:41:25 [clientInboundChannel-352] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xncun1i2
2025-07-14 01:41:25 [clientInboundChannel-323] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xncun1i2
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:41:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xncun1i2] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:41:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xncun1i2
2025-07-14 01:41:28 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:41:28 [clientInboundChannel-326] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xncun1i2
2025-07-14 01:41:28 [clientOutboundChannel-99] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xncun1i2}], simpSessionId=xncun1i2}]
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752433888497", parameters={masked}
2025-07-14 01:41:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:41:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752433888497
2025-07-14 01:41:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/966/uc4prufq/websocket", parameters={}
2025-07-14 01:41:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:41:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/966/uc4prufq/websocket
2025-07-14 01:41:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:41:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uc4prufq]
2025-07-14 01:41:28 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:41:28 [clientInboundChannel-329] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uc4prufq
2025-07-14 01:41:28 [clientInboundChannel-332] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uc4prufq
2025-07-14 01:41:28 [clientInboundChannel-335] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uc4prufq
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:28 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:41:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:32 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [mdz2xjcu]
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:41:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:37 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xncun1i2]
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:41:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=1", parameters={masked}
2025-07-14 01:41:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:41:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:41:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:45 [clientInboundChannel-338] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=jdaecunb
2025-07-14 01:41:45 [clientInboundChannel-339] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/47/messages id=sub-4 session=jdaecunb
2025-07-14 01:41:45 [clientInboundChannel-338] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/47/messages id=sub-3 session=jdaecunb
2025-07-14 01:41:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:41:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/47?userId=2", parameters={masked}
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:41:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/47?userId=2", parameters={masked}
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:41:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:41:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uc4prufq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:44:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uc4prufq
2025-07-14 01:44:20 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:44:20 [clientInboundChannel-354] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uc4prufq
2025-07-14 01:44:20 [clientOutboundChannel-101] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=uc4prufq}], simpSessionId=uc4prufq}]
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jdaecunb] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jdaecunb
2025-07-14 01:44:20 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:44:20 [clientInboundChannel-357] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jdaecunb
2025-07-14 01:44:20 [clientOutboundChannel-102] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=jdaecunb}], simpSessionId=jdaecunb}]
2025-07-14 01:44:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:44:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434060677", parameters={masked}
2025-07-14 01:44:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:44:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434060677
2025-07-14 01:44:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/743/0fcqq100/websocket", parameters={}
2025-07-14 01:44:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:44:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/743/0fcqq100/websocket
2025-07-14 01:44:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:44:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0fcqq100]
2025-07-14 01:44:20 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:44:20 [clientInboundChannel-360] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0fcqq100
2025-07-14 01:44:20 [clientInboundChannel-363] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0fcqq100
2025-07-14 01:44:20 [clientInboundChannel-366] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0fcqq100
2025-07-14 01:44:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434060772", parameters={masked}
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434060772
2025-07-14 01:44:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/390/xhtjrtng/websocket", parameters={}
2025-07-14 01:44:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:44:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/390/xhtjrtng/websocket
2025-07-14 01:44:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:44:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xhtjrtng]
2025-07-14 01:44:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:44:20 [clientInboundChannel-369] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xhtjrtng
2025-07-14 01:44:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:44:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:44:20 [clientInboundChannel-372] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xhtjrtng
2025-07-14 01:44:20 [clientInboundChannel-375] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xhtjrtng
2025-07-14 01:44:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:44:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:44:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:44:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:44:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:44:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:44:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:44:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:44:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:44:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:44:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:44:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:44:27 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [uc4prufq, jdaecunb]
2025-07-14 01:45:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0fcqq100] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:45:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0fcqq100
2025-07-14 01:45:23 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:45:23 [clientInboundChannel-378] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0fcqq100
2025-07-14 01:45:23 [clientOutboundChannel-105] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0fcqq100}], simpSessionId=0fcqq100}]
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xhtjrtng] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xhtjrtng
2025-07-14 01:45:23 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:45:23 [clientInboundChannel-381] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xhtjrtng
2025-07-14 01:45:23 [clientOutboundChannel-106] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xhtjrtng}], simpSessionId=xhtjrtng}]
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434123483", parameters={masked}
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434123483
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/276/ulyq5mi3/websocket", parameters={}
2025-07-14 01:45:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:45:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/276/ulyq5mi3/websocket
2025-07-14 01:45:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:45:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ulyq5mi3]
2025-07-14 01:45:23 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:45:23 [clientInboundChannel-384] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ulyq5mi3
2025-07-14 01:45:23 [clientInboundChannel-387] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ulyq5mi3
2025-07-14 01:45:23 [clientInboundChannel-390] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ulyq5mi3
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:45:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434123655", parameters={masked}
2025-07-14 01:45:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:45:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434123655
2025-07-14 01:45:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/960/tzneobpc/websocket", parameters={}
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/960/tzneobpc/websocket
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:45:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tzneobpc]
2025-07-14 01:45:23 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:45:23 [clientInboundChannel-393] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=tzneobpc
2025-07-14 01:45:23 [clientInboundChannel-396] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=tzneobpc
2025-07-14 01:45:23 [clientInboundChannel-399] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=tzneobpc
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:45:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:45:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:45:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:45:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:45:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:45:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:45:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:45:32 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [xhtjrtng, 0fcqq100]
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ulyq5mi3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ulyq5mi3
2025-07-14 01:46:14 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tzneobpc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tzneobpc
2025-07-14 01:46:14 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:14 [clientInboundChannel-402] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ulyq5mi3
2025-07-14 01:46:14 [clientInboundChannel-405] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tzneobpc
2025-07-14 01:46:14 [clientOutboundChannel-109] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ulyq5mi3}], simpSessionId=ulyq5mi3}]
2025-07-14 01:46:14 [clientOutboundChannel-110] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=tzneobpc}], simpSessionId=tzneobpc}]
2025-07-14 01:46:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434174562", parameters={masked}
2025-07-14 01:46:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434174562
2025-07-14 01:46:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/979/ebayfwwt/websocket", parameters={}
2025-07-14 01:46:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/979/ebayfwwt/websocket
2025-07-14 01:46:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ebayfwwt]
2025-07-14 01:46:14 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:46:14 [clientInboundChannel-408] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ebayfwwt
2025-07-14 01:46:14 [clientInboundChannel-377] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ebayfwwt
2025-07-14 01:46:14 [clientInboundChannel-381] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ebayfwwt
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434174643", parameters={masked}
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434174643
2025-07-14 01:46:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/651/dfq3eba0/websocket", parameters={}
2025-07-14 01:46:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/651/dfq3eba0/websocket
2025-07-14 01:46:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dfq3eba0]
2025-07-14 01:46:14 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:46:14 [clientInboundChannel-383] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dfq3eba0
2025-07-14 01:46:14 [clientInboundChannel-387] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=dfq3eba0
2025-07-14 01:46:14 [clientInboundChannel-390] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dfq3eba0
2025-07-14 01:46:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:14 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:22 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ulyq5mi3, tzneobpc]
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dfq3eba0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dfq3eba0
2025-07-14 01:46:24 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ebayfwwt] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ebayfwwt
2025-07-14 01:46:24 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:24 [clientInboundChannel-410] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dfq3eba0
2025-07-14 01:46:24 [clientInboundChannel-413] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ebayfwwt
2025-07-14 01:46:24 [clientOutboundChannel-113] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dfq3eba0}], simpSessionId=dfq3eba0}]
2025-07-14 01:46:24 [clientOutboundChannel-114] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ebayfwwt}], simpSessionId=ebayfwwt}]
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434184503", parameters={masked}
2025-07-14 01:46:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434184503
2025-07-14 01:46:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/487/egwv4wmc/websocket", parameters={}
2025-07-14 01:46:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/487/egwv4wmc/websocket
2025-07-14 01:46:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=egwv4wmc]
2025-07-14 01:46:24 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:46:24 [clientInboundChannel-416] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=egwv4wmc
2025-07-14 01:46:24 [clientInboundChannel-419] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=egwv4wmc
2025-07-14 01:46:24 [clientInboundChannel-401] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=egwv4wmc
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434184705", parameters={masked}
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434184705
2025-07-14 01:46:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/461/fjan2ssa/websocket", parameters={}
2025-07-14 01:46:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/461/fjan2ssa/websocket
2025-07-14 01:46:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fjan2ssa]
2025-07-14 01:46:24 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:46:24 [clientInboundChannel-403] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fjan2ssa
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:24 [clientInboundChannel-406] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fjan2ssa
2025-07-14 01:46:24 [clientInboundChannel-408] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fjan2ssa
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=egwv4wmc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session egwv4wmc
2025-07-14 01:46:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fjan2ssa] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:46:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fjan2ssa
2025-07-14 01:46:32 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:32 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:46:32 [clientInboundChannel-382] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=egwv4wmc
2025-07-14 01:46:32 [clientInboundChannel-381] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fjan2ssa
2025-07-14 01:46:32 [clientOutboundChannel-117] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=egwv4wmc}], simpSessionId=egwv4wmc}]
2025-07-14 01:46:32 [clientOutboundChannel-118] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=fjan2ssa}], simpSessionId=fjan2ssa}]
2025-07-14 01:46:32 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [dfq3eba0, ebayfwwt]
2025-07-14 01:46:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434192590", parameters={masked}
2025-07-14 01:46:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434192590
2025-07-14 01:46:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434192596", parameters={masked}
2025-07-14 01:46:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434192596
2025-07-14 01:46:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/433/ldww0ycn/websocket", parameters={}
2025-07-14 01:46:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/433/ldww0ycn/websocket
2025-07-14 01:46:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ldww0ycn]
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/614/byee1rmz/websocket", parameters={}
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6400e810
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/614/byee1rmz/websocket
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:46:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=byee1rmz]
2025-07-14 01:46:32 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:46:32 [clientInboundChannel-391] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ldww0ycn
2025-07-14 01:46:32 [clientInboundChannel-410] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ldww0ycn
2025-07-14 01:46:32 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:46:32 [clientInboundChannel-414] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=byee1rmz
2025-07-14 01:46:32 [clientInboundChannel-415] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ldww0ycn
2025-07-14 01:46:32 [clientInboundChannel-420] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=byee1rmz
2025-07-14 01:46:32 [clientInboundChannel-401] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=byee1rmz
2025-07-14 01:46:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:46:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:46:37 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [fjan2ssa, egwv4wmc]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 01:47:29 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session byee1rmz with CloseStatus[code=1001, reason=null]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=byee1rmz]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=byee1rmz] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session byee1rmz
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ldww0ycn with CloseStatus[code=1001, reason=null]
2025-07-14 01:47:29 [clientInboundChannel-423] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=byee1rmz
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ldww0ycn]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ldww0ycn] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ldww0ycn
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:47:29 [clientInboundChannel-426] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ldww0ycn
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@44126e04]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 01:47:29 [RMI TCP Connection(41)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 01:47:31 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 46428 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 01:47:31 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 01:47:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 01:47:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 6 JPA repository interfaces.
2025-07-14 01:47:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 01:47:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 01:47:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 01:47:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 01:47:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 744 ms
2025-07-14 01:47:32 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 01:47:32 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 01:47:32 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 01:47:32 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 01:47:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 01:47:33 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ca278bc
2025-07-14 01:47:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 01:47:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 01:47:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 01:47:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 01:47:34 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 01:47:34 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:47:34 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 01:47:35 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 01:47:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 01:47:35 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:47:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 01:47:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 01:47:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:47:35 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:47:35 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 01:47:35 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.54 seconds (process running for 4.849)
2025-07-14 01:47:45 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 01:47:45 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1d0544b3
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@384edc3b
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 01:47:45 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434265688", parameters={masked}
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434265688
2025-07-14 01:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:47:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/793/mc23r5zf/websocket", parameters={}
2025-07-14 01:47:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 01:47:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/793/mc23r5zf/websocket
2025-07-14 01:47:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:47:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mc23r5zf]
2025-07-14 01:47:45 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:47:45 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=mc23r5zf
2025-07-14 01:47:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=mc23r5zf
2025-07-14 01:47:45 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=mc23r5zf
2025-07-14 01:47:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:47:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:47:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:47:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:47:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:48:08 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:48:09 [http-nio-8080-exec-7] INFO  c.b.c.ConversationController - USer id 1 is emiited
2025-07-14 01:48:09 [http-nio-8080-exec-7] INFO  c.b.c.ConversationController - USer id 2 is emiited
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:48:09 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:48:09 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=mc23r5zf
2025-07-14 01:48:09 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-3 session=mc23r5zf
2025-07-14 01:48:09 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-4 session=mc23r5zf
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:48:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:48:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:48:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:48:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:48:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:48:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:48:35 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 15, active threads = 1, queued tasks = 2, completed tasks = 11]
2025-07-14 01:50:21 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=mc23r5zf
2025-07-14 01:50:21 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=mc23r5zf
2025-07-14 01:50:21 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=mc23r5zf
2025-07-14 01:50:21 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-6 session=mc23r5zf
2025-07-14 01:50:21 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-7 session=mc23r5zf
2025-07-14 01:50:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:22 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:22 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-8 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-9 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-10 session=mc23r5zf
2025-07-14 01:50:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:22 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:50:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:22 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-11 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-9 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-12 session=mc23r5zf
2025-07-14 01:50:22 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-13 session=mc23r5zf
2025-07-14 01:50:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:50:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434426911", parameters={masked}
2025-07-14 01:50:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 01:50:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434426911
2025-07-14 01:50:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/797/stidfr0h/websocket", parameters={}
2025-07-14 01:50:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 01:50:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/797/stidfr0h/websocket
2025-07-14 01:50:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:50:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=stidfr0h]
2025-07-14 01:50:26 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:50:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=stidfr0h
2025-07-14 01:50:26 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=stidfr0h
2025-07-14 01:50:26 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=stidfr0h
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:50:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:50:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:50:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:50:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:29 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=stidfr0h
2025-07-14 01:50:29 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-3 session=stidfr0h
2025-07-14 01:50:29 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-4 session=stidfr0h
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=2", parameters={masked}
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=2", parameters={masked}
2025-07-14 01:50:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:50:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:50:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:50:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":48,"senderId":2,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/48/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 01:50:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:50:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=77, conversat (truncated)...]
2025-07-14 01:50:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 01:51:33 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session mc23r5zf with CloseStatus[code=1001, reason=null]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=mc23r5zf]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mc23r5zf] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mc23r5zf
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:51:33 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mc23r5zf
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session stidfr0h with CloseStatus[code=1001, reason=null]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=stidfr0h]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=stidfr0h] closed with CloseStatus[code=1001, reason=null]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session stidfr0h
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:51:33 [clientInboundChannel-55] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=stidfr0h
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 01:51:33 [RMI TCP Connection(7)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 01:51:35 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 38800 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 01:51:35 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 01:51:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 01:51:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 6 JPA repository interfaces.
2025-07-14 01:51:36 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 01:51:36 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 01:51:36 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 01:51:36 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 01:51:36 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 773 ms
2025-07-14 01:51:36 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 01:51:36 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 01:51:36 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 01:51:36 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 01:51:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 01:51:37 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45bf93bb
2025-07-14 01:51:37 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 01:51:37 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 01:51:37 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 01:51:37 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 01:51:38 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 01:51:38 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 01:51:38 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 01:51:38 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 01:51:39 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 01:51:39 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 01:51:39 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 01:51:39 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]]
2025-07-14 01:51:39 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:51:39 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 01:51:39 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 01:51:39 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.39 seconds (process running for 4.724)
2025-07-14 01:52:20 [http-nio-8080-exec-6] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 01:52:20 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5b54fe5b
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@21ffedc7
2025-07-14 01:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 01:52:20 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 01:52:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434540380", parameters={masked}
2025-07-14 01:52:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434540425", parameters={masked}
2025-07-14 01:52:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:52:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:52:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434540425
2025-07-14 01:52:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434540380
2025-07-14 01:52:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/767/pqdgxcyz/websocket", parameters={}
2025-07-14 01:52:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/127/rge4vvkq/websocket", parameters={}
2025-07-14 01:52:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:52:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/127/rge4vvkq/websocket
2025-07-14 01:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/767/pqdgxcyz/websocket
2025-07-14 01:52:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:52:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rge4vvkq]
2025-07-14 01:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pqdgxcyz]
2025-07-14 01:52:20 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:52:20 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:52:20 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pqdgxcyz
2025-07-14 01:52:20 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rge4vvkq
2025-07-14 01:52:20 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=pqdgxcyz
2025-07-14 01:52:20 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=rge4vvkq
2025-07-14 01:52:20 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=pqdgxcyz
2025-07-14 01:52:20 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rge4vvkq
2025-07-14 01:52:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:52:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:52:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:52:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:52:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:52:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:52:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:52:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:52:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:52:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:52:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:52:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:52:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:52:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:52:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:52:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:52:22 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:52:39 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 10, active threads = 1, queued tasks = 3, completed tasks = 4]
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pqdgxcyz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pqdgxcyz
2025-07-14 01:53:46 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:53:46 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pqdgxcyz
2025-07-14 01:53:46 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pqdgxcyz}], simpSessionId=pqdgxcyz}]
2025-07-14 01:53:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rge4vvkq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:53:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rge4vvkq
2025-07-14 01:53:46 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:53:46 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rge4vvkq
2025-07-14 01:53:46 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=rge4vvkq}], simpSessionId=rge4vvkq}]
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:53:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434626208", parameters={masked}
2025-07-14 01:53:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:53:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434626208
2025-07-14 01:53:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/863/iiofnk5b/websocket", parameters={}
2025-07-14 01:53:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:53:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/863/iiofnk5b/websocket
2025-07-14 01:53:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:53:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iiofnk5b]
2025-07-14 01:53:46 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:53:46 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=iiofnk5b
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434626217", parameters={masked}
2025-07-14 01:53:46 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=iiofnk5b
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:53:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=iiofnk5b
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434626217
2025-07-14 01:53:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/213/lwwsbkou/websocket", parameters={}
2025-07-14 01:53:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:53:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/213/lwwsbkou/websocket
2025-07-14 01:53:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:53:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lwwsbkou]
2025-07-14 01:53:46 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:53:46 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=lwwsbkou
2025-07-14 01:53:46 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=lwwsbkou
2025-07-14 01:53:46 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=lwwsbkou
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:53:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:53:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:53:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:53:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:53:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:53:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:53:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:53:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:53:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:53:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:53:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:53:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:53:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:53:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:53:55 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [pqdgxcyz, rge4vvkq]
2025-07-14 01:54:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lwwsbkou] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:54:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lwwsbkou
2025-07-14 01:54:25 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:54:25 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lwwsbkou
2025-07-14 01:54:25 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=lwwsbkou}], simpSessionId=lwwsbkou}]
2025-07-14 01:54:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iiofnk5b] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:54:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iiofnk5b
2025-07-14 01:54:25 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:54:25 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iiofnk5b
2025-07-14 01:54:25 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iiofnk5b}], simpSessionId=iiofnk5b}]
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434665240", parameters={masked}
2025-07-14 01:54:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434665240
2025-07-14 01:54:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/873/5aqu0ng5/websocket", parameters={}
2025-07-14 01:54:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/873/5aqu0ng5/websocket
2025-07-14 01:54:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:54:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5aqu0ng5]
2025-07-14 01:54:25 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:54:25 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5aqu0ng5
2025-07-14 01:54:25 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5aqu0ng5
2025-07-14 01:54:25 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5aqu0ng5
2025-07-14 01:54:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434665266", parameters={masked}
2025-07-14 01:54:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434665266
2025-07-14 01:54:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/075/bmbnhpa4/websocket", parameters={}
2025-07-14 01:54:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/075/bmbnhpa4/websocket
2025-07-14 01:54:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:54:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bmbnhpa4]
2025-07-14 01:54:25 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:54:25 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bmbnhpa4
2025-07-14 01:54:25 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bmbnhpa4
2025-07-14 01:54:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bmbnhpa4
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:26 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:26 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:30 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [lwwsbkou, iiofnk5b]
2025-07-14 01:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5aqu0ng5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5aqu0ng5
2025-07-14 01:54:35 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:54:35 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5aqu0ng5
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bmbnhpa4] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bmbnhpa4
2025-07-14 01:54:35 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:54:35 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bmbnhpa4
2025-07-14 01:54:35 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bmbnhpa4}], simpSessionId=bmbnhpa4}]
2025-07-14 01:54:35 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5aqu0ng5}], simpSessionId=5aqu0ng5}]
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434675246", parameters={masked}
2025-07-14 01:54:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434675246
2025-07-14 01:54:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/626/dsckob04/websocket", parameters={}
2025-07-14 01:54:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/626/dsckob04/websocket
2025-07-14 01:54:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:54:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dsckob04]
2025-07-14 01:54:35 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:54:35 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dsckob04
2025-07-14 01:54:35 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=dsckob04
2025-07-14 01:54:35 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dsckob04
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434675266", parameters={masked}
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434675266
2025-07-14 01:54:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/298/ewv3nv3t/websocket", parameters={}
2025-07-14 01:54:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:54:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/298/ewv3nv3t/websocket
2025-07-14 01:54:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:54:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ewv3nv3t]
2025-07-14 01:54:35 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:54:35 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ewv3nv3t
2025-07-14 01:54:35 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ewv3nv3t
2025-07-14 01:54:35 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ewv3nv3t
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:54:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:54:37 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:40 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [bmbnhpa4, 5aqu0ng5]
2025-07-14 01:54:45 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=dsckob04
2025-07-14 01:54:45 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-3 session=dsckob04
2025-07-14 01:54:45 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/48/messages id=sub-4 session=dsckob04
2025-07-14 01:54:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:54:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:54:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=77, co (truncated)...]
2025-07-14 01:54:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/48?userId=1", parameters={masked}
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:54:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 01:54:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:54:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=77, co (truncated)...]
2025-07-14 01:54:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dsckob04] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:55:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dsckob04
2025-07-14 01:55:01 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:55:01 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dsckob04
2025-07-14 01:55:01 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dsckob04}], simpSessionId=dsckob04}]
2025-07-14 01:55:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434701712", parameters={masked}
2025-07-14 01:55:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:55:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434701712
2025-07-14 01:55:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/584/uxoljybn/websocket", parameters={}
2025-07-14 01:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/584/uxoljybn/websocket
2025-07-14 01:55:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uxoljybn]
2025-07-14 01:55:01 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:55:01 [clientInboundChannel-55] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uxoljybn
2025-07-14 01:55:01 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uxoljybn
2025-07-14 01:55:01 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uxoljybn
2025-07-14 01:55:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:55:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:55:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:55:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:55:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:55:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ewv3nv3t] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:55:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ewv3nv3t
2025-07-14 01:55:05 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:55:05 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ewv3nv3t
2025-07-14 01:55:05 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ewv3nv3t}], simpSessionId=ewv3nv3t}]
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:05 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434705170", parameters={masked}
2025-07-14 01:55:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:55:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434705170
2025-07-14 01:55:05 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/016/ippnbyof/websocket", parameters={}
2025-07-14 01:55:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:55:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/016/ippnbyof/websocket
2025-07-14 01:55:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:55:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ippnbyof]
2025-07-14 01:55:05 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:55:05 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ippnbyof
2025-07-14 01:55:05 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ippnbyof
2025-07-14 01:55:05 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ippnbyof
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:55:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:55:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:55:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:55:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 01:55:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:10 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ewv3nv3t, dsckob04]
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:55:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:55:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 01:55:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:55:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:55:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 01:55:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:34 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=uxoljybn
2025-07-14 01:55:34 [clientInboundChannel-61] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-3 session=uxoljybn
2025-07-14 01:55:34 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-4 session=uxoljybn
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=1", parameters={masked}
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:55:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:55:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:55:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=1", parameters={masked}
2025-07-14 01:55:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 01:55:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 01:55:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 01:55:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:55:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 01:55:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:57:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uxoljybn] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:57:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uxoljybn
2025-07-14 01:57:42 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:57:42 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uxoljybn
2025-07-14 01:57:42 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=uxoljybn}], simpSessionId=uxoljybn}]
2025-07-14 01:57:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ippnbyof] closed with CloseStatus[code=1000, reason=null]
2025-07-14 01:57:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ippnbyof
2025-07-14 01:57:42 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:57:42 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ippnbyof
2025-07-14 01:57:42 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ippnbyof}], simpSessionId=ippnbyof}]
2025-07-14 01:57:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:57:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434865805", parameters={masked}
2025-07-14 01:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434865805
2025-07-14 01:57:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:57:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/763/r0w0kwvp/websocket", parameters={}
2025-07-14 01:57:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:57:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/763/r0w0kwvp/websocket
2025-07-14 01:57:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:57:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=r0w0kwvp]
2025-07-14 01:57:45 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 01:57:45 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=r0w0kwvp
2025-07-14 01:57:45 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=r0w0kwvp
2025-07-14 01:57:45 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=r0w0kwvp
2025-07-14 01:57:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:57:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:57:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:57:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752434866138", parameters={masked}
2025-07-14 01:57:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:57:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752434866138
2025-07-14 01:57:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:57:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/297/j2droklf/websocket", parameters={}
2025-07-14 01:57:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 01:57:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/297/j2droklf/websocket
2025-07-14 01:57:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 01:57:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=j2droklf]
2025-07-14 01:57:46 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 01:57:46 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=j2droklf
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:57:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:57:46 [clientInboundChannel-85] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=j2droklf
2025-07-14 01:57:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 01:57:46 [clientInboundChannel-88] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=j2droklf
2025-07-14 01:57:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 01:57:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:57:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 01:57:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 01:57:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 01:57:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=r0w0kwvp]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-07-14 01:57:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=r0w0kwvp] closed with CloseStatus[code=1006, reason=null]
2025-07-14 01:57:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session r0w0kwvp
2025-07-14 01:57:46 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:57:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=j2droklf]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-07-14 01:57:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=j2droklf] closed with CloseStatus[code=1006, reason=null]
2025-07-14 01:57:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session j2droklf
2025-07-14 01:57:46 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 01:57:46 [clientInboundChannel-92] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=r0w0kwvp
2025-07-14 01:57:46 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=r0w0kwvp}], simpSessionId=r0w0kwvp}]
2025-07-14 01:57:46 [clientInboundChannel-94] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=j2droklf
2025-07-14 01:57:47 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=j2droklf}], simpSessionId=j2droklf}]
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:57:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 01:57:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 05:36:32 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 4 sessions: [ippnbyof, r0w0kwvp, uxoljybn, j2droklf]
2025-07-14 05:36:32 [MessageBroker-14] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 12 total, 0 closed abnormally (0 connect failure, 0 send limit, 2 transport error)], stompSubProtocol[processed CONNECT(12)-CONNECTED(12)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 30, active threads = 0, queued tasks = 0, completed tasks = 162], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 24], sockJsScheduler[pool size = 16, active threads = 2, queued tasks = 0, completed tasks = 89]
2025-07-14 18:25:47 [MessageBroker-11] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 12 total, 0 closed abnormally (0 connect failure, 0 send limit, 2 transport error)], stompSubProtocol[processed CONNECT(12)-CONNECTED(12)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 30, active threads = 0, queued tasks = 0, completed tasks = 162], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 24], sockJsScheduler[pool size = 16, active threads = 2, queued tasks = 0, completed tasks = 2736]
2025-07-14 18:25:51 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16h28m14s119ms488s900ns).
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7db05d56 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3d7d3408 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4258941c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@45bf93bb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@58ec7ad1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4cabb86c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@18221885 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1edc97e9 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@25dd5c11 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:25:56 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@34a4e81e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:26:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494200025", parameters={masked}
2025-07-14 18:26:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 18:26:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494200025
2025-07-14 18:26:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/667/vwlkunso/websocket", parameters={}
2025-07-14 18:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 18:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/667/vwlkunso/websocket
2025-07-14 18:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vwlkunso]
2025-07-14 18:26:40 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:26:40 [clientInboundChannel-97] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vwlkunso
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:26:40 [clientInboundChannel-100] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=vwlkunso
2025-07-14 18:26:40 [clientInboundChannel-103] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=vwlkunso
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494200337", parameters={masked}
2025-07-14 18:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 18:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494200337
2025-07-14 18:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:26:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/361/cawspjmu/websocket", parameters={}
2025-07-14 18:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4e80180c
2025-07-14 18:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/361/cawspjmu/websocket
2025-07-14 18:26:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cawspjmu]
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:26:40 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:26:40 [clientInboundChannel-106] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=cawspjmu
2025-07-14 18:26:40 [clientInboundChannel-109] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=cawspjmu
2025-07-14 18:26:40 [clientInboundChannel-112] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=cawspjmu
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:26:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:26:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:26:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:26:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:26:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:26:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:26:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:26:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 18:27:04 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session vwlkunso with CloseStatus[code=1001, reason=null]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=vwlkunso]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vwlkunso] closed with CloseStatus[code=1001, reason=null]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vwlkunso
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session cawspjmu with CloseStatus[code=1001, reason=null]
2025-07-14 18:27:04 [clientInboundChannel-115] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vwlkunso
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=cawspjmu]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cawspjmu] closed with CloseStatus[code=1001, reason=null]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cawspjmu
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@668c8c55]
2025-07-14 18:27:04 [clientInboundChannel-118] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cawspjmu
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 18:27:04 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 18:27:31 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 48568 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 18:27:31 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 18:27:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 18:27:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 6 JPA repository interfaces.
2025-07-14 18:27:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 18:27:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 18:27:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 18:27:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 18:27:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 914 ms
2025-07-14 18:27:32 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 18:27:32 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 18:27:32 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 18:27:32 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 18:27:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 18:27:33 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45bf93bb
2025-07-14 18:27:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 18:27:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 18:27:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 18:27:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 18:27:34 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 18:27:34 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 18:27:35 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 18:27:35 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 18:27:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 18:27:35 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 18:27:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]
2025-07-14 18:27:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]]
2025-07-14 18:27:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 18:27:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 18:27:36 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 18:27:36 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.971 seconds (process running for 5.354)
2025-07-14 18:28:26 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 18:28:26 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@502aa66a
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2c27d6e5
2025-07-14 18:28:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 18:28:26 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 18:28:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494306316", parameters={masked}
2025-07-14 18:28:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494306312", parameters={masked}
2025-07-14 18:28:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494306316
2025-07-14 18:28:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494306312
2025-07-14 18:28:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/574/npmtfw3r/websocket", parameters={}
2025-07-14 18:28:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/574/npmtfw3r/websocket
2025-07-14 18:28:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/300/bzysk1dk/websocket", parameters={}
2025-07-14 18:28:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/300/bzysk1dk/websocket
2025-07-14 18:28:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:28:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:28:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=npmtfw3r]
2025-07-14 18:28:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bzysk1dk]
2025-07-14 18:28:26 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:28:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=npmtfw3r
2025-07-14 18:28:26 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:28:26 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bzysk1dk
2025-07-14 18:28:26 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=npmtfw3r
2025-07-14 18:28:26 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bzysk1dk
2025-07-14 18:28:26 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=npmtfw3r
2025-07-14 18:28:26 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bzysk1dk
2025-07-14 18:28:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:28:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:28:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:28 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bzysk1dk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:28:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bzysk1dk
2025-07-14 18:28:34 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:28:34 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bzysk1dk
2025-07-14 18:28:34 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bzysk1dk}], simpSessionId=bzysk1dk}]
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494315187", parameters={masked}
2025-07-14 18:28:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494315187
2025-07-14 18:28:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/029/g4ukgdpi/websocket", parameters={}
2025-07-14 18:28:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:28:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/029/g4ukgdpi/websocket
2025-07-14 18:28:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:28:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=g4ukgdpi]
2025-07-14 18:28:35 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:28:35 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=g4ukgdpi
2025-07-14 18:28:35 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=g4ukgdpi
2025-07-14 18:28:35 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=g4ukgdpi
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:36 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 30, active threads = 0, queued tasks = 0, completed tasks = 30], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 10, active threads = 1, queued tasks = 3, completed tasks = 2]
2025-07-14 18:28:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:28:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:28:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:28:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:28:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:28:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:28:41 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [bzysk1dk]
2025-07-14 18:29:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=g4ukgdpi] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:29:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session g4ukgdpi
2025-07-14 18:29:46 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:29:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=g4ukgdpi
2025-07-14 18:29:46 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=g4ukgdpi}], simpSessionId=g4ukgdpi}]
2025-07-14 18:29:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=npmtfw3r] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:29:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session npmtfw3r
2025-07-14 18:29:46 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:29:46 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=npmtfw3r
2025-07-14 18:29:46 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=npmtfw3r}], simpSessionId=npmtfw3r}]
2025-07-14 18:29:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494386638", parameters={masked}
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494386638
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/504/z3jf5f43/websocket", parameters={}
2025-07-14 18:29:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:29:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/504/z3jf5f43/websocket
2025-07-14 18:29:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:29:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z3jf5f43]
2025-07-14 18:29:46 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:29:46 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=z3jf5f43
2025-07-14 18:29:46 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=z3jf5f43
2025-07-14 18:29:46 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=z3jf5f43
2025-07-14 18:29:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:29:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494386770", parameters={masked}
2025-07-14 18:29:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:29:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494386770
2025-07-14 18:29:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/743/bl5xc34z/websocket", parameters={}
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/743/bl5xc34z/websocket
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:29:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bl5xc34z]
2025-07-14 18:29:46 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:29:46 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bl5xc34z
2025-07-14 18:29:46 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bl5xc34z
2025-07-14 18:29:46 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bl5xc34z
2025-07-14 18:29:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:29:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:29:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:29:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:29:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:29:47 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:29:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:29:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:29:47 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:29:47 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:29:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:29:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:29:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:29:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:29:51 [MessageBroker-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [g4ukgdpi, npmtfw3r]
2025-07-14 18:30:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bl5xc34z] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:30:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bl5xc34z
2025-07-14 18:30:37 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:30:37 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bl5xc34z
2025-07-14 18:30:37 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bl5xc34z}], simpSessionId=bl5xc34z}]
2025-07-14 18:30:38 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:30:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494438152", parameters={masked}
2025-07-14 18:30:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:30:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494438152
2025-07-14 18:30:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:30:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/918/e01brfnc/websocket", parameters={}
2025-07-14 18:30:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:30:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/918/e01brfnc/websocket
2025-07-14 18:30:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:30:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=e01brfnc]
2025-07-14 18:30:38 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:30:38 [clientInboundChannel-59] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=e01brfnc
2025-07-14 18:30:38 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=e01brfnc
2025-07-14 18:30:38 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=e01brfnc
2025-07-14 18:30:46 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [bl5xc34z]
2025-07-14 18:30:48 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1975fa6e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:30:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:30:58 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@45bf93bb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:01 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@15dbf2e0 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:08 [http-nio-8080-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@22fe3537 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:08 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@65ba9805 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:08 [http-nio-8080-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-14 18:31:08 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30050ms (total=5, active=1, idle=3, waiting=0)
2025-07-14 18:31:08 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - No operations allowed after connection closed.
2025-07-14 18:31:08 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30050ms (total=5, active=1, idle=3, waiting=0)] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:278)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy133.findByPhoneNumber(Unknown Source)
	at com.btalk.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:44)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30050ms (total=5, active=1, idle=3, waiting=0)] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:129)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:156)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:56)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$4.doPrepare(StatementPreparerImpl.java:151)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:153)
	at org.hibernate.sql.exec.internal.StandardStatementCreator.createStatement(StandardStatementCreator.java:49)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:236)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:172)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:419)
	at jdk.proxy2/jdk.proxy2.$Proxy155.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 71 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30050ms (total=5, active=1, idle=3, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:709)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:188)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:126)
	... 112 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:580)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:172)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 117 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 120 common frames omitted
2025-07-14 18:31:11 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@11e47483 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:18 [http-nio-8080-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@442178d1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:21 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@54e6f8db (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:21 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47s644ms230s400ns).
2025-07-14 18:31:28 [http-nio-8080-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@cb00818 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:28 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-14 18:31:28 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30044ms (total=1, active=0, idle=1, waiting=0)
2025-07-14 18:31:28 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - No operations allowed after connection closed.
2025-07-14 18:31:28 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30044ms (total=1, active=0, idle=1, waiting=0)] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:278)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy133.findByPhoneNumber(Unknown Source)
	at com.btalk.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:44)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30044ms (total=1, active=0, idle=1, waiting=0)] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:129)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:156)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:56)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$4.doPrepare(StatementPreparerImpl.java:151)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:153)
	at org.hibernate.sql.exec.internal.StandardStatementCreator.createStatement(StandardStatementCreator.java:49)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:236)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:172)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:275)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:419)
	at jdk.proxy2/jdk.proxy2.$Proxy155.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:224)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 71 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30044ms (total=1, active=0, idle=1, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:709)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:188)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:126)
	... 112 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:580)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:172)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 117 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 120 common frames omitted
2025-07-14 18:31:46 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2f7e9633 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 18:31:48 [HikariPool-1:connection-adder] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Pool is empty, failed to create/setup connection (b14a6cdc-bcca-447f-b716-cae188d35fd6)
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:829)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:449)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:242)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:139)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:368)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:205)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:483)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:747)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at jdk.internal.reflect.GeneratedConstructorAccessor53.newInstance(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:949)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:819)
	... 13 common frames omitted
Caused by: java.net.UnknownHostException: No such host is known (mysql.thawhtinaung.online)
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
	at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:934)
	at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543)
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852)
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1385)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:133)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 16 common frames omitted
2025-07-14 18:32:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z3jf5f43] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:32:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z3jf5f43
2025-07-14 18:32:48 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:32:48 [clientInboundChannel-64] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z3jf5f43
2025-07-14 18:32:48 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=z3jf5f43}], simpSessionId=z3jf5f43}]
2025-07-14 18:32:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:32:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494569009", parameters={masked}
2025-07-14 18:32:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:32:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494569009
2025-07-14 18:32:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:32:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/673/3pa4shwe/websocket", parameters={}
2025-07-14 18:32:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:32:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/673/3pa4shwe/websocket
2025-07-14 18:32:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:32:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3pa4shwe]
2025-07-14 18:32:49 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:32:49 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3pa4shwe
2025-07-14 18:32:49 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3pa4shwe
2025-07-14 18:32:49 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3pa4shwe
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:32:49 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:32:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:32:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:32:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:32:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:32:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:32:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:32:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:32:56 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [z3jf5f43]
2025-07-14 18:34:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3pa4shwe] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:34:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3pa4shwe
2025-07-14 18:34:14 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:34:14 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3pa4shwe
2025-07-14 18:34:14 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3pa4shwe}], simpSessionId=3pa4shwe}]
2025-07-14 18:34:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=e01brfnc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:34:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e01brfnc
2025-07-14 18:34:14 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:34:14 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=e01brfnc
2025-07-14 18:34:14 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=e01brfnc}], simpSessionId=e01brfnc}]
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494655324", parameters={masked}
2025-07-14 18:34:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494655324
2025-07-14 18:34:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/154/qcwtalxr/websocket", parameters={}
2025-07-14 18:34:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/154/qcwtalxr/websocket
2025-07-14 18:34:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:34:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qcwtalxr]
2025-07-14 18:34:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:34:15 [clientInboundChannel-82] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qcwtalxr
2025-07-14 18:34:15 [clientInboundChannel-85] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qcwtalxr
2025-07-14 18:34:15 [clientInboundChannel-88] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qcwtalxr
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494655429", parameters={masked}
2025-07-14 18:34:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494655429
2025-07-14 18:34:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/356/mvbcgqvz/websocket", parameters={}
2025-07-14 18:34:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/356/mvbcgqvz/websocket
2025-07-14 18:34:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:34:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mvbcgqvz]
2025-07-14 18:34:15 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:34:15 [clientInboundChannel-91] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=mvbcgqvz
2025-07-14 18:34:15 [clientInboundChannel-94] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=mvbcgqvz
2025-07-14 18:34:15 [clientInboundChannel-97] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=mvbcgqvz
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:15 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mvbcgqvz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:34:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mvbcgqvz
2025-07-14 18:34:18 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:34:18 [clientInboundChannel-100] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mvbcgqvz
2025-07-14 18:34:18 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=mvbcgqvz}], simpSessionId=mvbcgqvz}]
2025-07-14 18:34:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qcwtalxr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:34:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qcwtalxr
2025-07-14 18:34:18 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:34:18 [clientInboundChannel-103] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qcwtalxr
2025-07-14 18:34:18 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qcwtalxr}], simpSessionId=qcwtalxr}]
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494659134", parameters={masked}
2025-07-14 18:34:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494659134
2025-07-14 18:34:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/666/brvue0v5/websocket", parameters={}
2025-07-14 18:34:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/666/brvue0v5/websocket
2025-07-14 18:34:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:34:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=brvue0v5]
2025-07-14 18:34:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:34:19 [clientInboundChannel-106] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=brvue0v5
2025-07-14 18:34:19 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=brvue0v5
2025-07-14 18:34:19 [clientInboundChannel-79] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=brvue0v5
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494659442", parameters={masked}
2025-07-14 18:34:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494659442
2025-07-14 18:34:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/856/ed2tphar/websocket", parameters={}
2025-07-14 18:34:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:34:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/856/ed2tphar/websocket
2025-07-14 18:34:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:34:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ed2tphar]
2025-07-14 18:34:19 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:34:19 [clientInboundChannel-81] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ed2tphar
2025-07-14 18:34:19 [clientInboundChannel-85] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ed2tphar
2025-07-14 18:34:19 [clientInboundChannel-89] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ed2tphar
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:34:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:34:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:34:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:34:21 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [e01brfnc, 3pa4shwe]
2025-07-14 18:34:26 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [mvbcgqvz, qcwtalxr]
2025-07-14 18:36:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ed2tphar] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:36:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ed2tphar
2025-07-14 18:36:12 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:36:12 [clientInboundChannel-108] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ed2tphar
2025-07-14 18:36:12 [clientOutboundChannel-21] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ed2tphar}], simpSessionId=ed2tphar}]
2025-07-14 18:36:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=brvue0v5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:36:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session brvue0v5
2025-07-14 18:36:12 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:36:12 [clientInboundChannel-111] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=brvue0v5
2025-07-14 18:36:12 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=brvue0v5}], simpSessionId=brvue0v5}]
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494773321", parameters={masked}
2025-07-14 18:36:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494773321
2025-07-14 18:36:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/480/ovh5s2gk/websocket", parameters={}
2025-07-14 18:36:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/480/ovh5s2gk/websocket
2025-07-14 18:36:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:36:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ovh5s2gk]
2025-07-14 18:36:13 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:36:13 [clientInboundChannel-114] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ovh5s2gk
2025-07-14 18:36:13 [clientInboundChannel-117] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ovh5s2gk
2025-07-14 18:36:13 [clientInboundChannel-120] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ovh5s2gk
2025-07-14 18:36:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494773404", parameters={masked}
2025-07-14 18:36:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494773404
2025-07-14 18:36:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/779/32b35bxs/websocket", parameters={}
2025-07-14 18:36:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/779/32b35bxs/websocket
2025-07-14 18:36:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:36:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=32b35bxs]
2025-07-14 18:36:13 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:36:13 [clientInboundChannel-123] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=32b35bxs
2025-07-14 18:36:13 [clientInboundChannel-126] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=32b35bxs
2025-07-14 18:36:13 [clientInboundChannel-129] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=32b35bxs
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:21 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ed2tphar, brvue0v5]
2025-07-14 18:36:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ovh5s2gk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:36:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ovh5s2gk
2025-07-14 18:36:22 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:36:22 [clientInboundChannel-132] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ovh5s2gk
2025-07-14 18:36:22 [clientOutboundChannel-25] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ovh5s2gk}], simpSessionId=ovh5s2gk}]
2025-07-14 18:36:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=32b35bxs] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:36:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 32b35bxs
2025-07-14 18:36:22 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:36:22 [clientInboundChannel-135] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=32b35bxs
2025-07-14 18:36:22 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=32b35bxs}], simpSessionId=32b35bxs}]
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494783303", parameters={masked}
2025-07-14 18:36:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494783303
2025-07-14 18:36:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/479/rkoin4g3/websocket", parameters={}
2025-07-14 18:36:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/479/rkoin4g3/websocket
2025-07-14 18:36:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:36:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rkoin4g3]
2025-07-14 18:36:23 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:36:23 [clientInboundChannel-138] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rkoin4g3
2025-07-14 18:36:23 [clientInboundChannel-109] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=rkoin4g3
2025-07-14 18:36:23 [clientInboundChannel-112] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rkoin4g3
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494783384", parameters={masked}
2025-07-14 18:36:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494783384
2025-07-14 18:36:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/575/lw5yf0dv/websocket", parameters={}
2025-07-14 18:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/575/lw5yf0dv/websocket
2025-07-14 18:36:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:36:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lw5yf0dv]
2025-07-14 18:36:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:36:23 [clientInboundChannel-115] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=lw5yf0dv
2025-07-14 18:36:23 [clientInboundChannel-118] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=lw5yf0dv
2025-07-14 18:36:23 [clientInboundChannel-121] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=lw5yf0dv
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:36:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:36:25 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:36:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:36:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:36:31 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ovh5s2gk, 32b35bxs]
2025-07-14 18:37:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rkoin4g3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:37:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rkoin4g3
2025-07-14 18:37:05 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:37:05 [clientInboundChannel-124] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rkoin4g3
2025-07-14 18:37:05 [clientOutboundChannel-29] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=rkoin4g3}], simpSessionId=rkoin4g3}]
2025-07-14 18:37:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lw5yf0dv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:37:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lw5yf0dv
2025-07-14 18:37:05 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:37:05 [clientInboundChannel-127] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lw5yf0dv
2025-07-14 18:37:05 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=lw5yf0dv}], simpSessionId=lw5yf0dv}]
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:37:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494826587", parameters={masked}
2025-07-14 18:37:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:37:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494826587
2025-07-14 18:37:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:37:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/045/nhezmfdv/websocket", parameters={}
2025-07-14 18:37:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:37:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/045/nhezmfdv/websocket
2025-07-14 18:37:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:37:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nhezmfdv]
2025-07-14 18:37:06 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:37:06 [clientInboundChannel-129] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nhezmfdv
2025-07-14 18:37:06 [clientInboundChannel-131] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=nhezmfdv
2025-07-14 18:37:06 [clientInboundChannel-135] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=nhezmfdv
2025-07-14 18:37:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752494826499", parameters={masked}
2025-07-14 18:37:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:37:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752494826499
2025-07-14 18:37:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:37:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/456/wy2xwpqq/websocket", parameters={}
2025-07-14 18:37:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:37:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/456/wy2xwpqq/websocket
2025-07-14 18:37:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:37:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wy2xwpqq]
2025-07-14 18:37:06 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:37:06 [clientInboundChannel-137] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wy2xwpqq
2025-07-14 18:37:06 [clientInboundChannel-109] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wy2xwpqq
2025-07-14 18:37:06 [clientInboundChannel-112] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wy2xwpqq
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:37:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:37:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:37:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:37:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:37:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:37:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:37:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:37:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:37:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:37:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:37:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:37:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:37:11 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [rkoin4g3, lw5yf0dv]
2025-07-14 18:41:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nhezmfdv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:41:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nhezmfdv
2025-07-14 18:41:47 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:41:47 [clientInboundChannel-140] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nhezmfdv
2025-07-14 18:41:47 [clientOutboundChannel-33] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nhezmfdv}], simpSessionId=nhezmfdv}]
2025-07-14 18:41:56 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nhezmfdv]
2025-07-14 18:42:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wy2xwpqq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:42:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wy2xwpqq
2025-07-14 18:42:00 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:42:00 [clientInboundChannel-143] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wy2xwpqq
2025-07-14 18:42:00 [clientOutboundChannel-34] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wy2xwpqq}], simpSessionId=wy2xwpqq}]
2025-07-14 18:42:06 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wy2xwpqq]
2025-07-14 18:42:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495151921", parameters={masked}
2025-07-14 18:42:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:42:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495151921
2025-07-14 18:42:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/209/sd2fgidf/websocket", parameters={}
2025-07-14 18:42:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:42:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/209/sd2fgidf/websocket
2025-07-14 18:42:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:42:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sd2fgidf]
2025-07-14 18:42:31 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:42:31 [clientInboundChannel-146] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=sd2fgidf
2025-07-14 18:42:31 [clientInboundChannel-149] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=sd2fgidf
2025-07-14 18:42:31 [clientInboundChannel-152] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=sd2fgidf
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:42:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:42:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:42:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:35 [clientInboundChannel-155] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=sd2fgidf
2025-07-14 18:42:35 [clientInboundChannel-158] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-3 session=sd2fgidf
2025-07-14 18:42:35 [clientInboundChannel-161] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-4 session=sd2fgidf
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:36 [clientInboundChannel-164] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=sd2fgidf
2025-07-14 18:42:36 [clientInboundChannel-167] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=sd2fgidf
2025-07-14 18:42:36 [clientInboundChannel-170] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=sd2fgidf
2025-07-14 18:42:36 [clientInboundChannel-170] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-6 session=sd2fgidf
2025-07-14 18:42:36 [clientInboundChannel-144] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/49/messages id=sub-7 session=sd2fgidf
2025-07-14 18:42:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:42:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:42:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/49?userId=2", parameters={masked}
2025-07-14 18:42:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:42:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:42:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:42:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:42:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:42:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sd2fgidf] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:43:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sd2fgidf
2025-07-14 18:43:14 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:43:14 [clientInboundChannel-147] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sd2fgidf
2025-07-14 18:43:14 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sd2fgidf}], simpSessionId=sd2fgidf}]
2025-07-14 18:43:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495194570", parameters={masked}
2025-07-14 18:43:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:43:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495194570
2025-07-14 18:43:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:43:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/423/bmjug5hc/websocket", parameters={}
2025-07-14 18:43:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:43:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/423/bmjug5hc/websocket
2025-07-14 18:43:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:43:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bmjug5hc]
2025-07-14 18:43:14 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:43:14 [clientInboundChannel-148] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bmjug5hc
2025-07-14 18:43:14 [clientInboundChannel-153] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bmjug5hc
2025-07-14 18:43:14 [clientInboundChannel-153] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bmjug5hc
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:43:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:43:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:21 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [sd2fgidf]
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=G", parameters={masked}
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 18:43:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 18:43:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09 45415 9576, password=apple671@)]
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 18:43:54 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 18:44:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495241772", parameters={masked}
2025-07-14 18:44:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:44:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495241772
2025-07-14 18:44:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/637/swsrzbxp/websocket", parameters={}
2025-07-14 18:44:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:44:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/637/swsrzbxp/websocket
2025-07-14 18:44:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:44:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=swsrzbxp]
2025-07-14 18:44:01 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:44:01 [clientInboundChannel-173] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=swsrzbxp
2025-07-14 18:44:01 [clientInboundChannel-176] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=swsrzbxp
2025-07-14 18:44:01 [clientInboundChannel-179] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=swsrzbxp
2025-07-14 18:44:01 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:44:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:44:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:44:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:44:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:44:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 18:44:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 18:44:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 18:44:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 18:44:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 18:44:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:44:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:44:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:44:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:44:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bmjug5hc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:44:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bmjug5hc
2025-07-14 18:44:28 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:44:28 [clientInboundChannel-182] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bmjug5hc
2025-07-14 18:44:28 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bmjug5hc}], simpSessionId=bmjug5hc}]
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495269031", parameters={masked}
2025-07-14 18:44:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:44:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495269031
2025-07-14 18:44:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/901/pu5fyh3a/websocket", parameters={}
2025-07-14 18:44:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:44:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/901/pu5fyh3a/websocket
2025-07-14 18:44:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:44:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pu5fyh3a]
2025-07-14 18:44:29 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:44:29 [clientInboundChannel-185] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pu5fyh3a
2025-07-14 18:44:29 [clientInboundChannel-188] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=pu5fyh3a
2025-07-14 18:44:29 [clientInboundChannel-191] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=pu5fyh3a
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:44:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:44:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:44:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:31 [clientInboundChannel-194] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-197] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-3 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-200] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-4 session=pu5fyh3a
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:31 [clientInboundChannel-203] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-174] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-174] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-5 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-180] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-6 session=pu5fyh3a
2025-07-14 18:44:31 [clientInboundChannel-182] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-7 session=pu5fyh3a
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:44:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:32 [clientInboundChannel-185] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=swsrzbxp
2025-07-14 18:44:32 [clientInboundChannel-189] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-3 session=swsrzbxp
2025-07-14 18:44:32 [clientInboundChannel-192] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-4 session=swsrzbxp
2025-07-14 18:44:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=1", parameters={masked}
2025-07-14 18:44:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:44:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=1", parameters={masked}
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=1", parameters={masked}
2025-07-14 18:44:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:44:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:44:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 18:44:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:44:36 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [bmjug5hc]
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":50,"senderId":1,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 18:44:40 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/50/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=78, conversat (truncated)...]
2025-07-14 18:44:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pu5fyh3a] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:45:28 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pu5fyh3a
2025-07-14 18:45:28 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:45:28 [clientInboundChannel-205] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pu5fyh3a
2025-07-14 18:45:28 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pu5fyh3a}], simpSessionId=pu5fyh3a}]
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495328388", parameters={masked}
2025-07-14 18:45:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:45:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495328388
2025-07-14 18:45:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/569/b1b0onia/websocket", parameters={}
2025-07-14 18:45:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:45:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/569/b1b0onia/websocket
2025-07-14 18:45:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:45:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=b1b0onia]
2025-07-14 18:45:28 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:45:28 [clientInboundChannel-195] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=b1b0onia
2025-07-14 18:45:28 [clientInboundChannel-196] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=b1b0onia
2025-07-14 18:45:28 [clientInboundChannel-196] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=b1b0onia
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:45:28 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:45:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:45:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:45:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:45:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:31 [clientInboundChannel-209] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-2 session=b1b0onia
2025-07-14 18:45:31 [clientInboundChannel-202] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-3 session=b1b0onia
2025-07-14 18:45:31 [clientInboundChannel-203] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/50/messages id=sub-4 session=b1b0onia
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=78, co (truncated)...]
2025-07-14 18:45:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:45:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:45:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:45:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:45:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=78, co (truncated)...]
2025-07-14 18:45:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/50?userId=2", parameters={masked}
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=78, co (truncated)...]
2025-07-14 18:45:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":50,"senderId":2,"content":"Hello Motot","messageType":"TEXT","status":"SENT","sent (truncated)..."]
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/50/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=79, conversat (truncated)...]
2025-07-14 18:45:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:45:36 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [pu5fyh3a]
2025-07-14 18:47:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=swsrzbxp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:47:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=b1b0onia] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:47:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session swsrzbxp
2025-07-14 18:47:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session b1b0onia
2025-07-14 18:47:38 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:47:38 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:47:38 [clientInboundChannel-214] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=swsrzbxp
2025-07-14 18:47:38 [clientInboundChannel-215] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=b1b0onia
2025-07-14 18:47:38 [clientOutboundChannel-52] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=swsrzbxp}], simpSessionId=swsrzbxp}]
2025-07-14 18:47:38 [clientOutboundChannel-53] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=b1b0onia}], simpSessionId=b1b0onia}]
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:47:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495459194", parameters={masked}
2025-07-14 18:47:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:47:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495459194
2025-07-14 18:47:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/435/53aka5yl/websocket", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:47:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/435/53aka5yl/websocket
2025-07-14 18:47:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:47:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=53aka5yl]
2025-07-14 18:47:39 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:47:39 [clientInboundChannel-219] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=53aka5yl
2025-07-14 18:47:39 [clientInboundChannel-222] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=53aka5yl
2025-07-14 18:47:39 [clientInboundChannel-225] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=53aka5yl
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:47:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495459364", parameters={masked}
2025-07-14 18:47:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:47:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495459364
2025-07-14 18:47:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/106/n2ekkpjz/websocket", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/106/n2ekkpjz/websocket
2025-07-14 18:47:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n2ekkpjz]
2025-07-14 18:47:39 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:47:39 [clientInboundChannel-228] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=n2ekkpjz
2025-07-14 18:47:39 [clientInboundChannel-231] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=n2ekkpjz
2025-07-14 18:47:39 [clientInboundChannel-234] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=n2ekkpjz
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:47:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:47:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:47:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:47:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:47:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:47:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:47:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:47:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:47:46 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [b1b0onia, swsrzbxp]
2025-07-14 18:48:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n2ekkpjz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:48:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n2ekkpjz
2025-07-14 18:48:10 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:48:10 [clientInboundChannel-237] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=n2ekkpjz
2025-07-14 18:48:10 [clientOutboundChannel-56] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=n2ekkpjz}], simpSessionId=n2ekkpjz}]
2025-07-14 18:48:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=53aka5yl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:48:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 53aka5yl
2025-07-14 18:48:10 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:48:10 [clientInboundChannel-240] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=53aka5yl
2025-07-14 18:48:10 [clientOutboundChannel-57] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=53aka5yl}], simpSessionId=53aka5yl}]
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495491290", parameters={masked}
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495491290
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/689/swqwmhcv/websocket", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/689/swqwmhcv/websocket
2025-07-14 18:48:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=swqwmhcv]
2025-07-14 18:48:11 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:48:11 [clientInboundChannel-243] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=swqwmhcv
2025-07-14 18:48:11 [clientInboundChannel-217] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=swqwmhcv
2025-07-14 18:48:11 [clientInboundChannel-214] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=swqwmhcv
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495491275", parameters={masked}
2025-07-14 18:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495491275
2025-07-14 18:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/905/nk3sjfmk/websocket", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/905/nk3sjfmk/websocket
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nk3sjfmk]
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:11 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:48:11 [clientInboundChannel-220] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nk3sjfmk
2025-07-14 18:48:11 [clientInboundChannel-224] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=nk3sjfmk
2025-07-14 18:48:11 [clientInboundChannel-226] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=nk3sjfmk
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:16 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [n2ekkpjz, 53aka5yl]
2025-07-14 18:48:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=swqwmhcv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:48:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session swqwmhcv
2025-07-14 18:48:16 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:48:16 [clientInboundChannel-228] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=swqwmhcv
2025-07-14 18:48:16 [clientOutboundChannel-60] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=swqwmhcv}], simpSessionId=swqwmhcv}]
2025-07-14 18:48:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nk3sjfmk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:48:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nk3sjfmk
2025-07-14 18:48:16 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:48:16 [clientInboundChannel-232] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nk3sjfmk
2025-07-14 18:48:16 [clientOutboundChannel-61] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nk3sjfmk}], simpSessionId=nk3sjfmk}]
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495497201", parameters={masked}
2025-07-14 18:48:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495497201
2025-07-14 18:48:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/393/svbpmjfw/websocket", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/393/svbpmjfw/websocket
2025-07-14 18:48:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:48:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=svbpmjfw]
2025-07-14 18:48:17 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:48:17 [clientInboundChannel-235] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=svbpmjfw
2025-07-14 18:48:17 [clientInboundChannel-237] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=svbpmjfw
2025-07-14 18:48:17 [clientInboundChannel-240] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=svbpmjfw
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495497081", parameters={masked}
2025-07-14 18:48:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495497081
2025-07-14 18:48:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/265/xoas4jec/websocket", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:48:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/265/xoas4jec/websocket
2025-07-14 18:48:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:48:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xoas4jec]
2025-07-14 18:48:17 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:48:17 [clientInboundChannel-242] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xoas4jec
2025-07-14 18:48:17 [clientInboundChannel-216] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xoas4jec
2025-07-14 18:48:17 [clientInboundChannel-218] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xoas4jec
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:48:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:48:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:48:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:48:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:48:26 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [swqwmhcv, nk3sjfmk]
2025-07-14 18:49:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xoas4jec] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:49:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xoas4jec
2025-07-14 18:49:12 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:49:12 [clientInboundChannel-245] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xoas4jec
2025-07-14 18:49:12 [clientOutboundChannel-64] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xoas4jec}], simpSessionId=xoas4jec}]
2025-07-14 18:49:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495552600", parameters={masked}
2025-07-14 18:49:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:49:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495552600
2025-07-14 18:49:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/751/3q14boxq/websocket", parameters={}
2025-07-14 18:49:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:49:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/751/3q14boxq/websocket
2025-07-14 18:49:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:49:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3q14boxq]
2025-07-14 18:49:12 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:49:12 [clientInboundChannel-248] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3q14boxq
2025-07-14 18:49:12 [clientInboundChannel-251] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3q14boxq
2025-07-14 18:49:12 [clientInboundChannel-254] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3q14boxq
2025-07-14 18:49:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:49:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:49:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:49:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=svbpmjfw] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:49:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session svbpmjfw
2025-07-14 18:49:13 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:49:13 [clientInboundChannel-257] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=svbpmjfw
2025-07-14 18:49:13 [clientOutboundChannel-66] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=svbpmjfw}], simpSessionId=svbpmjfw}]
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:49:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495553440", parameters={masked}
2025-07-14 18:49:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:49:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495553440
2025-07-14 18:49:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/709/5ef4uacv/websocket", parameters={}
2025-07-14 18:49:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:49:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/709/5ef4uacv/websocket
2025-07-14 18:49:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:49:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5ef4uacv]
2025-07-14 18:49:13 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:49:13 [clientInboundChannel-229] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5ef4uacv
2025-07-14 18:49:13 [clientInboundChannel-231] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5ef4uacv
2025-07-14 18:49:13 [clientInboundChannel-235] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5ef4uacv
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:49:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:49:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:49:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 18:49:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 18:49:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 18:49:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:21 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [svbpmjfw, xoas4jec]
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:49:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:49:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 18:49:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:49:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5ef4uacv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:52:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5ef4uacv
2025-07-14 18:52:19 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:52:19 [clientInboundChannel-261] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5ef4uacv
2025-07-14 18:52:19 [clientOutboundChannel-68] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5ef4uacv}], simpSessionId=5ef4uacv}]
2025-07-14 18:52:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3q14boxq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:52:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3q14boxq
2025-07-14 18:52:19 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:52:19 [clientInboundChannel-264] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3q14boxq
2025-07-14 18:52:19 [clientOutboundChannel-69] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3q14boxq}], simpSessionId=3q14boxq}]
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495740275", parameters={masked}
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495740275
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:52:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/616/jvaogeuz/websocket", parameters={}
2025-07-14 18:52:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:52:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/616/jvaogeuz/websocket
2025-07-14 18:52:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:52:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jvaogeuz]
2025-07-14 18:52:20 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:52:20 [clientInboundChannel-267] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=jvaogeuz
2025-07-14 18:52:20 [clientInboundChannel-270] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jvaogeuz
2025-07-14 18:52:20 [clientInboundChannel-273] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jvaogeuz
2025-07-14 18:52:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495740345", parameters={masked}
2025-07-14 18:52:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:52:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495740345
2025-07-14 18:52:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/332/0c1gkouw/websocket", parameters={}
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/332/0c1gkouw/websocket
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:52:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0c1gkouw]
2025-07-14 18:52:20 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:52:20 [clientInboundChannel-276] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0c1gkouw
2025-07-14 18:52:20 [clientInboundChannel-282] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0c1gkouw
2025-07-14 18:52:20 [clientInboundChannel-279] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0c1gkouw
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:52:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:52:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:52:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:52:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:52:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:52:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:52:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:52:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:52:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:52:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:52:26 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3q14boxq, 5ef4uacv]
2025-07-14 18:55:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jvaogeuz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:55:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jvaogeuz
2025-07-14 18:55:00 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:55:00 [clientInboundChannel-285] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jvaogeuz
2025-07-14 18:55:00 [clientOutboundChannel-72] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=jvaogeuz}], simpSessionId=jvaogeuz}]
2025-07-14 18:55:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0c1gkouw] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:55:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0c1gkouw
2025-07-14 18:55:00 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:55:00 [clientInboundChannel-288] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0c1gkouw
2025-07-14 18:55:00 [clientOutboundChannel-73] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0c1gkouw}], simpSessionId=0c1gkouw}]
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:55:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495901269", parameters={masked}
2025-07-14 18:55:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:55:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495901269
2025-07-14 18:55:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:01 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/660/uthavxko/websocket", parameters={}
2025-07-14 18:55:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:55:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/660/uthavxko/websocket
2025-07-14 18:55:01 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:55:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uthavxko]
2025-07-14 18:55:01 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:55:01 [clientInboundChannel-291] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uthavxko
2025-07-14 18:55:01 [clientInboundChannel-294] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uthavxko
2025-07-14 18:55:01 [clientInboundChannel-297] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uthavxko
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:55:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752495901342", parameters={masked}
2025-07-14 18:55:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:55:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752495901342
2025-07-14 18:55:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/256/hkd0c1kz/websocket", parameters={}
2025-07-14 18:55:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:55:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/256/hkd0c1kz/websocket
2025-07-14 18:55:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:55:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hkd0c1kz]
2025-07-14 18:55:01 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:55:01 [clientInboundChannel-300] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=hkd0c1kz
2025-07-14 18:55:01 [clientInboundChannel-303] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=hkd0c1kz
2025-07-14 18:55:01 [clientInboundChannel-306] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=hkd0c1kz
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:55:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:55:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:55:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:55:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:55:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:55:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:55:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:55:06 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [jvaogeuz, 0c1gkouw]
2025-07-14 18:58:36 [MessageBroker-7] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 34 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(34)-CONNECTED(34)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 468], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 75], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 483]
2025-07-14 18:59:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hkd0c1kz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:59:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hkd0c1kz
2025-07-14 18:59:35 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:59:35 [clientInboundChannel-309] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hkd0c1kz
2025-07-14 18:59:35 [clientOutboundChannel-76] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=hkd0c1kz}], simpSessionId=hkd0c1kz}]
2025-07-14 18:59:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uthavxko] closed with CloseStatus[code=1000, reason=null]
2025-07-14 18:59:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uthavxko
2025-07-14 18:59:35 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 18:59:35 [clientInboundChannel-312] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uthavxko
2025-07-14 18:59:35 [clientOutboundChannel-77] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=uthavxko}], simpSessionId=uthavxko}]
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:59:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752496176306", parameters={masked}
2025-07-14 18:59:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:59:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752496176306
2025-07-14 18:59:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/997/z2f52gve/websocket", parameters={}
2025-07-14 18:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/997/z2f52gve/websocket
2025-07-14 18:59:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:59:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z2f52gve]
2025-07-14 18:59:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752496176321", parameters={masked}
2025-07-14 18:59:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:59:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752496176321
2025-07-14 18:59:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:36 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 18:59:36 [clientInboundChannel-315] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=z2f52gve
2025-07-14 18:59:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/743/wffqc4vn/websocket", parameters={}
2025-07-14 18:59:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 18:59:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/743/wffqc4vn/websocket
2025-07-14 18:59:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 18:59:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wffqc4vn]
2025-07-14 18:59:36 [clientInboundChannel-318] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=z2f52gve
2025-07-14 18:59:36 [clientInboundChannel-321] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=z2f52gve
2025-07-14 18:59:36 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 18:59:36 [clientInboundChannel-324] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wffqc4vn
2025-07-14 18:59:36 [clientInboundChannel-327] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wffqc4vn
2025-07-14 18:59:36 [clientInboundChannel-330] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wffqc4vn
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:59:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:59:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:59:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:59:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:59:37 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:59:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 18:59:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 18:59:41 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [hkd0c1kz, uthavxko]
2025-07-14 19:13:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z2f52gve] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:13:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z2f52gve
2025-07-14 19:13:15 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:13:15 [clientInboundChannel-333] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z2f52gve
2025-07-14 19:13:15 [clientOutboundChannel-80] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=z2f52gve}], simpSessionId=z2f52gve}]
2025-07-14 19:13:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:13:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752496995706", parameters={masked}
2025-07-14 19:13:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:13:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752496995706
2025-07-14 19:13:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/499/jh4oxf03/websocket", parameters={}
2025-07-14 19:13:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:13:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/499/jh4oxf03/websocket
2025-07-14 19:13:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:13:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jh4oxf03]
2025-07-14 19:13:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 19:13:15 [clientInboundChannel-336] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=jh4oxf03
2025-07-14 19:13:15 [clientInboundChannel-339] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jh4oxf03
2025-07-14 19:13:15 [clientInboundChannel-342] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jh4oxf03
2025-07-14 19:13:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:13:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:13:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:13:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:13:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:13:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:13:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:13:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:13:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:21 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [z2f52gve]
2025-07-14 19:13:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wffqc4vn] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:13:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wffqc4vn
2025-07-14 19:13:27 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:13:27 [clientInboundChannel-345] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wffqc4vn
2025-07-14 19:13:27 [clientOutboundChannel-82] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wffqc4vn}], simpSessionId=wffqc4vn}]
2025-07-14 19:13:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:13:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497007796", parameters={masked}
2025-07-14 19:13:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:13:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497007796
2025-07-14 19:13:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/493/3v2pruzc/websocket", parameters={}
2025-07-14 19:13:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:13:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/493/3v2pruzc/websocket
2025-07-14 19:13:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:13:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3v2pruzc]
2025-07-14 19:13:27 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:13:27 [clientInboundChannel-348] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3v2pruzc
2025-07-14 19:13:27 [clientInboundChannel-351] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3v2pruzc
2025-07-14 19:13:27 [clientInboundChannel-354] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3v2pruzc
2025-07-14 19:13:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:13:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:13:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:13:28 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:13:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:13:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:13:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:13:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:13:36 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wffqc4vn]
2025-07-14 19:14:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jh4oxf03] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:14:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jh4oxf03
2025-07-14 19:14:33 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:14:33 [clientInboundChannel-357] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jh4oxf03
2025-07-14 19:14:33 [clientOutboundChannel-84] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=jh4oxf03}], simpSessionId=jh4oxf03}]
2025-07-14 19:14:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3v2pruzc] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:14:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3v2pruzc
2025-07-14 19:14:33 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:14:33 [clientInboundChannel-360] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3v2pruzc
2025-07-14 19:14:33 [clientOutboundChannel-85] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3v2pruzc}], simpSessionId=3v2pruzc}]
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:14:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497074198", parameters={masked}
2025-07-14 19:14:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:14:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497074198
2025-07-14 19:14:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/100/cj1lpyez/websocket", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/100/cj1lpyez/websocket
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cj1lpyez]
2025-07-14 19:14:34 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 19:14:34 [clientInboundChannel-363] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=cj1lpyez
2025-07-14 19:14:34 [clientInboundChannel-366] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=cj1lpyez
2025-07-14 19:14:34 [clientInboundChannel-369] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=cj1lpyez
2025-07-14 19:14:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497074237", parameters={masked}
2025-07-14 19:14:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:14:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497074237
2025-07-14 19:14:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/964/yfwej1zs/websocket", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:14:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/964/yfwej1zs/websocket
2025-07-14 19:14:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:14:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yfwej1zs]
2025-07-14 19:14:34 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:14:34 [clientInboundChannel-372] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yfwej1zs
2025-07-14 19:14:34 [clientInboundChannel-375] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yfwej1zs
2025-07-14 19:14:34 [clientInboundChannel-378] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yfwej1zs
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:14:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:14:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:14:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:14:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:14:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:14:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:14:41 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3v2pruzc, jh4oxf03]
2025-07-14 19:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cj1lpyez] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cj1lpyez
2025-07-14 19:17:11 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:17:11 [clientInboundChannel-381] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cj1lpyez
2025-07-14 19:17:11 [clientOutboundChannel-88] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cj1lpyez}], simpSessionId=cj1lpyez}]
2025-07-14 19:17:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yfwej1zs] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:17:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yfwej1zs
2025-07-14 19:17:11 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:17:11 [clientInboundChannel-384] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yfwej1zs
2025-07-14 19:17:11 [clientOutboundChannel-89] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yfwej1zs}], simpSessionId=yfwej1zs}]
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497232221", parameters={masked}
2025-07-14 19:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497232221
2025-07-14 19:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/417/lhn2mohx/websocket", parameters={}
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/417/lhn2mohx/websocket
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lhn2mohx]
2025-07-14 19:17:12 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 19:17:12 [clientInboundChannel-387] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=lhn2mohx
2025-07-14 19:17:12 [clientInboundChannel-390] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=lhn2mohx
2025-07-14 19:17:12 [clientInboundChannel-393] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=lhn2mohx
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497232314", parameters={masked}
2025-07-14 19:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497232314
2025-07-14 19:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/481/sboxhgt3/websocket", parameters={}
2025-07-14 19:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/481/sboxhgt3/websocket
2025-07-14 19:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sboxhgt3]
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:12 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:17:12 [clientInboundChannel-396] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=sboxhgt3
2025-07-14 19:17:12 [clientInboundChannel-399] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=sboxhgt3
2025-07-14 19:17:12 [clientInboundChannel-402] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=sboxhgt3
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:17:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:17:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:17:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:21 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [yfwej1zs, cj1lpyez]
2025-07-14 19:17:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lhn2mohx] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:17:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lhn2mohx
2025-07-14 19:17:51 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:17:51 [clientInboundChannel-405] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lhn2mohx
2025-07-14 19:17:51 [clientOutboundChannel-92] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=lhn2mohx}], simpSessionId=lhn2mohx}]
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497271406", parameters={masked}
2025-07-14 19:17:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497271406
2025-07-14 19:17:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/443/gkerqdcq/websocket", parameters={}
2025-07-14 19:17:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/443/gkerqdcq/websocket
2025-07-14 19:17:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:17:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gkerqdcq]
2025-07-14 19:17:51 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09454159576
2025-07-14 19:17:51 [clientInboundChannel-408] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=gkerqdcq
2025-07-14 19:17:51 [clientInboundChannel-411] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=gkerqdcq
2025-07-14 19:17:51 [clientInboundChannel-382] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=gkerqdcq
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:17:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/1", parameters={}
2025-07-14 19:17:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:17:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sboxhgt3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:17:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sboxhgt3
2025-07-14 19:17:52 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:17:52 [clientInboundChannel-383] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sboxhgt3
2025-07-14 19:17:52 [clientOutboundChannel-94] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sboxhgt3}], simpSessionId=sboxhgt3}]
2025-07-14 19:17:52 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497272967", parameters={masked}
2025-07-14 19:17:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497272967
2025-07-14 19:17:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/250/ysvtqi4o/websocket", parameters={}
2025-07-14 19:17:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:17:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/250/ysvtqi4o/websocket
2025-07-14 19:17:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:17:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ysvtqi4o]
2025-07-14 19:17:53 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:17:53 [clientInboundChannel-388] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ysvtqi4o
2025-07-14 19:17:53 [clientInboundChannel-391] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ysvtqi4o
2025-07-14 19:17:53 [clientInboundChannel-390] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ysvtqi4o
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:17:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:17:53 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:17:56 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [lhn2mohx]
2025-07-14 19:18:01 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [sboxhgt3]
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 19:18:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=1, phoneNumber= (truncated)...]
2025-07-14 19:18:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=1&participantId=2", parameters={masked}
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:18:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:18:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:18:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:18:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:18:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:18:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gkerqdcq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:18:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gkerqdcq
2025-07-14 19:18:29 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:18:29 [clientInboundChannel-413] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gkerqdcq
2025-07-14 19:18:29 [clientOutboundChannel-96] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gkerqdcq}], simpSessionId=gkerqdcq}]
2025-07-14 19:18:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ysvtqi4o] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:18:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ysvtqi4o
2025-07-14 19:18:30 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:18:30 [clientInboundChannel-416] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ysvtqi4o
2025-07-14 19:18:30 [clientOutboundChannel-97] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ysvtqi4o}], simpSessionId=ysvtqi4o}]
2025-07-14 19:18:36 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ysvtqi4o, gkerqdcq]
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:22:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497526411", parameters={masked}
2025-07-14 19:22:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:22:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497526411
2025-07-14 19:22:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/303/nrifocfa/websocket", parameters={}
2025-07-14 19:22:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:22:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/303/nrifocfa/websocket
2025-07-14 19:22:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:22:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nrifocfa]
2025-07-14 19:22:06 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:22:06 [clientInboundChannel-419] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nrifocfa
2025-07-14 19:22:06 [clientInboundChannel-422] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=nrifocfa
2025-07-14 19:22:06 [clientInboundChannel-425] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=nrifocfa
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:22:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:22:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:22:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:22:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:22:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nrifocfa] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:22:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nrifocfa
2025-07-14 19:22:35 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:22:35 [clientInboundChannel-428] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nrifocfa
2025-07-14 19:22:35 [clientOutboundChannel-99] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nrifocfa}], simpSessionId=nrifocfa}]
2025-07-14 19:22:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:22:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497555778", parameters={masked}
2025-07-14 19:22:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:22:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497555778
2025-07-14 19:22:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/272/xfxmtkht/websocket", parameters={}
2025-07-14 19:22:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:22:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/272/xfxmtkht/websocket
2025-07-14 19:22:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:22:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xfxmtkht]
2025-07-14 19:22:35 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:22:35 [clientInboundChannel-431] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xfxmtkht
2025-07-14 19:22:35 [clientInboundChannel-434] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xfxmtkht
2025-07-14 19:22:35 [clientInboundChannel-437] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xfxmtkht
2025-07-14 19:22:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:22:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:22:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:22:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:22:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:22:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:22:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:22:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xfxmtkht] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:22:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xfxmtkht
2025-07-14 19:22:39 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:22:39 [clientInboundChannel-440] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xfxmtkht
2025-07-14 19:22:39 [clientOutboundChannel-101] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xfxmtkht}], simpSessionId=xfxmtkht}]
2025-07-14 19:22:41 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nrifocfa]
2025-07-14 19:22:46 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xfxmtkht]
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#register(RegisterRequest)
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [RegisterRequest(phoneNumber=09421050124, firstName=Test User , lastName=1, password=apple671@)]
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.phone_number=? 
    limit
        ?
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (created_at, last_name, name, password_hash, phone_number, profile_photo_url, status) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=User registered successfully, data=AuthResponse(token=eyJhbGciOiJI (truncated)...]
2025-07-14 19:23:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497596687", parameters={masked}
2025-07-14 19:23:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:23:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497596687
2025-07-14 19:23:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/620/i2jmozwm/websocket", parameters={}
2025-07-14 19:23:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:23:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/620/i2jmozwm/websocket
2025-07-14 19:23:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:23:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i2jmozwm]
2025-07-14 19:23:16 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:23:16 [clientInboundChannel-443] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=i2jmozwm
2025-07-14 19:23:16 [clientInboundChannel-446] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=i2jmozwm
2025-07-14 19:23:16 [clientInboundChannel-449] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=i2jmozwm
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:23:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:23:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#register(RegisterRequest)
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [RegisterRequest(phoneNumber=09421050123, firstName=Test User, lastName=2, password=apple671@)]
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.phone_number=? 
    limit
        ?
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (created_at, last_name, name, password_hash, phone_number, profile_photo_url, status) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=User registered successfully, data=AuthResponse(token=eyJhbGciOiJI (truncated)...]
2025-07-14 19:23:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497617624", parameters={masked}
2025-07-14 19:23:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:23:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497617624
2025-07-14 19:23:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/679/a2twfpac/websocket", parameters={}
2025-07-14 19:23:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:23:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/679/a2twfpac/websocket
2025-07-14 19:23:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:23:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=a2twfpac]
2025-07-14 19:23:37 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050123
2025-07-14 19:23:37 [clientInboundChannel-452] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=a2twfpac
2025-07-14 19:23:37 [clientInboundChannel-455] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=a2twfpac
2025-07-14 19:23:37 [clientInboundChannel-458] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=a2twfpac
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:23:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:23:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:23:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:23:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:23:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:23:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:23:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=test", parameters={masked}
2025-07-14 19:23:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:23:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:23:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:23:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:23:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:24:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:24:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:24:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:24:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=4&participantId=3", parameters={masked}
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:24:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:24:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:24:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=a2twfpac] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a2twfpac
2025-07-14 19:24:31 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:24:31 [clientInboundChannel-461] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a2twfpac
2025-07-14 19:24:31 [clientOutboundChannel-104] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=a2twfpac}], simpSessionId=a2twfpac}]
2025-07-14 19:24:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i2jmozwm] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:24:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i2jmozwm
2025-07-14 19:24:31 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:24:31 [clientInboundChannel-464] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i2jmozwm
2025-07-14 19:24:31 [clientOutboundChannel-105] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=i2jmozwm}], simpSessionId=i2jmozwm}]
2025-07-14 19:24:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497671831", parameters={masked}
2025-07-14 19:24:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:24:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497671831
2025-07-14 19:24:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/810/44iebsrl/websocket", parameters={}
2025-07-14 19:24:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:24:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/810/44iebsrl/websocket
2025-07-14 19:24:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:24:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=44iebsrl]
2025-07-14 19:24:31 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050123
2025-07-14 19:24:31 [clientInboundChannel-467] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=44iebsrl
2025-07-14 19:24:31 [clientInboundChannel-470] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=44iebsrl
2025-07-14 19:24:31 [clientInboundChannel-473] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=44iebsrl
2025-07-14 19:24:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497671865", parameters={masked}
2025-07-14 19:24:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:24:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497671865
2025-07-14 19:24:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/839/nly1ygzr/websocket", parameters={}
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/839/nly1ygzr/websocket
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:24:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nly1ygzr]
2025-07-14 19:24:31 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050123
2025-07-14 19:24:31 [clientInboundChannel-476] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=nly1ygzr
2025-07-14 19:24:31 [clientInboundChannel-479] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=nly1ygzr
2025-07-14 19:24:31 [clientInboundChannel-482] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=nly1ygzr
2025-07-14 19:24:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:24:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:24:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:24:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:24:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:24:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:24:33 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/4", parameters={}
2025-07-14 19:24:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:24:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:24:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:24:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:35 [clientInboundChannel-456] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-3 session=nly1ygzr
2025-07-14 19:24:35 [clientInboundChannel-453] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usernly1ygzr subscriptionId=sub-2 session=nly1ygzr payload=byte[0]
2025-07-14 19:24:35 [clientInboundChannel-457] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-4 session=nly1ygzr
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:35 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:36 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:36 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:36 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:39 [clientInboundChannel-462] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-3 session=44iebsrl
2025-07-14 19:24:39 [clientInboundChannel-485] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user44iebsrl subscriptionId=sub-2 session=44iebsrl payload=byte[0]
2025-07-14 19:24:39 [clientInboundChannel-465] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-4 session=44iebsrl
2025-07-14 19:24:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:24:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:41 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [i2jmozwm, a2twfpac]
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":53,"senderId":4,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/53/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=80, conversat (truncated)...]
2025-07-14 19:24:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":53,"senderId":4,"content":"What up","messageType":"TEXT","status":"SENT","sentAt": (truncated)..."]
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/53/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=81, conversat (truncated)...]
2025-07-14 19:24:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:58 [clientInboundChannel-468] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=44iebsrl
2025-07-14 19:24:58 [clientInboundChannel-468] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-6 session=44iebsrl
2025-07-14 19:24:58 [clientInboundChannel-467] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=44iebsrl
2025-07-14 19:24:58 [clientInboundChannel-469] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user44iebsrl subscriptionId=sub-5 session=44iebsrl payload=byte[0]
2025-07-14 19:24:58 [clientInboundChannel-474] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-7 session=44iebsrl
2025-07-14 19:24:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:24:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:24:59 [clientInboundChannel-482] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=44iebsrl
2025-07-14 19:24:59 [clientInboundChannel-456] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-9 session=44iebsrl
2025-07-14 19:24:59 [clientInboundChannel-479] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=44iebsrl
2025-07-14 19:24:59 [clientInboundChannel-454] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user44iebsrl subscriptionId=sub-8 session=44iebsrl payload=byte[0]
2025-07-14 19:24:59 [clientInboundChannel-482] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/53/messages id=sub-10 session=44iebsrl
2025-07-14 19:24:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:24:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:25:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:25:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:25:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:25:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:25:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/53?userId=4", parameters={masked}
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:25:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:25:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=81, co (truncated)...]
2025-07-14 19:25:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nly1ygzr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:25:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nly1ygzr
2025-07-14 19:25:14 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:25:14 [clientInboundChannel-466] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nly1ygzr
2025-07-14 19:25:14 [clientOutboundChannel-116] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nly1ygzr}], simpSessionId=nly1ygzr}]
2025-07-14 19:25:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=44iebsrl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:25:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 44iebsrl
2025-07-14 19:25:15 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:25:15 [clientInboundChannel-468] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=44iebsrl
2025-07-14 19:25:15 [clientOutboundChannel-117] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=44iebsrl}], simpSessionId=44iebsrl}]
2025-07-14 19:25:21 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [nly1ygzr, 44iebsrl]
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:50 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497750263", parameters={masked}
2025-07-14 19:25:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:25:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497750263
2025-07-14 19:25:50 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/470/vblzofzk/websocket", parameters={}
2025-07-14 19:25:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:25:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/470/vblzofzk/websocket
2025-07-14 19:25:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:25:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vblzofzk]
2025-07-14 19:25:50 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:25:50 [clientInboundChannel-487] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vblzofzk
2025-07-14 19:25:50 [clientInboundChannel-490] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=vblzofzk
2025-07-14 19:25:50 [clientInboundChannel-493] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=vblzofzk
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:25:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:25:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09 45415 9576, password=apple671@)]
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 19:25:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 19:26:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 19:26:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 19:26:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:26:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:26:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09454159576, password=apple671@)]
2025-07-14 19:26:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.btalk.exceptions.CustomExceptionHandler#handleBadCredentialsException(BadCredentialsException)
2025-07-14 19:26:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=Invalid credentials, data=null)]
2025-07-14 19:26:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.authentication.BadCredentialsException: Invalid credentials]
2025-07-14 19:26:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-07-14 19:26:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:26:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:26:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 19:26:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 19:26:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497786128", parameters={masked}
2025-07-14 19:26:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:26:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497786128
2025-07-14 19:26:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/145/2xmac1zp/websocket", parameters={}
2025-07-14 19:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/145/2xmac1zp/websocket
2025-07-14 19:26:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2xmac1zp]
2025-07-14 19:26:26 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:26:26 [clientInboundChannel-496] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2xmac1zp
2025-07-14 19:26:26 [clientInboundChannel-499] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=2xmac1zp
2025-07-14 19:26:26 [clientInboundChannel-502] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=2xmac1zp
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:26:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-14 19:26:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Jt", parameters={masked}
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-14 19:26:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:26:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vblzofzk] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:26:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vblzofzk
2025-07-14 19:26:47 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:26:47 [clientInboundChannel-505] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vblzofzk
2025-07-14 19:26:47 [clientOutboundChannel-120] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=vblzofzk}], simpSessionId=vblzofzk}]
2025-07-14 19:26:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497807794", parameters={masked}
2025-07-14 19:26:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:26:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497807794
2025-07-14 19:26:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/322/wzac3k2f/websocket", parameters={}
2025-07-14 19:26:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:26:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/322/wzac3k2f/websocket
2025-07-14 19:26:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:26:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wzac3k2f]
2025-07-14 19:26:47 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:26:47 [clientInboundChannel-508] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=wzac3k2f
2025-07-14 19:26:47 [clientInboundChannel-511] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wzac3k2f
2025-07-14 19:26:47 [clientInboundChannel-514] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wzac3k2f
2025-07-14 19:26:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:26:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:26:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:26:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:26:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:26:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:26:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Ht", parameters={masked}
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:26:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:26:56 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [vblzofzk]
2025-07-14 19:26:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:26:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wzac3k2f] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:27:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wzac3k2f
2025-07-14 19:27:02 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:27:02 [clientInboundChannel-517] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wzac3k2f
2025-07-14 19:27:02 [clientOutboundChannel-122] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=wzac3k2f}], simpSessionId=wzac3k2f}]
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497823480", parameters={masked}
2025-07-14 19:27:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497823480
2025-07-14 19:27:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/020/x3lrkb1q/websocket", parameters={}
2025-07-14 19:27:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/020/x3lrkb1q/websocket
2025-07-14 19:27:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:27:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=x3lrkb1q]
2025-07-14 19:27:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:27:03 [clientInboundChannel-520] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=x3lrkb1q
2025-07-14 19:27:03 [clientInboundChannel-523] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=x3lrkb1q
2025-07-14 19:27:03 [clientInboundChannel-526] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=x3lrkb1q
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:27:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:27:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:27:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=x3lrkb1q] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:27:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session x3lrkb1q
2025-07-14 19:27:08 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:27:08 [clientInboundChannel-497] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=x3lrkb1q
2025-07-14 19:27:08 [clientOutboundChannel-124] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=x3lrkb1q}], simpSessionId=x3lrkb1q}]
2025-07-14 19:27:11 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wzac3k2f]
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:16 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [x3lrkb1q]
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050124, password=apple671@)]
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 19:27:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497836673", parameters={masked}
2025-07-14 19:27:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497836673
2025-07-14 19:27:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/599/bha1mch0/websocket", parameters={}
2025-07-14 19:27:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/599/bha1mch0/websocket
2025-07-14 19:27:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:27:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bha1mch0]
2025-07-14 19:27:16 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:27:16 [clientInboundChannel-500] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bha1mch0
2025-07-14 19:27:16 [clientInboundChannel-502] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bha1mch0
2025-07-14 19:27:16 [clientInboundChannel-505] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bha1mch0
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:27:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:27:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:24 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:27:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=3&participantId=2", parameters={masked}
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:27:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:27:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2xmac1zp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:27:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2xmac1zp
2025-07-14 19:27:50 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:27:50 [clientInboundChannel-528] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2xmac1zp
2025-07-14 19:27:50 [clientOutboundChannel-126] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2xmac1zp}], simpSessionId=2xmac1zp}]
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752497870347", parameters={masked}
2025-07-14 19:27:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752497870347
2025-07-14 19:27:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/358/zemtq1rj/websocket", parameters={}
2025-07-14 19:27:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:27:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/358/zemtq1rj/websocket
2025-07-14 19:27:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:27:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zemtq1rj]
2025-07-14 19:27:50 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:27:50 [clientInboundChannel-531] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=zemtq1rj
2025-07-14 19:27:50 [clientInboundChannel-534] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zemtq1rj
2025-07-14 19:27:50 [clientInboundChannel-537] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zemtq1rj
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:27:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:27:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:27:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:27:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:52 [clientInboundChannel-518] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userzemtq1rj subscriptionId=sub-2 session=zemtq1rj payload=byte[0]
2025-07-14 19:27:52 [clientInboundChannel-521] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-3 session=zemtq1rj
2025-07-14 19:27:52 [clientInboundChannel-524] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-4 session=zemtq1rj
2025-07-14 19:27:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:27:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:27:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:27:53 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:27:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:27:53 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:27:53 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:27:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:27:56 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2xmac1zp]
2025-07-14 19:28:03 [clientInboundChannel-542] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-3 session=bha1mch0
2025-07-14 19:28:03 [clientInboundChannel-540] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userbha1mch0 subscriptionId=sub-2 session=bha1mch0 payload=byte[0]
2025-07-14 19:28:03 [clientInboundChannel-497] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-4 session=bha1mch0
2025-07-14 19:28:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:28:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:28:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:28:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:28:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:28:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:28:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:28:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:28:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:28:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:28:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:28:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:28:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":54,"senderId":3,"content":"Hello","messageType":"TEXT","status":"SENT","sentAt":nu (truncated)..."]
2025-07-14 19:28:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:28:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:28:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:28:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:28:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/54/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=82, conversat (truncated)...]
2025-07-14 19:28:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:28:36 [MessageBroker-13] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 56 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(56)-CONNECTED(56)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 25, active threads = 0, queued tasks = 0, completed tasks = 798], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 131], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 947]
2025-07-14 19:30:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bha1mch0] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:30:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zemtq1rj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:30:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bha1mch0
2025-07-14 19:30:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zemtq1rj
2025-07-14 19:30:42 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:30:42 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:30:42 [clientInboundChannel-546] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zemtq1rj
2025-07-14 19:30:42 [clientInboundChannel-545] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bha1mch0
2025-07-14 19:30:42 [clientOutboundChannel-132] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bha1mch0}], simpSessionId=bha1mch0}]
2025-07-14 19:30:42 [clientOutboundChannel-133] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=zemtq1rj}], simpSessionId=zemtq1rj}]
2025-07-14 19:30:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:30:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498043947", parameters={masked}
2025-07-14 19:30:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:30:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498043947
2025-07-14 19:30:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:30:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/880/tvvojp4n/websocket", parameters={}
2025-07-14 19:30:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:30:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/880/tvvojp4n/websocket
2025-07-14 19:30:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:30:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tvvojp4n]
2025-07-14 19:30:43 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:30:43 [clientInboundChannel-550] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=tvvojp4n
2025-07-14 19:30:43 [clientInboundChannel-553] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=tvvojp4n
2025-07-14 19:30:43 [clientInboundChannel-556] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=tvvojp4n
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:30:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:30:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:30:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:30:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:30:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:30:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:30:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:30:51 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [zemtq1rj, bha1mch0]
2025-07-14 19:31:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tvvojp4n] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:31:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tvvojp4n
2025-07-14 19:31:23 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:31:23 [clientInboundChannel-559] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tvvojp4n
2025-07-14 19:31:23 [clientOutboundChannel-135] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=tvvojp4n}], simpSessionId=tvvojp4n}]
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498084054", parameters={masked}
2025-07-14 19:31:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:31:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498084054
2025-07-14 19:31:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/795/3cdihpww/websocket", parameters={}
2025-07-14 19:31:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:31:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/795/3cdihpww/websocket
2025-07-14 19:31:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:31:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3cdihpww]
2025-07-14 19:31:24 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:31:24 [clientInboundChannel-562] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3cdihpww
2025-07-14 19:31:24 [clientInboundChannel-565] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3cdihpww
2025-07-14 19:31:24 [clientInboundChannel-568] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3cdihpww
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498084136", parameters={masked}
2025-07-14 19:31:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:31:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498084136
2025-07-14 19:31:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/319/dkubyqwv/websocket", parameters={}
2025-07-14 19:31:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:31:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/319/dkubyqwv/websocket
2025-07-14 19:31:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:31:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dkubyqwv]
2025-07-14 19:31:24 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:31:24 [clientInboundChannel-571] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dkubyqwv
2025-07-14 19:31:24 [clientInboundChannel-543] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=dkubyqwv
2025-07-14 19:31:24 [clientInboundChannel-574] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=dkubyqwv
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:31:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:31:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:31:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:31:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:31:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:31 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [tvvojp4n]
2025-07-14 19:31:31 [clientInboundChannel-545] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-3 session=dkubyqwv
2025-07-14 19:31:31 [clientInboundChannel-546] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-2 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:31 [clientInboundChannel-552] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-4 session=dkubyqwv
2025-07-14 19:31:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:33 [clientInboundChannel-557] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-556] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-558] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-5 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:33 [clientInboundChannel-560] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-6 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-565] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-7 session=dkubyqwv
2025-07-14 19:31:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:33 [clientInboundChannel-572] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-571] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-551] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-9 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-546] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-10 session=dkubyqwv
2025-07-14 19:31:33 [clientInboundChannel-547] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-8 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:34 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-552] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-9 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-562] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-11 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:34 [clientInboundChannel-562] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-12 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-556] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-13 session=dkubyqwv
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:34 [clientInboundChannel-560] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-11 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-560] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-15 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-565] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-12 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-572] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-14 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:34 [clientInboundChannel-565] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-16 session=dkubyqwv
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:34 [clientInboundChannel-546] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-14 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-561] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-15 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-566] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-18 session=dkubyqwv
2025-07-14 19:31:34 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-17 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:34 [clientInboundChannel-566] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-19 session=dkubyqwv
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:35 [clientInboundChannel-568] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-17 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-560] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-18 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-572] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-21 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-568] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-20 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:35 [clientInboundChannel-560] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-22 session=dkubyqwv
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:35 [clientInboundChannel-553] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-20 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-551] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-21 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-551] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-24 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-559] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-23 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:35 [clientInboundChannel-551] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-25 session=dkubyqwv
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:35 [clientInboundChannel-566] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-23 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-544] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-27 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-573] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-24 session=dkubyqwv
2025-07-14 19:31:35 [clientInboundChannel-568] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-26 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:35 [clientInboundChannel-573] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-28 session=dkubyqwv
2025-07-14 19:31:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:36 [clientInboundChannel-545] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-27 session=dkubyqwv
2025-07-14 19:31:36 [clientInboundChannel-547] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-30 session=dkubyqwv
2025-07-14 19:31:36 [clientInboundChannel-553] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-29 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:36 [clientInboundChannel-554] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-26 session=dkubyqwv
2025-07-14 19:31:36 [clientInboundChannel-562] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-31 session=dkubyqwv
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:36 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:36 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:37 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:37 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:38 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-29 session=dkubyqwv
2025-07-14 19:31:38 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-30 session=dkubyqwv
2025-07-14 19:31:38 [clientInboundChannel-570] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-33 session=dkubyqwv
2025-07-14 19:31:38 [clientInboundChannel-566] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-34 session=dkubyqwv
2025-07-14 19:31:38 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-32 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:38 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:42 [clientInboundChannel-550] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-3 session=3cdihpww
2025-07-14 19:31:42 [clientInboundChannel-573] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user3cdihpww subscriptionId=sub-2 session=3cdihpww payload=byte[0]
2025-07-14 19:31:42 [clientInboundChannel-551] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-4 session=3cdihpww
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=3", parameters={masked}
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:44 [clientInboundChannel-554] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-33 session=dkubyqwv
2025-07-14 19:31:44 [clientInboundChannel-563] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-32 session=dkubyqwv
2025-07-14 19:31:44 [clientInboundChannel-556] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-36 session=dkubyqwv
2025-07-14 19:31:44 [clientInboundChannel-558] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/54/messages id=sub-37 session=dkubyqwv
2025-07-14 19:31:44 [clientInboundChannel-554] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userdkubyqwv subscriptionId=sub-35 session=dkubyqwv payload=byte[0]
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:31:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:31:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/54?userId=2", parameters={masked}
2025-07-14 19:31:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=82, co (truncated)...]
2025-07-14 19:31:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dkubyqwv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:32:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dkubyqwv
2025-07-14 19:32:16 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:32:16 [clientInboundChannel-574] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dkubyqwv
2025-07-14 19:32:16 [clientOutboundChannel-138] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dkubyqwv}], simpSessionId=dkubyqwv}]
2025-07-14 19:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498136813", parameters={masked}
2025-07-14 19:32:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:32:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498136813
2025-07-14 19:32:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/251/0hup1mpv/websocket", parameters={}
2025-07-14 19:32:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:32:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/251/0hup1mpv/websocket
2025-07-14 19:32:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:32:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0hup1mpv]
2025-07-14 19:32:16 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:32:16 [clientInboundChannel-570] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0hup1mpv
2025-07-14 19:32:16 [clientInboundChannel-555] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0hup1mpv
2025-07-14 19:32:16 [clientInboundChannel-550] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0hup1mpv
2025-07-14 19:32:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:32:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:32:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:32:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:32:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3cdihpww] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:32:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3cdihpww
2025-07-14 19:32:18 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:32:18 [clientInboundChannel-559] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3cdihpww
2025-07-14 19:32:18 [clientOutboundChannel-140] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3cdihpww}], simpSessionId=3cdihpww}]
2025-07-14 19:32:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498138171", parameters={masked}
2025-07-14 19:32:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:32:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498138171
2025-07-14 19:32:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/430/pek3kgap/websocket", parameters={}
2025-07-14 19:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/430/pek3kgap/websocket
2025-07-14 19:32:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pek3kgap]
2025-07-14 19:32:18 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:32:18 [clientInboundChannel-553] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pek3kgap
2025-07-14 19:32:18 [clientInboundChannel-552] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=pek3kgap
2025-07-14 19:32:18 [clientInboundChannel-563] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=pek3kgap
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:32:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:26 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [dkubyqwv, 3cdihpww]
2025-07-14 19:32:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Ch", parameters={masked}
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-14 19:32:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 19:32:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:32:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:32:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:32:48 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:32:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 19:32:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:32:48 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:32:48 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:32:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0hup1mpv] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:33:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0hup1mpv
2025-07-14 19:33:56 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:33:56 [clientInboundChannel-577] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0hup1mpv
2025-07-14 19:33:56 [clientOutboundChannel-142] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=0hup1mpv}], simpSessionId=0hup1mpv}]
2025-07-14 19:33:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pek3kgap] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:33:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pek3kgap
2025-07-14 19:33:56 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:33:56 [clientInboundChannel-580] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pek3kgap
2025-07-14 19:33:56 [clientOutboundChannel-143] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pek3kgap}], simpSessionId=pek3kgap}]
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498237463", parameters={masked}
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498237463
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/739/24zjd2tz/websocket", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:33:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/739/24zjd2tz/websocket
2025-07-14 19:33:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:33:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=24zjd2tz]
2025-07-14 19:33:57 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:33:57 [clientInboundChannel-583] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=24zjd2tz
2025-07-14 19:33:57 [clientInboundChannel-586] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=24zjd2tz
2025-07-14 19:33:57 [clientInboundChannel-589] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=24zjd2tz
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:33:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498237562", parameters={masked}
2025-07-14 19:33:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:33:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498237562
2025-07-14 19:33:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/697/qekehbm3/websocket", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/697/qekehbm3/websocket
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:33:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qekehbm3]
2025-07-14 19:33:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:33:57 [clientInboundChannel-592] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qekehbm3
2025-07-14 19:33:57 [clientInboundChannel-595] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qekehbm3
2025-07-14 19:33:57 [clientInboundChannel-598] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qekehbm3
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:33:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:33:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:33:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:33:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:33:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:33:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:33:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:33:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:33:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:33:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:33:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:33:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:33:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:06 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [pek3kgap, 0hup1mpv]
2025-07-14 19:34:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=24zjd2tz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qekehbm3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qekehbm3
2025-07-14 19:34:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 24zjd2tz
2025-07-14 19:34:25 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:25 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:25 [clientInboundChannel-602] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qekehbm3
2025-07-14 19:34:25 [clientInboundChannel-604] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=24zjd2tz
2025-07-14 19:34:25 [clientOutboundChannel-146] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qekehbm3}], simpSessionId=qekehbm3}]
2025-07-14 19:34:25 [clientOutboundChannel-147] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=24zjd2tz}], simpSessionId=24zjd2tz}]
2025-07-14 19:34:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498266664", parameters={masked}
2025-07-14 19:34:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498266664
2025-07-14 19:34:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/668/a3ipfvmz/websocket", parameters={}
2025-07-14 19:34:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/668/a3ipfvmz/websocket
2025-07-14 19:34:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=a3ipfvmz]
2025-07-14 19:34:26 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:34:26 [clientInboundChannel-607] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=a3ipfvmz
2025-07-14 19:34:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498266681", parameters={masked}
2025-07-14 19:34:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498266681
2025-07-14 19:34:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:26 [clientInboundChannel-578] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=a3ipfvmz
2025-07-14 19:34:26 [clientInboundChannel-581] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=a3ipfvmz
2025-07-14 19:34:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/868/2zlg4taz/websocket", parameters={}
2025-07-14 19:34:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/868/2zlg4taz/websocket
2025-07-14 19:34:26 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2zlg4taz]
2025-07-14 19:34:26 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:34:26 [clientInboundChannel-584] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2zlg4taz
2025-07-14 19:34:26 [clientInboundChannel-585] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=2zlg4taz
2025-07-14 19:34:26 [clientInboundChannel-586] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=2zlg4taz
2025-07-14 19:34:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:34:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:31 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [24zjd2tz, qekehbm3]
2025-07-14 19:34:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2zlg4taz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2zlg4taz
2025-07-14 19:34:41 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:41 [clientInboundChannel-591] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2zlg4taz
2025-07-14 19:34:41 [clientOutboundChannel-150] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2zlg4taz}], simpSessionId=2zlg4taz}]
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498281401", parameters={masked}
2025-07-14 19:34:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498281401
2025-07-14 19:34:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/461/5uimbj00/websocket", parameters={}
2025-07-14 19:34:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/461/5uimbj00/websocket
2025-07-14 19:34:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5uimbj00]
2025-07-14 19:34:41 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:34:41 [clientInboundChannel-596] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5uimbj00
2025-07-14 19:34:41 [clientInboundChannel-599] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5uimbj00
2025-07-14 19:34:41 [clientInboundChannel-600] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5uimbj00
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:34:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=a3ipfvmz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a3ipfvmz
2025-07-14 19:34:42 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:42 [clientInboundChannel-602] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a3ipfvmz
2025-07-14 19:34:42 [clientOutboundChannel-152] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=a3ipfvmz}], simpSessionId=a3ipfvmz}]
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498282337", parameters={masked}
2025-07-14 19:34:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498282337
2025-07-14 19:34:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/804/v300kcru/websocket", parameters={}
2025-07-14 19:34:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/804/v300kcru/websocket
2025-07-14 19:34:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=v300kcru]
2025-07-14 19:34:42 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:34:42 [clientInboundChannel-606] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=v300kcru
2025-07-14 19:34:42 [clientInboundChannel-578] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=v300kcru
2025-07-14 19:34:42 [clientInboundChannel-580] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=v300kcru
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=v300kcru] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session v300kcru
2025-07-14 19:34:45 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:45 [clientInboundChannel-587] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=v300kcru
2025-07-14 19:34:45 [clientOutboundChannel-154] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=v300kcru}], simpSessionId=v300kcru}]
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498286147", parameters={masked}
2025-07-14 19:34:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498286147
2025-07-14 19:34:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/694/d4g2g4f3/websocket", parameters={}
2025-07-14 19:34:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/694/d4g2g4f3/websocket
2025-07-14 19:34:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d4g2g4f3]
2025-07-14 19:34:46 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:34:46 [clientInboundChannel-585] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=d4g2g4f3
2025-07-14 19:34:46 [clientInboundChannel-589] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=d4g2g4f3
2025-07-14 19:34:46 [clientInboundChannel-593] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=d4g2g4f3
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:46 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2zlg4taz]
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d4g2g4f3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:34:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d4g2g4f3
2025-07-14 19:34:48 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:34:48 [clientInboundChannel-597] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d4g2g4f3
2025-07-14 19:34:48 [clientOutboundChannel-156] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=d4g2g4f3}], simpSessionId=d4g2g4f3}]
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498288276", parameters={masked}
2025-07-14 19:34:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498288276
2025-07-14 19:34:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/395/qvjzi0xh/websocket", parameters={}
2025-07-14 19:34:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:34:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/395/qvjzi0xh/websocket
2025-07-14 19:34:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:34:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qvjzi0xh]
2025-07-14 19:34:48 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:34:48 [clientInboundChannel-603] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qvjzi0xh
2025-07-14 19:34:48 [clientInboundChannel-600] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qvjzi0xh
2025-07-14 19:34:48 [clientInboundChannel-576] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qvjzi0xh
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:34:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:34:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:34:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:34:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:34:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:34:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:34:51 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [a3ipfvmz, v300kcru]
2025-07-14 19:34:56 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [d4g2g4f3]
2025-07-14 19:37:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5uimbj00] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:37:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5uimbj00
2025-07-14 19:37:28 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:37:28 [clientInboundChannel-609] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5uimbj00
2025-07-14 19:37:28 [clientOutboundChannel-158] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5uimbj00}], simpSessionId=5uimbj00}]
2025-07-14 19:37:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qvjzi0xh] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:37:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qvjzi0xh
2025-07-14 19:37:28 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:37:28 [clientInboundChannel-612] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qvjzi0xh
2025-07-14 19:37:28 [clientOutboundChannel-159] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qvjzi0xh}], simpSessionId=qvjzi0xh}]
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:37:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498449202", parameters={masked}
2025-07-14 19:37:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:37:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498449202
2025-07-14 19:37:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/068/at1hq2dq/websocket", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:37:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/068/at1hq2dq/websocket
2025-07-14 19:37:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:37:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=at1hq2dq]
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:37:29 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:37:29 [clientInboundChannel-615] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=at1hq2dq
2025-07-14 19:37:29 [clientInboundChannel-618] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=at1hq2dq
2025-07-14 19:37:29 [clientInboundChannel-621] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=at1hq2dq
2025-07-14 19:37:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498449247", parameters={masked}
2025-07-14 19:37:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:37:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498449247
2025-07-14 19:37:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/710/v1s5ikjr/websocket", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:37:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/710/v1s5ikjr/websocket
2025-07-14 19:37:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:37:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=v1s5ikjr]
2025-07-14 19:37:29 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:37:29 [clientInboundChannel-624] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=v1s5ikjr
2025-07-14 19:37:29 [clientInboundChannel-627] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=v1s5ikjr
2025-07-14 19:37:29 [clientInboundChannel-630] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=v1s5ikjr
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:37:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:37:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:37:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:37:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:37:36 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [qvjzi0xh, 5uimbj00]
2025-07-14 19:39:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=at1hq2dq] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:39:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session at1hq2dq
2025-07-14 19:39:28 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:39:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=v1s5ikjr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:39:28 [clientInboundChannel-633] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=at1hq2dq
2025-07-14 19:39:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session v1s5ikjr
2025-07-14 19:39:28 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:39:28 [clientOutboundChannel-162] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=at1hq2dq}], simpSessionId=at1hq2dq}]
2025-07-14 19:39:28 [clientInboundChannel-636] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=v1s5ikjr
2025-07-14 19:39:28 [clientOutboundChannel-163] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=v1s5ikjr}], simpSessionId=v1s5ikjr}]
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498569250", parameters={masked}
2025-07-14 19:39:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498569250
2025-07-14 19:39:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/190/t5pbbmsz/websocket", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/190/t5pbbmsz/websocket
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=t5pbbmsz]
2025-07-14 19:39:29 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:39:29 [clientInboundChannel-639] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=t5pbbmsz
2025-07-14 19:39:29 [clientInboundChannel-642] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=t5pbbmsz
2025-07-14 19:39:29 [clientInboundChannel-645] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=t5pbbmsz
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498569308", parameters={masked}
2025-07-14 19:39:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498569308
2025-07-14 19:39:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/076/aecpfq0d/websocket", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/076/aecpfq0d/websocket
2025-07-14 19:39:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:39:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=aecpfq0d]
2025-07-14 19:39:29 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:39:29 [clientInboundChannel-648] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=aecpfq0d
2025-07-14 19:39:29 [clientInboundChannel-651] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=aecpfq0d
2025-07-14 19:39:29 [clientInboundChannel-654] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=aecpfq0d
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:36 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [v1s5ikjr, at1hq2dq]
2025-07-14 19:39:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=t5pbbmsz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:39:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session t5pbbmsz
2025-07-14 19:39:37 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:39:37 [clientInboundChannel-657] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=t5pbbmsz
2025-07-14 19:39:37 [clientOutboundChannel-166] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=t5pbbmsz}], simpSessionId=t5pbbmsz}]
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:37 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498577320", parameters={masked}
2025-07-14 19:39:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498577320
2025-07-14 19:39:37 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/268/uq2imdbp/websocket", parameters={}
2025-07-14 19:39:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/268/uq2imdbp/websocket
2025-07-14 19:39:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:39:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uq2imdbp]
2025-07-14 19:39:37 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:39:37 [clientInboundChannel-660] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uq2imdbp
2025-07-14 19:39:37 [clientInboundChannel-663] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uq2imdbp
2025-07-14 19:39:37 [clientInboundChannel-634] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uq2imdbp
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:39:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:38 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=aecpfq0d] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:39:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session aecpfq0d
2025-07-14 19:39:38 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:39:38 [clientInboundChannel-636] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=aecpfq0d
2025-07-14 19:39:38 [clientOutboundChannel-168] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=aecpfq0d}], simpSessionId=aecpfq0d}]
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498579162", parameters={masked}
2025-07-14 19:39:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498579162
2025-07-14 19:39:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/916/qy32dmjg/websocket", parameters={}
2025-07-14 19:39:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:39:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/916/qy32dmjg/websocket
2025-07-14 19:39:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:39:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qy32dmjg]
2025-07-14 19:39:39 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:39:39 [clientInboundChannel-639] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=qy32dmjg
2025-07-14 19:39:39 [clientInboundChannel-644] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qy32dmjg
2025-07-14 19:39:39 [clientInboundChannel-645] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qy32dmjg
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:39:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:46 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [t5pbbmsz, aecpfq0d]
2025-07-14 19:39:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:39:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:39:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:39:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:39:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qy32dmjg] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:40:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qy32dmjg
2025-07-14 19:40:28 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:40:28 [clientInboundChannel-649] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qy32dmjg
2025-07-14 19:40:28 [clientOutboundChannel-170] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qy32dmjg}], simpSessionId=qy32dmjg}]
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498628516", parameters={masked}
2025-07-14 19:40:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:40:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498628516
2025-07-14 19:40:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/589/3sb2zvue/websocket", parameters={}
2025-07-14 19:40:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:40:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/589/3sb2zvue/websocket
2025-07-14 19:40:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:40:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3sb2zvue]
2025-07-14 19:40:28 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:40:28 [clientInboundChannel-652] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3sb2zvue
2025-07-14 19:40:28 [clientInboundChannel-654] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=3sb2zvue
2025-07-14 19:40:28 [clientInboundChannel-655] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=3sb2zvue
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:40:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:40:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:40:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:40:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:34 [clientInboundChannel-666] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user3sb2zvue subscriptionId=sub-2 session=3sb2zvue payload=byte[0]
2025-07-14 19:40:34 [clientInboundChannel-668] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/56/messages id=sub-3 session=3sb2zvue
2025-07-14 19:40:34 [clientInboundChannel-661] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/56/messages id=sub-4 session=3sb2zvue
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=3", parameters={masked}
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:40:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=3", parameters={masked}
2025-07-14 19:40:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:40:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=3", parameters={masked}
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[])]
2025-07-14 19:40:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:36 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qy32dmjg]
2025-07-14 19:40:37 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":56,"senderId":3,"content":"Helllo","messageType":"TEXT","status":"SENT","sentAt":n (truncated)..."]
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/56/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=83, conversat (truncated)...]
2025-07-14 19:40:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:43 [clientInboundChannel-674] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/56/messages id=sub-3 session=uq2imdbp
2025-07-14 19:40:43 [clientInboundChannel-672] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useruq2imdbp subscriptionId=sub-2 session=uq2imdbp payload=byte[0]
2025-07-14 19:40:43 [clientInboundChannel-677] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/56/messages id=sub-4 session=uq2imdbp
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=2", parameters={masked}
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=83, co (truncated)...]
2025-07-14 19:40:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=2", parameters={masked}
2025-07-14 19:40:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=83, co (truncated)...]
2025-07-14 19:40:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/56?userId=2", parameters={masked}
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessages(Long, Long)
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:40:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=[MessageDto(messageId=83, co (truncated)...]
2025-07-14 19:40:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:40:49 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:40:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-14 19:40:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-14 19:40:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":56,"senderId":2,"content":"You are my firend","messageType":"TEXT","status":"SENT" (truncated)..."]
2025-07-14 19:40:49 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=? 
        and p1_0.user_id=? 
    limit
        ?
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at) 
    values
        (?, ?, ?, ?, ?)
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/56/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=84, conversat (truncated)...]
2025-07-14 19:40:50 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3sb2zvue] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:45:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3sb2zvue
2025-07-14 19:45:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uq2imdbp] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:45:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uq2imdbp
2025-07-14 19:45:38 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:45:38 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:45:38 [clientInboundChannel-681] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3sb2zvue
2025-07-14 19:45:38 [clientInboundChannel-682] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uq2imdbp
2025-07-14 19:45:38 [clientOutboundChannel-178] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3sb2zvue}], simpSessionId=3sb2zvue}]
2025-07-14 19:45:38 [clientOutboundChannel-179] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=uq2imdbp}], simpSessionId=uq2imdbp}]
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:45:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498939164", parameters={masked}
2025-07-14 19:45:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:45:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498939164
2025-07-14 19:45:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/947/vtb5uxtl/websocket", parameters={}
2025-07-14 19:45:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:45:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/947/vtb5uxtl/websocket
2025-07-14 19:45:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:45:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vtb5uxtl]
2025-07-14 19:45:39 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:45:39 [clientInboundChannel-686] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vtb5uxtl
2025-07-14 19:45:39 [clientInboundChannel-689] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=vtb5uxtl
2025-07-14 19:45:39 [clientInboundChannel-692] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=vtb5uxtl
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:45:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752498939306", parameters={masked}
2025-07-14 19:45:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:45:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752498939306
2025-07-14 19:45:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/414/vehicd1u/websocket", parameters={}
2025-07-14 19:45:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:45:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/414/vehicd1u/websocket
2025-07-14 19:45:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:45:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vehicd1u]
2025-07-14 19:45:39 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:45:39 [clientInboundChannel-695] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vehicd1u
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:45:39 [clientInboundChannel-698] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=vehicd1u
2025-07-14 19:45:39 [clientInboundChannel-701] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=vehicd1u
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:45:39 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:45:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:45:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:45:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:45:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:45:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:45:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:45:46 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3sb2zvue, uq2imdbp]
2025-07-14 19:46:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vehicd1u] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:46:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vehicd1u
2025-07-14 19:46:44 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:46:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vtb5uxtl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:46:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vtb5uxtl
2025-07-14 19:46:44 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:46:44 [clientInboundChannel-704] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vehicd1u
2025-07-14 19:46:44 [clientInboundChannel-707] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vtb5uxtl
2025-07-14 19:46:44 [clientOutboundChannel-182] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=vehicd1u}], simpSessionId=vehicd1u}]
2025-07-14 19:46:44 [clientOutboundChannel-183] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=vtb5uxtl}], simpSessionId=vtb5uxtl}]
2025-07-14 19:46:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:46:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499004951", parameters={masked}
2025-07-14 19:46:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:46:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499004951
2025-07-14 19:46:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/848/yqxt1dsb/websocket", parameters={}
2025-07-14 19:46:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:46:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/848/yqxt1dsb/websocket
2025-07-14 19:46:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:46:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yqxt1dsb]
2025-07-14 19:46:44 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:46:44 [clientInboundChannel-710] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yqxt1dsb
2025-07-14 19:46:44 [clientInboundChannel-713] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=yqxt1dsb
2025-07-14 19:46:44 [clientInboundChannel-716] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=yqxt1dsb
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499005235", parameters={masked}
2025-07-14 19:46:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:46:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499005235
2025-07-14 19:46:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/786/hokzm3ot/websocket", parameters={}
2025-07-14 19:46:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:46:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/786/hokzm3ot/websocket
2025-07-14 19:46:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:46:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hokzm3ot]
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:46:45 [clientInboundChannel-719] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=hokzm3ot
2025-07-14 19:46:45 [clientInboundChannel-722] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=hokzm3ot
2025-07-14 19:46:45 [clientInboundChannel-725] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=hokzm3ot
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:46:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:46:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:46:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:46:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:46:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:46:51 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [vtb5uxtl, vehicd1u]
2025-07-14 19:51:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hokzm3ot] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:51:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hokzm3ot
2025-07-14 19:51:40 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:51:40 [clientInboundChannel-728] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hokzm3ot
2025-07-14 19:51:40 [clientOutboundChannel-186] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=hokzm3ot}], simpSessionId=hokzm3ot}]
2025-07-14 19:51:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yqxt1dsb] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:51:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yqxt1dsb
2025-07-14 19:51:40 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:51:40 [clientInboundChannel-731] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yqxt1dsb
2025-07-14 19:51:40 [clientOutboundChannel-187] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yqxt1dsb}], simpSessionId=yqxt1dsb}]
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:51:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499301086", parameters={masked}
2025-07-14 19:51:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:51:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499301086
2025-07-14 19:51:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/903/rvpvvu0h/websocket", parameters={}
2025-07-14 19:51:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:51:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/903/rvpvvu0h/websocket
2025-07-14 19:51:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:51:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rvpvvu0h]
2025-07-14 19:51:41 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:51:41 [clientInboundChannel-734] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=rvpvvu0h
2025-07-14 19:51:41 [clientInboundChannel-737] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=rvpvvu0h
2025-07-14 19:51:41 [clientInboundChannel-740] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=rvpvvu0h
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:51:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499301179", parameters={masked}
2025-07-14 19:51:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:51:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499301179
2025-07-14 19:51:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/939/ejzpqxl3/websocket", parameters={}
2025-07-14 19:51:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:51:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/939/ejzpqxl3/websocket
2025-07-14 19:51:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:51:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ejzpqxl3]
2025-07-14 19:51:41 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:51:41 [clientInboundChannel-743] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ejzpqxl3
2025-07-14 19:51:41 [clientInboundChannel-746] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ejzpqxl3
2025-07-14 19:51:41 [clientInboundChannel-749] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ejzpqxl3
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:51:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:51:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:51:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:51:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        a1_0.attachment_id,
        a1_0.file_size_bytes,
        a1_0.file_type,
        a1_0.file_url,
        a1_0.message_id 
    from
        attachments a1_0 
    where
        a1_0.message_id=?
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:51:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:51:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:51:46 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [yqxt1dsb, hokzm3ot]
2025-07-14 19:52:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ejzpqxl3] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:52:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ejzpqxl3
2025-07-14 19:52:33 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:52:33 [clientInboundChannel-752] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ejzpqxl3
2025-07-14 19:52:33 [clientOutboundChannel-190] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ejzpqxl3}], simpSessionId=ejzpqxl3}]
2025-07-14 19:52:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499353722", parameters={masked}
2025-07-14 19:52:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499353722
2025-07-14 19:52:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/248/esbefla4/websocket", parameters={}
2025-07-14 19:52:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/248/esbefla4/websocket
2025-07-14 19:52:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:52:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=esbefla4]
2025-07-14 19:52:33 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:52:33 [clientInboundChannel-755] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=esbefla4
2025-07-14 19:52:33 [clientInboundChannel-758] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=esbefla4
2025-07-14 19:52:33 [clientInboundChannel-727] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=esbefla4
2025-07-14 19:52:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:52:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:52:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:52:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rvpvvu0h] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:52:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rvpvvu0h
2025-07-14 19:52:34 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:52:34 [clientInboundChannel-732] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rvpvvu0h
2025-07-14 19:52:34 [clientOutboundChannel-192] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=rvpvvu0h}], simpSessionId=rvpvvu0h}]
2025-07-14 19:52:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499354815", parameters={masked}
2025-07-14 19:52:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499354815
2025-07-14 19:52:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/826/fxtd2gek/websocket", parameters={}
2025-07-14 19:52:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/826/fxtd2gek/websocket
2025-07-14 19:52:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:52:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fxtd2gek]
2025-07-14 19:52:34 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:52:34 [clientInboundChannel-733] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=fxtd2gek
2025-07-14 19:52:34 [clientInboundChannel-738] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=fxtd2gek
2025-07-14 19:52:34 [clientInboundChannel-737] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=fxtd2gek
2025-07-14 19:52:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:52:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:52:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:52:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:52:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:41 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ejzpqxl3, rvpvvu0h]
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:52:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:52:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=esbefla4] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:52:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session esbefla4
2025-07-14 19:52:58 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:52:58 [clientInboundChannel-760] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=esbefla4
2025-07-14 19:52:58 [clientOutboundChannel-194] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=esbefla4}], simpSessionId=esbefla4}]
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499378563", parameters={masked}
2025-07-14 19:52:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499378563
2025-07-14 19:52:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:58 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/020/bfk5czby/websocket", parameters={}
2025-07-14 19:52:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:52:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/020/bfk5czby/websocket
2025-07-14 19:52:58 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:52:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bfk5czby]
2025-07-14 19:52:58 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:52:58 [clientInboundChannel-763] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bfk5czby
2025-07-14 19:52:58 [clientInboundChannel-766] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=bfk5czby
2025-07-14 19:52:58 [clientInboundChannel-769] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=bfk5czby
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:52:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:52:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:52:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:52:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:53:06 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [esbefla4]
2025-07-14 19:57:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bfk5czby] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:57:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bfk5czby
2025-07-14 19:57:31 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:57:31 [clientInboundChannel-772] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bfk5czby
2025-07-14 19:57:31 [clientOutboundChannel-196] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bfk5czby}], simpSessionId=bfk5czby}]
2025-07-14 19:57:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fxtd2gek] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:57:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fxtd2gek
2025-07-14 19:57:31 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:57:31 [clientInboundChannel-775] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fxtd2gek
2025-07-14 19:57:31 [clientOutboundChannel-197] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=fxtd2gek}], simpSessionId=fxtd2gek}]
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499652393", parameters={masked}
2025-07-14 19:57:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499652393
2025-07-14 19:57:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/829/cvivxek5/websocket", parameters={}
2025-07-14 19:57:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/829/cvivxek5/websocket
2025-07-14 19:57:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:57:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cvivxek5]
2025-07-14 19:57:32 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:57:32 [clientInboundChannel-778] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=cvivxek5
2025-07-14 19:57:32 [clientInboundChannel-781] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=cvivxek5
2025-07-14 19:57:32 [clientInboundChannel-784] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=cvivxek5
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499652575", parameters={masked}
2025-07-14 19:57:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499652575
2025-07-14 19:57:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/964/b13ptblz/websocket", parameters={}
2025-07-14 19:57:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/964/b13ptblz/websocket
2025-07-14 19:57:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:57:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=b13ptblz]
2025-07-14 19:57:32 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:57:32 [clientInboundChannel-787] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=b13ptblz
2025-07-14 19:57:32 [clientInboundChannel-790] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=b13ptblz
2025-07-14 19:57:32 [clientInboundChannel-793] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=b13ptblz
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:57:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:41 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [fxtd2gek, bfk5czby]
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 19:57:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cvivxek5] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:57:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cvivxek5
2025-07-14 19:57:47 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:57:47 [clientInboundChannel-796] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cvivxek5
2025-07-14 19:57:47 [clientOutboundChannel-200] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cvivxek5}], simpSessionId=cvivxek5}]
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499668179", parameters={masked}
2025-07-14 19:57:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499668179
2025-07-14 19:57:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/591/lcvd2skd/websocket", parameters={}
2025-07-14 19:57:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:57:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/591/lcvd2skd/websocket
2025-07-14 19:57:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:57:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lcvd2skd]
2025-07-14 19:57:48 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050124
2025-07-14 19:57:48 [clientInboundChannel-799] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=lcvd2skd
2025-07-14 19:57:48 [clientInboundChannel-772] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=lcvd2skd
2025-07-14 19:57:48 [clientInboundChannel-802] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=lcvd2skd
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 19:57:48 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:57:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:57:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:57:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 19:57:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:57:56 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cvivxek5]
2025-07-14 19:58:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=b13ptblz] closed with CloseStatus[code=1000, reason=null]
2025-07-14 19:58:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session b13ptblz
2025-07-14 19:58:04 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 19:58:04 [clientInboundChannel-776] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=b13ptblz
2025-07-14 19:58:04 [clientOutboundChannel-202] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=b13ptblz}], simpSessionId=b13ptblz}]
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:58:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499685071", parameters={masked}
2025-07-14 19:58:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:58:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499685071
2025-07-14 19:58:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:58:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/410/0hcturh1/websocket", parameters={}
2025-07-14 19:58:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3d74313a
2025-07-14 19:58:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/410/0hcturh1/websocket
2025-07-14 19:58:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 19:58:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0hcturh1]
2025-07-14 19:58:05 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 19:58:05 [clientInboundChannel-779] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0hcturh1
2025-07-14 19:58:05 [clientInboundChannel-781] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0hcturh1
2025-07-14 19:58:05 [clientInboundChannel-784] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0hcturh1
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:58:05 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:58:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:58:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:58:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 19:58:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 19:58:11 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [b13ptblz]
2025-07-14 19:58:36 [MessageBroker-9] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 89 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(89)-CONNECTED(89)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 20, active threads = 0, queued tasks = 0, completed tasks = 1395], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 203], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 1430]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:02:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session lcvd2skd with CloseStatus[code=1001, reason=null]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=lcvd2skd]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lcvd2skd] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lcvd2skd
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 0hcturh1 with CloseStatus[code=1001, reason=null]
2025-07-14 20:02:00 [clientInboundChannel-804] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lcvd2skd
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=0hcturh1]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0hcturh1] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0hcturh1
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@66716c60]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:02:00 [RMI TCP Connection(98)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:02:01 [RMI TCP Connection(98)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:02:02 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 48932 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:02:02 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:02:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:02:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-14 20:02:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:02:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:02:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:02:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:02:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 843 ms
2025-07-14 20:02:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:02:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:02:03 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:02:04 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:02:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:02:06 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@283e1759
2025-07-14 20:02:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:02:06 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:02:06 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:02:06 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:02:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:02:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:02:07 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:02:07 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:02:08 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:02:08 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:02:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]
2025-07-14 20:02:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]]
2025-07-14 20:02:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:02:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:02:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:02:08 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 5.811 seconds (process running for 6.136)
2025-07-14 20:02:32 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:02:32 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@bf68379
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@c34e260
2025-07-14 20:02:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:02:32 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:02:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752499952737", parameters={masked}
2025-07-14 20:02:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69438db0
2025-07-14 20:02:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752499952737
2025-07-14 20:02:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:02:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/262/ai3znbgg/websocket", parameters={}
2025-07-14 20:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@69438db0
2025-07-14 20:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/262/ai3znbgg/websocket
2025-07-14 20:02:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ai3znbgg]
2025-07-14 20:02:32 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:02:32 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:02:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ai3znbgg
2025-07-14 20:02:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ai3znbgg
2025-07-14 20:02:32 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ai3znbgg
2025-07-14 20:02:32 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:02:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:02:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:02:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:02:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:02:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:03:08 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 13, active threads = 1, queued tasks = 2, completed tasks = 9]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:07:01 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ai3znbgg with CloseStatus[code=1001, reason=null]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ai3znbgg]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ai3znbgg] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ai3znbgg
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:07:01 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ai3znbgg
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@241410c5]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:07:01 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:07:04 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 41540 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:07:04 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:07:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:07:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 6 JPA repository interfaces.
2025-07-14 20:07:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:07:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:07:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:07:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:07:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 775 ms
2025-07-14 20:07:05 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:07:05 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:07:05 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:07:05 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:07:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:07:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@537b3be1
2025-07-14 20:07:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:07:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:07:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:07:07 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:07:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:07:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:07:08 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:07:08 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:07:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:07:09 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Injection of autowired dependencies failed
2025-07-14 20:07:09 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:07:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:07:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:07:09 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-14 20:07:09 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-14 20:07:09 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:515)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.btalk.BackendApplication.main(BackendApplication.java:10)
Caused by: java.lang.RuntimeException: Could not postProcess org.springframework.security.config.annotation.web.builders.WebSecurity@7acc95a2 of type class org.springframework.security.config.annotation.web.builders.WebSecurity
	at org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor.postProcess(AutowireBeanFactoryObjectPostProcessor.java:71)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.setFilterChainProxySecurityConfigurer(WebSecurityConfiguration.java:159)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:854)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospectorRequestTransformer': Cannot resolve reference to bean 'mvcHandlerMappingIntrospector' while setting constructor argument
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:206)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1598)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1556)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:563)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$1.getIfUnique(DefaultListableBeanFactory.java:489)
	at org.springframework.security.config.annotation.web.builders.WebSecurity.setApplicationContext(WebSecurity.java:433)
	at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:110)
	at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:85)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:429)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1818)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor.initializeBeanIfNeeded(AutowireBeanFactoryObjectPostProcessor.java:98)
	at org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor.postProcess(AutowireBeanFactoryObjectPostProcessor.java:67)
	... 27 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'stompWebSocketHandlerMapping' defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception with message: Unresolved compilation problems: 
	Bean cannot be resolved to a type
	HttpHandshakeInterceptor cannot be resolved to a type

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 50 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stompWebSocketHandlerMapping' defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception with message: Unresolved compilation problems: 
	Bean cannot be resolved to a type
	HttpHandshakeInterceptor cannot be resolved to a type

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:747)
	at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1426)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:372)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.initHandlerMappings(HandlerMappingIntrospector.java:159)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.afterPropertiesSet(HandlerMappingIntrospector.java:146)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception with message: Unresolved compilation problems: 
	Bean cannot be resolved to a type
	HttpHandshakeInterceptor cannot be resolved to a type

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 73 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Bean cannot be resolved to a type
	HttpHandshakeInterceptor cannot be resolved to a type

	at com.btalk.config.WebSocketSecurityConfig.httpSessionHandshakeInterceptor(WebSocketSecurityConfig.java:38)
	at com.btalk.config.WebSocketSecurityConfig.registerStompEndpoints(WebSocketSecurityConfig.java:29)
	at org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration.registerStompEndpoints(DelegatingWebSocketMessageBrokerConfiguration.java:60)
	at org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurationSupport.stompWebSocketHandlerMapping(WebSocketMessageBrokerConfigurationSupport.java:99)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 76 common frames omitted
2025-07-14 20:07:39 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 20336 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:07:39 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:07:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:07:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 6 JPA repository interfaces.
2025-07-14 20:07:40 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:07:40 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:07:40 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:07:40 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:07:40 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 817 ms
2025-07-14 20:07:40 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:07:40 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:07:40 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:07:40 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:07:40 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:07:42 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@537b3be1
2025-07-14 20:07:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:07:43 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:07:43 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:07:43 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:07:43 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:07:43 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:07:44 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:07:44 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:07:44 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:07:44 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:07:45 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]
2025-07-14 20:07:45 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]]
2025-07-14 20:07:45 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:07:45 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:07:45 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:07:45 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 5.571 seconds (process running for 5.904)
2025-07-14 20:07:52 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:07:52 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@68284cf9
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@22d7e121
2025-07-14 20:07:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:07:52 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 20:07:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752500272781", parameters={masked}
2025-07-14 20:07:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@12a96a6e
2025-07-14 20:07:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752500272781
2025-07-14 20:07:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:07:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/907/t4s50gwd/websocket", parameters={}
2025-07-14 20:07:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@12a96a6e
2025-07-14 20:07:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/907/t4s50gwd/websocket
2025-07-14 20:07:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:07:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=t4s50gwd]
2025-07-14 20:07:52 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:07:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=t4s50gwd
2025-07-14 20:07:52 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:07:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=t4s50gwd
2025-07-14 20:07:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=t4s50gwd
2025-07-14 20:07:52 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:07:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:07:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:07:54 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:07:54 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:07:54 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:07:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:07:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:07:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:07:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:08:45 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 2, completed tasks = 13]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:14:56 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session t4s50gwd with CloseStatus[code=1001, reason=null]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=t4s50gwd]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=t4s50gwd] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session t4s50gwd
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:14:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=t4s50gwd
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1332d4ae]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:14:56 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:14:57 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:14:59 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 35944 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:14:59 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:14:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:14:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-14 20:14:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:14:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:14:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:14:59 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:14:59 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
2025-07-14 20:14:59 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:15:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:15:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:15:00 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:15:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:15:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ca278bc
2025-07-14 20:15:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:15:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:15:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:15:02 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:15:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:15:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:15:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:15:03 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:15:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:15:04 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:15:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]
2025-07-14 20:15:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]]
2025-07-14 20:15:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:15:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:15:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:15:04 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 5.839 seconds (process running for 6.195)
2025-07-14 20:15:29 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:15:29 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@474998da
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b28d787
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:15:29 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752500729746", parameters={masked}
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d80f543
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752500729746
2025-07-14 20:15:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:15:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/865/ntxor5v2/websocket", parameters={}
2025-07-14 20:15:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d80f543
2025-07-14 20:15:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/865/ntxor5v2/websocket
2025-07-14 20:15:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:15:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ntxor5v2]
2025-07-14 20:15:29 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:15:29 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ntxor5v2
2025-07-14 20:15:29 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:15:29 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ntxor5v2
2025-07-14 20:15:29 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ntxor5v2
2025-07-14 20:15:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:15:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:15:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:15:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:16:04 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 2, completed tasks = 8]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:21:41 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ntxor5v2 with CloseStatus[code=1001, reason=null]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ntxor5v2]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ntxor5v2] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ntxor5v2
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:21:41 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ntxor5v2
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d7a0e06]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:21:41 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:21:43 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 16780 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:21:43 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:21:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:21:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-14 20:21:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:21:43 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:21:43 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:21:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:21:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 815 ms
2025-07-14 20:21:44 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:21:44 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:21:44 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:21:44 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:21:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:21:59 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@654b899f
2025-07-14 20:21:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:22:00 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:22:00 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:22:00 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:22:00 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:22:02 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:22:02 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:22:02 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:22:03 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:22:03 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:22:03 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]
2025-07-14 20:22:03 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]]
2025-07-14 20:22:03 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:22:03 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:22:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:22:03 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 20.71 seconds (process running for 21.033)
2025-07-14 20:22:16 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:22:16 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@17b1f9a7
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5fcf9bff
2025-07-14 20:22:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:22:16 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-14 20:22:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752501136646", parameters={masked}
2025-07-14 20:22:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@57149e0a
2025-07-14 20:22:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752501136646
2025-07-14 20:22:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:22:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/842/5p4o1lbn/websocket", parameters={}
2025-07-14 20:22:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@57149e0a
2025-07-14 20:22:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/842/5p4o1lbn/websocket
2025-07-14 20:22:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:22:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5p4o1lbn]
2025-07-14 20:22:16 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:22:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5p4o1lbn
2025-07-14 20:22:16 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:22:16 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=5p4o1lbn
2025-07-14 20:22:16 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=5p4o1lbn
2025-07-14 20:22:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:22:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:22:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:22:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:22:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:22:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:22:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:22:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:22:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:22:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:22:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:22:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:22:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:22:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:22:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:22:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:22:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:22:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:22:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:22:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:22:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:22:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:22:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:22:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:23:03 [MessageBroker-9] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 15, active threads = 1, queued tasks = 2, completed tasks = 11]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:27:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 5p4o1lbn with CloseStatus[code=1001, reason=null]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=5p4o1lbn]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5p4o1lbn] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5p4o1lbn
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:27:54 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5p4o1lbn
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e9079cf]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:27:54 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:27:55 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:27:56 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 15636 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:27:56 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:27:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:27:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 6 JPA repository interfaces.
2025-07-14 20:27:57 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:27:57 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:27:57 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:27:57 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:27:57 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 834 ms
2025-07-14 20:27:57 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:27:57 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:27:57 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:27:58 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:27:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:28:13 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@56299b0e
2025-07-14 20:28:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:28:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:28:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:28:14 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:28:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:28:18 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:28:18 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:28:19 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:28:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:28:19 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:28:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]
2025-07-14 20:28:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]]
2025-07-14 20:28:19 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:28:19 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:28:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:28:19 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 23.173 seconds (process running for 23.493)
2025-07-14 20:29:19 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-07-14 20:29:20 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:29:20 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6035396c
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@617c1ac2
2025-07-14 20:29:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:29:20 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:29:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752501560111", parameters={masked}
2025-07-14 20:29:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@695d804
2025-07-14 20:29:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752501560111
2025-07-14 20:29:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:29:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/977/oybizm5d/websocket", parameters={}
2025-07-14 20:29:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@695d804
2025-07-14 20:29:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/977/oybizm5d/websocket
2025-07-14 20:29:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:29:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oybizm5d]
2025-07-14 20:29:20 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:29:20 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=oybizm5d
2025-07-14 20:29:20 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:29:20 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=oybizm5d
2025-07-14 20:29:20 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=oybizm5d
2025-07-14 20:29:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:29:22 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:29:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:29:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:29:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:29:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:29:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:29:26 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:29:27 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:29:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:29:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:29:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:29:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:29:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:29:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:29:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:29:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:29:35 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:29:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:29:37 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:29:38 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:29:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:29:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:29:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:35:26 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session oybizm5d with CloseStatus[code=1001, reason=null]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=oybizm5d]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oybizm5d] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oybizm5d
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:35:26 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oybizm5d
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7a9ad451]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:35:26 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:35:27 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:35:28 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 22556 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:35:28 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:35:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:35:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 6 JPA repository interfaces.
2025-07-14 20:35:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:35:29 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:35:29 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:35:29 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:35:29 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 752 ms
2025-07-14 20:35:29 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:35:29 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:35:29 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:35:30 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:35:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:35:58 [main] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Default transaction isolation level detection failed (No operations allowed after connection closed.).
2025-07-14 20:35:58 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-14 20:35:58 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - No operations allowed after connection closed.
2025-07-14 20:35:58 [main] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.JDBCConnectionException: unable to obtain isolated JDBC connection [No operations allowed after connection closed.] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:100)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:336)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1442)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1513)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:513)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1725)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:230)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:184)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:179)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:164)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4464)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.btalk.BackendApplication.main(BackendApplication.java:10)
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setTransactionIsolation(ConnectionImpl.java:2258)
	at com.zaxxer.hikari.pool.PoolBase.setupConnection(PoolBase.java:433)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:373)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:205)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:483)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:571)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:101)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:483)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 106 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setTransactionIsolation(ConnectionImpl.java:2205)
	... 116 common frames omitted
2025-07-14 20:35:58 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:35:58 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:35:58 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:35:59 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:35:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:36:11 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 33288 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:36:11 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:36:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:36:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 6 JPA repository interfaces.
2025-07-14 20:36:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:36:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:36:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:36:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:36:12 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 763 ms
2025-07-14 20:36:12 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:36:12 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:36:12 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:36:12 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:36:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:36:20 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c69e1e1
2025-07-14 20:36:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:36:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:36:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:36:21 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:36:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:36:23 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:36:23 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:36:23 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:36:24 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:36:24 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:36:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]
2025-07-14 20:36:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]]
2025-07-14 20:36:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:36:24 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:36:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:36:24 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 13.463 seconds (process running for 13.782)
2025-07-14 20:36:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:36:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6b3decaa
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7c553e61
2025-07-14 20:36:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:36:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:36:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752501991441", parameters={masked}
2025-07-14 20:36:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@73e45afe
2025-07-14 20:36:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752501991441
2025-07-14 20:36:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:36:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/630/uhutmyda/websocket", parameters={}
2025-07-14 20:36:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@73e45afe
2025-07-14 20:36:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/630/uhutmyda/websocket
2025-07-14 20:36:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:36:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uhutmyda]
2025-07-14 20:36:31 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:36:31 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=uhutmyda
2025-07-14 20:36:31 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:36:31 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=uhutmyda
2025-07-14 20:36:31 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=uhutmyda
2025-07-14 20:36:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:36:32 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:36:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:36:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:36:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:36:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:36:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:36:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:36:35 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:36:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:36:36 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:36:36 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:36:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:36:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:36:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:36:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:36:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:36:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:36:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:36:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:36:41 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:37:24 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 2, completed tasks = 13]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:42:41 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session uhutmyda with CloseStatus[code=1001, reason=null]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=uhutmyda]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uhutmyda] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uhutmyda
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:42:41 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uhutmyda
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@543e79cb]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:42:41 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:42:42 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:42:43 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 26248 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:42:43 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:42:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:42:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 6 JPA repository interfaces.
2025-07-14 20:42:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:42:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:42:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:42:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:42:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 777 ms
2025-07-14 20:42:44 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:42:44 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:42:44 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:42:44 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:42:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:42:52 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4a890fdd
2025-07-14 20:42:52 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:42:52 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:42:52 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:42:52 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:42:53 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:42:55 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:42:55 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:42:55 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:42:55 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:42:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:42:56 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:42:56 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]
2025-07-14 20:42:56 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]]
2025-07-14 20:42:56 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:42:56 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:42:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:42:56 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 12.873 seconds (process running for 13.2)
2025-07-14 20:43:01 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:43:01 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@617c1ac2
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5050cf7e
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:43:01 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502381151", parameters={masked}
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3bd623b2
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502381151
2025-07-14 20:43:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:43:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/759/silptpzh/websocket", parameters={}
2025-07-14 20:43:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3bd623b2
2025-07-14 20:43:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/759/silptpzh/websocket
2025-07-14 20:43:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:43:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=silptpzh]
2025-07-14 20:43:01 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user: 09421050125
2025-07-14 20:43:01 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=silptpzh
2025-07-14 20:43:01 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: null
2025-07-14 20:43:01 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=silptpzh
2025-07-14 20:43:01 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=silptpzh
2025-07-14 20:43:01 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:43:02 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:43:02 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:43:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:43:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:43:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:43:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:43:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:43:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:43:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:43:05 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:43:05 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:43:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:43:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:43:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:43:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:43:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:43:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:43:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:43:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:43:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:43:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:43:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:43:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:43:56 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 2, completed tasks = 13]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:47:25 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session silptpzh with CloseStatus[code=1001, reason=null]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=silptpzh]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=silptpzh] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session silptpzh
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-14 20:47:25 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=silptpzh
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@559ac87f]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:47:25 [RMI TCP Connection(9)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:47:27 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 48632 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:47:27 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:47:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:47:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 6 JPA repository interfaces.
2025-07-14 20:47:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:47:27 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:47:27 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:47:27 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:47:27 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 783 ms
2025-07-14 20:47:27 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:47:28 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:47:28 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:47:28 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:47:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:47:34 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1bc6c20d
2025-07-14 20:47:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:47:34 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:47:34 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:47:34 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:47:35 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:47:35 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:47:35 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:47:35 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:47:36 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:47:36 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:47:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]
2025-07-14 20:47:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]]
2025-07-14 20:47:36 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:47:36 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:47:36 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:47:36 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 9.598 seconds (process running for 9.91)
2025-07-14 20:47:43 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:47:43 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@25fc72c6
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@77d1e709
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:47:43 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502663502", parameters={masked}
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502663502
2025-07-14 20:47:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:47:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/455/zapvlrsj/websocket", parameters={}
2025-07-14 20:47:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:47:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/455/zapvlrsj/websocket
2025-07-14 20:47:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:47:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zapvlrsj]
2025-07-14 20:47:43 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 2
2025-07-14 20:47:43 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=zapvlrsj
2025-07-14 20:47:43 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 20:47:43 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 20:47:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:47:43 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:47:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=zapvlrsj
2025-07-14 20:47:44 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=zapvlrsj
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:47:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:47:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:47:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:47:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:47:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:47:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:47:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502699564", parameters={masked}
2025-07-14 20:48:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502699564
2025-07-14 20:48:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/375/jsm0cgee/websocket", parameters={}
2025-07-14 20:48:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/375/jsm0cgee/websocket
2025-07-14 20:48:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:48:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jsm0cgee]
2025-07-14 20:48:19 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 20:48:19 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 20:48:19 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=jsm0cgee
2025-07-14 20:48:19 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:48:19 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:48:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:48:20 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:48:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:48:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:48:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:20 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jsm0cgee
2025-07-14 20:48:20 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jsm0cgee
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:48:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:48:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:48:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:36 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 13]
2025-07-14 20:48:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zapvlrsj] closed with CloseStatus[code=1000, reason=null]
2025-07-14 20:48:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zapvlrsj
2025-07-14 20:48:48 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502728366", parameters={masked}
2025-07-14 20:48:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:48:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502728366
2025-07-14 20:48:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/466/wrmqvaiu/websocket", parameters={}
2025-07-14 20:48:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/466/wrmqvaiu/websocket
2025-07-14 20:48:48 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:48:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wrmqvaiu]
2025-07-14 20:48:48 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 2
2025-07-14 20:48:48 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 20:48:48 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=wrmqvaiu
2025-07-14 20:48:48 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 20:48:48 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:48 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=wrmqvaiu
2025-07-14 20:48:48 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=wrmqvaiu
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:48:48 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zapvlrsj
2025-07-14 20:48:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:48 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@1db04254, simpSessionId=zapvlrsj}], simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@1db04254, simpSessionId=zapvlrsj}]
2025-07-14 20:48:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:48:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:49 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:48:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jsm0cgee] closed with CloseStatus[code=1000, reason=null]
2025-07-14 20:48:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jsm0cgee
2025-07-14 20:48:49 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 20:48:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502729948", parameters={masked}
2025-07-14 20:48:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502729948
2025-07-14 20:48:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/241/0yplpbww/websocket", parameters={}
2025-07-14 20:48:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@72dc7b05
2025-07-14 20:48:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/241/0yplpbww/websocket
2025-07-14 20:48:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:48:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0yplpbww]
2025-07-14 20:48:49 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 20:48:49 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 20:48:49 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=0yplpbww
2025-07-14 20:48:49 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 20:48:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:48:50 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:50 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0yplpbww
2025-07-14 20:48:50 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0yplpbww
2025-07-14 20:48:50 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jsm0cgee
2025-07-14 20:48:50 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@235ffca8, simpSessionId=jsm0cgee}], simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@235ffca8, simpSessionId=jsm0cgee}]
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:48:50 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:48:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:48:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:48:53 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zapvlrsj]
2025-07-14 20:48:58 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jsm0cgee]
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 20:49:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 20:49:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:49:06 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=TRest", parameters={masked}
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-14 20:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 20:49:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userwrmqvaiu session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-user0yplpbww session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 20:49:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:49:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0yplpbww] closed with CloseStatus[code=1000, reason=null]
2025-07-14 20:49:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0yplpbww
2025-07-14 20:49:39 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:49:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:49:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wrmqvaiu] closed with CloseStatus[code=1000, reason=null]
2025-07-14 20:49:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wrmqvaiu
2025-07-14 20:49:40 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 20:49:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:49:41 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/59/user-offline session=null payload=3
2025-07-14 20:49:41 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0yplpbww
2025-07-14 20:49:41 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@7a0e33bf, simpSessionId=0yplpbww}], simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@7a0e33bf, simpSessionId=0yplpbww}]
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:49:41 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/59/user-offline session=null payload=2
2025-07-14 20:49:41 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wrmqvaiu
2025-07-14 20:49:41 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@7098cc30, simpSessionId=wrmqvaiu}], simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1860/0x000001d8dabdba30@7098cc30, simpSessionId=wrmqvaiu}]
2025-07-14 20:49:48 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [wrmqvaiu, 0yplpbww]
2025-07-14 20:49:50 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:49:50 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:49:51 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff18823]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:49:51 [RMI TCP Connection(7)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:50:36 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 33040 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:50:36 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:50:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:50:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 6 JPA repository interfaces.
2025-07-14 20:50:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:50:37 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:50:37 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:50:37 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:50:37 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 798 ms
2025-07-14 20:50:37 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:50:37 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:50:37 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:50:38 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:50:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:50:40 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f45dfec
2025-07-14 20:50:40 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:50:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:50:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:50:41 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:50:41 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:50:42 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:50:42 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:50:42 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:50:42 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:50:42 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:50:43 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:50:43 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:50:43 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]
2025-07-14 20:50:43 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]]
2025-07-14 20:50:43 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:50:43 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:50:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:50:43 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 6.411 seconds (process running for 6.725)
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:51:10 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77d01d83]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:51:10 [RMI TCP Connection(3)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 20:51:12 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 50164 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 20:51:12 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 20:51:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 20:51:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 6 JPA repository interfaces.
2025-07-14 20:51:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 20:51:13 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 20:51:13 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 20:51:13 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 20:51:13 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 772 ms
2025-07-14 20:51:13 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 20:51:13 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 20:51:13 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 20:51:13 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 20:51:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 20:51:16 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@380fdcf2
2025-07-14 20:51:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 20:51:16 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 20:51:16 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 20:51:16 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 20:51:17 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 20:51:17 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:51:17 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 20:51:18 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 20:51:18 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 20:51:18 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:51:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 20:51:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 20:51:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:51:18 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:51:18 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 20:51:18 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 6.722 seconds (process running for 7.033)
2025-07-14 20:52:00 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 20:52:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1eb16e4b
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@243fe859
2025-07-14 20:52:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 20:52:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 20:52:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752502920318", parameters={masked}
2025-07-14 20:52:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:52:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752502920318
2025-07-14 20:52:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:52:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/466/czikg0ak/websocket", parameters={}
2025-07-14 20:52:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:52:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/466/czikg0ak/websocket
2025-07-14 20:52:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:52:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=czikg0ak]
2025-07-14 20:52:00 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 20:52:00 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 20:52:00 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=czikg0ak
2025-07-14 20:52:00 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 20:52:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:52:00 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:52:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:52:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:52:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:52:01 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=czikg0ak
2025-07-14 20:52:01 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=czikg0ak
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:52:01 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:52:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:52:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:52:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:52:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 20:52:03 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:52:18 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 2, completed tasks = 4]
2025-07-14 20:53:05 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6533b658 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:15 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@667ba8d1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:25 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@380fdcf2 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:35 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@668c4844 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@537e300f (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@b13727f (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@57d9d4fc (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=53s185ms375s500ns).
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5a245234 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@78f8ff37 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:53:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6868eadd (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-14 20:54:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=czikg0ak] closed with CloseStatus[code=1000, reason=null]
2025-07-14 20:54:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session czikg0ak
2025-07-14 20:54:00 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 20:54:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503040075", parameters={masked}
2025-07-14 20:54:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:54:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503040075
2025-07-14 20:54:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/039/svzvd5ml/websocket", parameters={}
2025-07-14 20:54:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:54:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/039/svzvd5ml/websocket
2025-07-14 20:54:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:54:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=svzvd5ml]
2025-07-14 20:54:00 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 20:54:00 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 20:54:00 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=svzvd5ml
2025-07-14 20:54:00 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 20:54:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:54:00 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:54:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:54:00 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=svzvd5ml
2025-07-14 20:54:00 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=svzvd5ml
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:54:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:00 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=czikg0ak
2025-07-14 20:54:00 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1884/0x000001be1abf6460@38c23d6c, simpSessionId=czikg0ak}], simpUser=com.btalk.security.AuthChannelInterceptorAdapter$$Lambda$1884/0x000001be1abf6460@38c23d6c, simpSessionId=czikg0ak}]
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:54:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 20:54:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:05 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [czikg0ak]
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(phoneNumber=09421050125, password=apple671@)]
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-14 20:54:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503057417", parameters={masked}
2025-07-14 20:54:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:54:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503057417
2025-07-14 20:54:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/469/jgwwscof/websocket", parameters={}
2025-07-14 20:54:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5308b244
2025-07-14 20:54:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/469/jgwwscof/websocket
2025-07-14 20:54:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 20:54:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jgwwscof]
2025-07-14 20:54:17 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 2
2025-07-14 20:54:17 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 20:54:17 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=jgwwscof
2025-07-14 20:54:17 [clientOutboundChannel-4] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:54:17 [clientOutboundChannel-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:54:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:17 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=jgwwscof
2025-07-14 20:54:17 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=jgwwscof
2025-07-14 20:54:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 20:54:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 20:54:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:54:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 20:54:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=3&participantId=2", parameters={masked}
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 20:54:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-usersvzvd5ml session=null payload={"success":true,"message":"New conversation created","data":{"conversation":{"co...(truncated)
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userjgwwscof session=null payload={"success":true,"message":"New conversation created","data":{"conversation":{"co...(truncated)
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 20:54:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 20:57:42 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session jgwwscof with CloseStatus[code=1001, reason=null]
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=jgwwscof]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jgwwscof] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jgwwscof
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:57:42 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/60/user-offline session=null payload=2
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session svzvd5ml with CloseStatus[code=1001, reason=null]
2025-07-14 20:57:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jgwwscof
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=svzvd5ml]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=svzvd5ml] closed with CloseStatus[code=1001, reason=null]
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session svzvd5ml
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 20:57:43 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/60/user-offline session=null payload=3
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a82a388]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 20:57:44 [RMI TCP Connection(10)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 21:00:00 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 2720 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 21:00:00 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 21:00:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 21:00:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 6 JPA repository interfaces.
2025-07-14 21:00:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 21:00:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 21:00:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 21:00:01 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 21:00:01 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 786 ms
2025-07-14 21:00:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 21:00:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 21:00:01 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 21:00:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 21:00:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 21:00:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@734cf881
2025-07-14 21:00:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 21:00:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 21:00:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 21:00:02 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 21:00:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 21:00:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:00:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 21:00:03 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 21:00:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 21:00:04 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:00:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]
2025-07-14 21:00:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]]
2025-07-14 21:00:04 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:00:04 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:00:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 21:00:04 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.39 seconds (process running for 4.702)
2025-07-14 21:00:10 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 21:00:10 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@742af13a
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@bf68379
2025-07-14 21:00:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 21:00:10 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 21:00:10 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503410782", parameters={masked}
2025-07-14 21:00:10 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:10 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503410782
2025-07-14 21:00:10 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/319/xh3bfbxr/websocket", parameters={}
2025-07-14 21:00:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/319/xh3bfbxr/websocket
2025-07-14 21:00:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:00:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xh3bfbxr]
2025-07-14 21:00:10 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 2
2025-07-14 21:00:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=xh3bfbxr
2025-07-14 21:00:10 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 21:00:10 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 21:00:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:11 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:11 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=xh3bfbxr
2025-07-14 21:00:11 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=xh3bfbxr
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 21:00:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:11 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 21:00:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:14 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503414720", parameters={masked}
2025-07-14 21:00:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503414720
2025-07-14 21:00:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/043/clfkwpfl/websocket", parameters={}
2025-07-14 21:00:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/043/clfkwpfl/websocket
2025-07-14 21:00:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:00:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=clfkwpfl]
2025-07-14 21:00:14 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 21:00:14 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=clfkwpfl
2025-07-14 21:00:14 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 21:00:14 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 21:00:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:00:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:14 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:14 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:15 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=clfkwpfl
2025-07-14 21:00:15 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=clfkwpfl
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 21:00:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:00:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-14 21:00:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xh3bfbxr] closed with CloseStatus[code=1000, reason=null]
2025-07-14 21:00:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xh3bfbxr
2025-07-14 21:00:32 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 21:00:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503432818", parameters={masked}
2025-07-14 21:00:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503432818
2025-07-14 21:00:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/287/diek05nz/websocket", parameters={}
2025-07-14 21:00:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/287/diek05nz/websocket
2025-07-14 21:00:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:00:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=diek05nz]
2025-07-14 21:00:32 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 2
2025-07-14 21:00:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=diek05nz
2025-07-14 21:00:32 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 21:00:32 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 21:00:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:00:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:32 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:33 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=diek05nz
2025-07-14 21:00:33 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=diek05nz
2025-07-14 21:00:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:00:33 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:33 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xh3bfbxr
2025-07-14 21:00:33 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4b5ef87c, simpSessionId=xh3bfbxr}], simpUser=com.btalk.security.StompPrincipal@4b5ef87c, simpSessionId=xh3bfbxr}]
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=clfkwpfl] closed with CloseStatus[code=1000, reason=null]
2025-07-14 21:00:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session clfkwpfl
2025-07-14 21:00:33 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:00:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503433821", parameters={masked}
2025-07-14 21:00:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503433821
2025-07-14 21:00:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/917/q3pczmrp/websocket", parameters={}
2025-07-14 21:00:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@2dda3edf
2025-07-14 21:00:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/917/q3pczmrp/websocket
2025-07-14 21:00:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:00:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=q3pczmrp]
2025-07-14 21:00:33 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Authenticated WebSocket user with ID: 3
2025-07-14 21:00:33 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 21:00:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=q3pczmrp
2025-07-14 21:00:33 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 21:00:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:00:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:34 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:00:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:00:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:34 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=clfkwpfl
2025-07-14 21:00:34 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4ab67c92, simpSessionId=clfkwpfl}], simpUser=com.btalk.security.StompPrincipal@4ab67c92, simpSessionId=clfkwpfl}]
2025-07-14 21:00:34 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=q3pczmrp
2025-07-14 21:00:34 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=q3pczmrp
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:00:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 21:00:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:00:40 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [clfkwpfl, xh3bfbxr]
2025-07-14 21:00:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:00:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 21:00:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:00:46 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Sending conversation update to userId=2
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userdiek05nz session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 21:00:46 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Sending conversation update to userId=3
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userq3pczmrp session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 21:00:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:01:04 [MessageBroker-14] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 32, active threads = 0, queued tasks = 0, completed tasks = 42], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 13]
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 21:04:05 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session diek05nz with CloseStatus[code=1001, reason=null]
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=diek05nz]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=diek05nz] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session diek05nz
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 21:04:05 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/61/user-offline session=null payload=2
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session q3pczmrp with CloseStatus[code=1001, reason=null]
2025-07-14 21:04:06 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=diek05nz
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=q3pczmrp]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=q3pczmrp] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session q3pczmrp
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 21:04:06 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/61/user-offline session=null payload=3
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2afba04b]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 21:04:07 [RMI TCP Connection(6)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 21:04:09 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 25288 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 21:04:09 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 21:04:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 21:04:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 6 JPA repository interfaces.
2025-07-14 21:04:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 21:04:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 21:04:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 21:04:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 21:04:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 784 ms
2025-07-14 21:04:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 21:04:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 21:04:10 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 21:04:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 21:04:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 21:04:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79e2606f
2025-07-14 21:04:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 21:04:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 21:04:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 21:04:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 21:04:11 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 21:04:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:04:12 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 21:04:12 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 21:04:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 21:04:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:04:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]
2025-07-14 21:04:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]]
2025-07-14 21:04:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:04:13 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:04:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 21:04:13 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.428 seconds (process running for 4.737)
2025-07-14 21:04:30 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 21:04:30 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@566bea82
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1eb16e4b
2025-07-14 21:04:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 21:04:30 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 21:04:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503670237", parameters={masked}
2025-07-14 21:04:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1e3e01b
2025-07-14 21:04:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503670237
2025-07-14 21:04:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/445/ixikdpoz/websocket", parameters={}
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1e3e01b
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/445/ixikdpoz/websocket
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ixikdpoz]
2025-07-14 21:04:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:30 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket authenticated userId=3
2025-07-14 21:04:30 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=ixikdpoz
2025-07-14 21:04:30 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:04:30 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:30 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:04:30 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=ixikdpoz
2025-07-14 21:04:30 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=ixikdpoz
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:04:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:04:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:04:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503671082", parameters={masked}
2025-07-14 21:04:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1e3e01b
2025-07-14 21:04:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503671082
2025-07-14 21:04:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/918/0hyi2qdr/websocket", parameters={}
2025-07-14 21:04:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1e3e01b
2025-07-14 21:04:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/918/0hyi2qdr/websocket
2025-07-14 21:04:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:04:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0hyi2qdr]
2025-07-14 21:04:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:31 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket authenticated userId=2
2025-07-14 21:04:31 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=0hyi2qdr
2025-07-14 21:04:31 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 21:04:31 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 21:04:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:04:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:31 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:04:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:04:31 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=0hyi2qdr
2025-07-14 21:04:31 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=0hyi2qdr
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:04:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Test", parameters={masked}
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=3, phoneNumber= (truncated)...]
2025-07-14 21:04:39 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=2&participantId=3", parameters={masked}
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:04:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:04:42 [http-nio-8080-exec-2] INFO  c.b.c.ConversationController -  Sending conversation update to userId=2
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-user0hyi2qdr session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 21:04:42 [http-nio-8080-exec-2] INFO  c.b.c.ConversationController -  Sending conversation update to userId=3
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userixikdpoz session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 21:04:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:05:13 [MessageBroker-9] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 11]
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 21:07:52 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ixikdpoz with CloseStatus[code=1001, reason=null]
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ixikdpoz]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ixikdpoz] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ixikdpoz
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 21:07:52 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/62/user-offline session=null payload=3
2025-07-14 21:07:53 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ixikdpoz
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 0hyi2qdr with CloseStatus[code=1001, reason=null]
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=0hyi2qdr]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0hyi2qdr] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0hyi2qdr
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 21:07:53 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/62/user-offline session=null payload=2
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]]
2025-07-14 21:07:54 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0hyi2qdr
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6391313a]
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 21:07:54 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-14 21:07:56 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 17.0.15 with PID 41420 (C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend\target\classes started by Thaw Htin Aung in C:\Users\Thaw Htin Aung\Desktop\B-Talk\backend)
2025-07-14 21:07:56 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-14 21:07:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-14 21:07:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-14 21:07:57 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-14 21:07:57 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-14 21:07:57 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-14 21:07:57 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-14 21:07:57 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 773 ms
2025-07-14 21:07:57 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-14 21:07:57 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-14 21:07:57 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-14 21:07:57 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-14 21:07:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-14 21:07:58 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@351ede23
2025-07-14 21:07:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-14 21:07:58 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-14 21:07:58 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-14 21:07:58 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-14 21:07:59 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-14 21:07:59 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:07:59 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-14 21:08:00 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-14 21:08:00 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 18 mappings in 'requestMappingHandlerMapping'
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(Long,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(Long,Long)
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-14 21:08:00 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:08:00 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]
2025-07-14 21:08:00 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]]
2025-07-14 21:08:00 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:08:00 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:08:00 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-14 21:08:00 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 4.656 seconds (process running for 4.978)
2025-07-14 21:08:16 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-14 21:08:16 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6325a546
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@474998da
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-14 21:08:16 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503896331", parameters={masked}
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@608c36a6
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503896331
2025-07-14 21:08:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/224/qpmaqe1i/websocket", parameters={}
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@608c36a6
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/224/qpmaqe1i/websocket
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qpmaqe1i]
2025-07-14 21:08:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:16 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter -  WebSocket connected userId=2
2025-07-14 21:08:16 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 2
2025-07-14 21:08:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=2 session=qpmaqe1i
2025-07-14 21:08:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:08:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:08:16 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 2
2025-07-14 21:08:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:08:16 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:08:17 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qpmaqe1i
2025-07-14 21:08:17 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qpmaqe1i
2025-07-14 21:08:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:08:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:08:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/2", parameters={}
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:08:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:08:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752503900873", parameters={masked}
2025-07-14 21:08:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@608c36a6
2025-07-14 21:08:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752503900873
2025-07-14 21:08:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:08:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/340/qe4q3g5m/websocket", parameters={}
2025-07-14 21:08:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@608c36a6
2025-07-14 21:08:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/340/qe4q3g5m/websocket
2025-07-14 21:08:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-14 21:08:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qe4q3g5m]
2025-07-14 21:08:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:08:21 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter -  WebSocket connected userId=3
2025-07-14 21:08:21 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener -  WebSocket connected: 3
2025-07-14 21:08:21 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=3 session=qe4q3g5m
2025-07-14 21:08:21 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 3
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:08:21 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:08:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:08:21 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-0 session=qe4q3g5m
2025-07-14 21:08:21 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /queue/conversation-updates id=sub-1 session=qe4q3g5m
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/3", parameters={}
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(Long)
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-14 21:08:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:09:00 [MessageBroker-10] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 3, completed tasks = 11]
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=H", parameters={masked}
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=2, phoneNumber= (truncated)...]
2025-07-14 21:09:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:09:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.phone_number=?
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=3&participantId=2", parameters={masked}
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(Long, Long)
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.type='PRIVATE' 
        and exists(select
            p1_0.participant_id 
        from
            participants p1_0 
        where
            p1_0.conversation_id=c1_0.conversation_id 
            and p1_0.user_id=?) 
        and exists(select
            p2_0.participant_id 
        from
            participants p2_0 
        where
            p2_0.conversation_id=c1_0.conversation_id 
            and p2_0.user_id=?)
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type) 
    values
        (?, ?, ?, ?)
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id) 
    values
        (?, ?, ?, ?)
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:09:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:09:25 [http-nio-8080-exec-5] INFO  c.b.c.ConversationController -  Sending conversation update to userId=3
2025-07-14 21:09:25 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userqe4q3g5m session=null payload={"success":true,"message":"New conversation created","data":{"conversation":{"co...(truncated)
2025-07-14 21:09:25 [http-nio-8080-exec-5] INFO  c.b.c.ConversationController -  Sending conversation update to userId=2
2025-07-14 21:09:25 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userqpmaqe1i session=null payload={"success":true,"message":"New conversation created","data":{"conversation":{"co...(truncated)
2025-07-14 21:09:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-14 21:09:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-14 21:09:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-14 21:12:28 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-14 21:12:28 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-14 21:12:29 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session qpmaqe1i with CloseStatus[code=1001, reason=null]
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=qpmaqe1i]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qpmaqe1i] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qpmaqe1i
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 2
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:12:29 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/63/user-offline session=null payload=2
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session qe4q3g5m with CloseStatus[code=1001, reason=null]
2025-07-14 21:12:30 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qpmaqe1i
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=qe4q3g5m]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:262)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:117)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:54)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 61 common frames omitted
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qe4q3g5m] closed with CloseStatus[code=1001, reason=null]
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qe4q3g5m
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 3
2025-07-14 21:12:30 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone_number,
        u1_0.profile_photo_url,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        1
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        count(m1_0.message_id) 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
        and m1_0.sender_id<>? 
        and not exists(select
            mr1_0.id 
        from
            message_reads mr1_0 
        where
            mr1_0.message_id=m1_0.message_id 
            and mr1_0.user_id=?)
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/63/user-offline session=null payload=3
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-14 21:12:31 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qe4q3g5m
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]]
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4433e4e2]
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-14 21:12:31 [RMI TCP Connection(8)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
