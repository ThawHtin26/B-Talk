2025-07-19 21:00:20 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 14876 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:00:20 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:00:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:00:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78 ms. Found 8 JPA repository interfaces.
2025-07-19 21:00:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:00:21 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:00:21 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:00:21 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:00:21 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1193 ms
2025-07-19 21:00:22 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:00:22 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:00:22 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:00:22 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:00:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:00:23 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f33e6d
2025-07-19 21:00:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:00:23 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:00:23 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:00:23 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:00:24 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:00:25 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:00:25 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:00:26 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:00:26 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
2025-07-19 21:00:26 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:00:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:00:27 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:00:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]
2025-07-19 21:00:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]]
2025-07-19 21:00:27 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:00:27 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:00:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 21:00:27 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 6.884 seconds (process running for 7.377)
2025-07-19 21:01:27 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-07-19 21:01:33 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 21:01:33 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@376314dd
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@46309fa8
2025-07-19 21:01:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 21:01:33 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-19 21:01:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935493670", parameters={masked}
2025-07-19 21:01:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:01:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935493670
2025-07-19 21:01:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/828/gosdowsb/websocket", parameters={}
2025-07-19 21:01:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:01:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/828/gosdowsb/websocket
2025-07-19 21:01:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:01:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gosdowsb]
2025-07-19 21:01:33 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=gosdowsb
2025-07-19 21:01:33 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:01:33 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-usergosdowsb subscriptionId=sub-0 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-usergosdowsb subscriptionId=sub-1 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usergosdowsb subscriptionId=sub-2 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usergosdowsb subscriptionId=sub-3 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usergosdowsb subscriptionId=sub-4 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usergosdowsb subscriptionId=sub-5 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usergosdowsb subscriptionId=sub-6 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usergosdowsb subscriptionId=sub-7 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usergosdowsb subscriptionId=sub-8 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usergosdowsb subscriptionId=sub-9 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usergosdowsb subscriptionId=sub-10 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usergosdowsb subscriptionId=sub-11 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usergosdowsb subscriptionId=sub-12 session=gosdowsb payload=byte[0]
2025-07-19 21:01:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:01:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:01:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935501743", parameters={masked}
2025-07-19 21:01:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:01:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935501743
2025-07-19 21:01:41 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/730/d3ou54ux/websocket", parameters={}
2025-07-19 21:01:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:01:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/730/d3ou54ux/websocket
2025-07-19 21:01:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:01:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d3ou54ux]
2025-07-19 21:01:41 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:01:41 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=d3ou54ux
2025-07-19 21:01:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:41 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userd3ou54ux subscriptionId=sub-0 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userd3ou54ux subscriptionId=sub-1 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userd3ou54ux subscriptionId=sub-2 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userd3ou54ux subscriptionId=sub-3 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userd3ou54ux subscriptionId=sub-4 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userd3ou54ux subscriptionId=sub-5 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userd3ou54ux subscriptionId=sub-6 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userd3ou54ux subscriptionId=sub-7 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userd3ou54ux subscriptionId=sub-8 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userd3ou54ux subscriptionId=sub-9 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userd3ou54ux subscriptionId=sub-10 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userd3ou54ux subscriptionId=sub-11 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userd3ou54ux subscriptionId=sub-12 session=d3ou54ux payload=byte[0]
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:01:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:01:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:01:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:01:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:01:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:01:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-19 21:01:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:01:48 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:01:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:49 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:01:49 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:01:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=99bc567a-f861-4700-9cd3-7dd91951dbe0&participantId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={masked}
2025-07-19 21:01:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(UUID, UUID)
2025-07-19 21:01:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:01:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type, conversation_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:01:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:01:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:01:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:01:54 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:01:54 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:01:55 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController - Sending conversation update to userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:01:55 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:55 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController - Sending conversation update to userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:01:55 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:01:55 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:01:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:01:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-19 21:01:55 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:01:55 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:01:56 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:03:59 [http-nio-8080-exec-4] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-07-19 21:03:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/d9967950-f6a9-4538-9cd7-b62749e5f4de/read", parameters={}
2025-07-19 21:04:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAsRead(Authentication, UUID)
2025-07-19 21:04:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.notification_id=?
2025-07-19 21:04:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notification marked as read, data=null)]
2025-07-19 21:04:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:04:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gosdowsb] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gosdowsb
2025-07-19 21:04:08 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:04:08 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gosdowsb
2025-07-19 21:04:08 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=gosdowsb}], simpSessionId=gosdowsb}]
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935648696", parameters={masked}
2025-07-19 21:04:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:04:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935648696
2025-07-19 21:04:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/859/c43s25zj/websocket", parameters={}
2025-07-19 21:04:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:04:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/859/c43s25zj/websocket
2025-07-19 21:04:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:04:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=c43s25zj]
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:04:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:08 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:04:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=c43s25zj
2025-07-19 21:04:08 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userc43s25zj subscriptionId=sub-0 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userc43s25zj subscriptionId=sub-1 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userc43s25zj subscriptionId=sub-2 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userc43s25zj subscriptionId=sub-3 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userc43s25zj subscriptionId=sub-4 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userc43s25zj subscriptionId=sub-5 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userc43s25zj subscriptionId=sub-6 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userc43s25zj subscriptionId=sub-7 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userc43s25zj subscriptionId=sub-8 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userc43s25zj subscriptionId=sub-9 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userc43s25zj subscriptionId=sub-10 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userc43s25zj subscriptionId=sub-11 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userc43s25zj subscriptionId=sub-12 session=c43s25zj payload=byte[0]
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:04:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:04:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:04:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:04:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:04:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:04:10 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:11 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userc43s25zj subscriptionId=sub-13 session=c43s25zj payload=byte[0]
2025-07-19 21:04:11 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/messages id=sub-14 session=c43s25zj
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:04:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:11 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userc43s25zj subscriptionId=sub-15 session=c43s25zj payload=byte[0]
2025-07-19 21:04:11 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/messages id=sub-16 session=c43s25zj
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:04:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:13 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [gosdowsb]
2025-07-19 21:04:17 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userd3ou54ux subscriptionId=sub-13 session=d3ou54ux payload=byte[0]
2025-07-19 21:04:17 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/messages id=sub-14 session=d3ou54ux
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:04:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:04:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:04:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"df8e9185-c13d-4a9e-9373-216a5dff347f","senderId":"99bc567a-f861-4700-9cd3-7dd9195 (truncated)..."]
2025-07-19 21:04:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:04:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:22 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:04:22 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/messages session=null payload={"messageId":"c21a4f9a-56c3-4175-b95b-b40259846525","conversationId":"df8e9185-c...(truncated)
2025-07-19 21:04:22 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-19 21:04:22 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:04:23 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:23 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/df8e9185-c13d-4a9e-9373-216a5dff347f/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 21:04:23 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-19 21:04:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=c21a4f9a-56c3 (truncated)...]
2025-07-19 21:04:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:04:23 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:24 [Notification-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:04:24 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:04:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:04:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=c43s25zj] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session c43s25zj
2025-07-19 21:05:44 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:05:44 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=c43s25zj
2025-07-19 21:05:44 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=c43s25zj}], simpSessionId=c43s25zj}]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d3ou54ux] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d3ou54ux
2025-07-19 21:05:44 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:05:44 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d3ou54ux
2025-07-19 21:05:44 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=d3ou54ux}], simpSessionId=d3ou54ux}]
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935744508", parameters={masked}
2025-07-19 21:05:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935744508
2025-07-19 21:05:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/706/y5klu4jg/websocket", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/706/y5klu4jg/websocket
2025-07-19 21:05:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:05:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=y5klu4jg]
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:44 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:05:44 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=y5klu4jg
2025-07-19 21:05:44 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-usery5klu4jg subscriptionId=sub-0 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-usery5klu4jg subscriptionId=sub-1 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935744580", parameters={masked}
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935744580
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:05:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/239/mfb2wncx/websocket", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/239/mfb2wncx/websocket
2025-07-19 21:05:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:05:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mfb2wncx]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:44 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usery5klu4jg subscriptionId=sub-2 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usery5klu4jg subscriptionId=sub-3 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usery5klu4jg subscriptionId=sub-4 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usery5klu4jg subscriptionId=sub-5 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usery5klu4jg subscriptionId=sub-6 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usery5klu4jg subscriptionId=sub-7 session=y5klu4jg payload=byte[0]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:05:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:05:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:45 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=mfb2wncx
2025-07-19 21:05:45 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:05:45 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-usermfb2wncx subscriptionId=sub-0 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-usermfb2wncx subscriptionId=sub-1 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usermfb2wncx subscriptionId=sub-2 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:45 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usermfb2wncx subscriptionId=sub-3 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usermfb2wncx subscriptionId=sub-4 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usermfb2wncx subscriptionId=sub-5 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usermfb2wncx subscriptionId=sub-6 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usermfb2wncx subscriptionId=sub-7 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usermfb2wncx subscriptionId=sub-8 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usermfb2wncx subscriptionId=sub-9 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usermfb2wncx subscriptionId=sub-10 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usermfb2wncx subscriptionId=sub-11 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usermfb2wncx subscriptionId=sub-12 session=mfb2wncx payload=byte[0]
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:05:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:47 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:53 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [d3ou54ux, c43s25zj]
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mfb2wncx] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mfb2wncx
2025-07-19 21:05:54 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:05:54 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mfb2wncx
2025-07-19 21:05:54 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=mfb2wncx}], simpSessionId=mfb2wncx}]
2025-07-19 21:05:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=y5klu4jg] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:05:54 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session y5klu4jg
2025-07-19 21:05:54 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:05:54 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=y5klu4jg
2025-07-19 21:05:54 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=y5klu4jg}], simpSessionId=y5klu4jg}]
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935754332", parameters={masked}
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935754332
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/310/yvuppmpp/websocket", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/310/yvuppmpp/websocket
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yvuppmpp]
2025-07-19 21:05:54 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:05:54 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=yvuppmpp
2025-07-19 21:05:54 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-useryvuppmpp subscriptionId=sub-0 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-useryvuppmpp subscriptionId=sub-1 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useryvuppmpp subscriptionId=sub-2 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useryvuppmpp subscriptionId=sub-3 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useryvuppmpp subscriptionId=sub-4 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useryvuppmpp subscriptionId=sub-5 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useryvuppmpp subscriptionId=sub-6 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useryvuppmpp subscriptionId=sub-7 session=yvuppmpp payload=byte[0]
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935754556", parameters={masked}
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935754556
2025-07-19 21:05:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:05:54 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/518/ypthbkm3/websocket", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/518/ypthbkm3/websocket
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:05:54 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ypthbkm3]
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:05:54 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:05:54 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:54 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:05:54 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ypthbkm3
2025-07-19 21:05:54 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:05:54 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:54 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userypthbkm3 subscriptionId=sub-0 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userypthbkm3 subscriptionId=sub-1 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userypthbkm3 subscriptionId=sub-2 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userypthbkm3 subscriptionId=sub-3 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userypthbkm3 subscriptionId=sub-4 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:54 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userypthbkm3 subscriptionId=sub-5 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userypthbkm3 subscriptionId=sub-6 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userypthbkm3 subscriptionId=sub-7 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userypthbkm3 subscriptionId=sub-8 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userypthbkm3 subscriptionId=sub-9 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userypthbkm3 subscriptionId=sub-10 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userypthbkm3 subscriptionId=sub-11 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:54 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userypthbkm3 subscriptionId=sub-12 session=ypthbkm3 payload=byte[0]
2025-07-19 21:05:55 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:55 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:55 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:05:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:05:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:05:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:05:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:05:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:05:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:03 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [mfb2wncx, y5klu4jg]
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ypthbkm3] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ypthbkm3
2025-07-19 21:06:21 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:06:21 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ypthbkm3
2025-07-19 21:06:21 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ypthbkm3}], simpSessionId=ypthbkm3}]
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yvuppmpp] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yvuppmpp
2025-07-19 21:06:21 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:06:21 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yvuppmpp
2025-07-19 21:06:21 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=yvuppmpp}], simpSessionId=yvuppmpp}]
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935781348", parameters={masked}
2025-07-19 21:06:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935781348
2025-07-19 21:06:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/841/1dy5hfn1/websocket", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/841/1dy5hfn1/websocket
2025-07-19 21:06:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1dy5hfn1]
2025-07-19 21:06:21 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1dy5hfn1
2025-07-19 21:06:21 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:21 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-user1dy5hfn1 subscriptionId=sub-0 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-user1dy5hfn1 subscriptionId=sub-1 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935781403", parameters={masked}
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935781403
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user1dy5hfn1 subscriptionId=sub-2 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user1dy5hfn1 subscriptionId=sub-3 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user1dy5hfn1 subscriptionId=sub-4 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user1dy5hfn1 subscriptionId=sub-5 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user1dy5hfn1 subscriptionId=sub-6 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user1dy5hfn1 subscriptionId=sub-7 session=1dy5hfn1 payload=byte[0]
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/275/puv450ym/websocket", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/275/puv450ym/websocket
2025-07-19 21:06:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=puv450ym]
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:06:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:06:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:21 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=puv450ym
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:21 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userpuv450ym subscriptionId=sub-0 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userpuv450ym subscriptionId=sub-1 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userpuv450ym subscriptionId=sub-2 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userpuv450ym subscriptionId=sub-3 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userpuv450ym subscriptionId=sub-4 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userpuv450ym subscriptionId=sub-5 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userpuv450ym subscriptionId=sub-6 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userpuv450ym subscriptionId=sub-7 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userpuv450ym subscriptionId=sub-8 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userpuv450ym subscriptionId=sub-9 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userpuv450ym subscriptionId=sub-10 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userpuv450ym subscriptionId=sub-11 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userpuv450ym subscriptionId=sub-12 session=puv450ym payload=byte[0]
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:06:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:06:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:22 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:06:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:06:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:28 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [yvuppmpp, ypthbkm3]
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=puv450ym] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session puv450ym
2025-07-19 21:06:31 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:06:31 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=puv450ym
2025-07-19 21:06:31 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=puv450ym}], simpSessionId=puv450ym}]
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1dy5hfn1] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1dy5hfn1
2025-07-19 21:06:31 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:06:31 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1dy5hfn1
2025-07-19 21:06:31 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1dy5hfn1}], simpSessionId=1dy5hfn1}]
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935791289", parameters={masked}
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935791289
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935791290", parameters={masked}
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935791290
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/369/ql34kccq/websocket", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/369/ql34kccq/websocket
2025-07-19 21:06:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ql34kccq]
2025-07-19 21:06:31 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:31 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ql34kccq
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/170/5qdmqkq4/websocket", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/170/5qdmqkq4/websocket
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5qdmqkq4]
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935791330", parameters={masked}
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935791330
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935791333", parameters={masked}
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935791333
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5qdmqkq4
2025-07-19 21:06:31 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/071/bzilvvt2/websocket", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/071/bzilvvt2/websocket
2025-07-19 21:06:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bzilvvt2]
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/438/dm2cdbtv/websocket", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/438/dm2cdbtv/websocket
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:06:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dm2cdbtv]
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:06:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:06:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:31 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:31 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=bzilvvt2
2025-07-19 21:06:31 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:06:31 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=dm2cdbtv
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:06:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:31 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:06:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:06:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:06:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:06:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:06:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:06:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:34 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:06:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:06:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:06:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:06:38 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [puv450ym, 1dy5hfn1]
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ql34kccq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5qdmqkq4] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ql34kccq
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5qdmqkq4
2025-07-19 21:07:42 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:07:42 [http-nio-8080-exec-4] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:07:42 [clientInboundChannel-51] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ql34kccq
2025-07-19 21:07:42 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5qdmqkq4
2025-07-19 21:07:42 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ql34kccq}], simpSessionId=ql34kccq}]
2025-07-19 21:07:42 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5qdmqkq4}], simpSessionId=5qdmqkq4}]
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bzilvvt2] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dm2cdbtv] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bzilvvt2
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dm2cdbtv
2025-07-19 21:07:42 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:07:42 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:07:42 [clientInboundChannel-58] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bzilvvt2
2025-07-19 21:07:42 [clientInboundChannel-57] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dm2cdbtv
2025-07-19 21:07:42 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=dm2cdbtv}], simpSessionId=dm2cdbtv}]
2025-07-19 21:07:42 [clientOutboundChannel-29] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bzilvvt2}], simpSessionId=bzilvvt2}]
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935862626", parameters={masked}
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935862628", parameters={masked}
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935862626
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935862628
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/840/kmqk4gzr/websocket", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/840/kmqk4gzr/websocket
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kmqk4gzr]
2025-07-19 21:07:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/566/3rr133n1/websocket", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/566/3rr133n1/websocket
2025-07-19 21:07:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:07:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3rr133n1]
2025-07-19 21:07:42 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:07:42 [clientInboundChannel-62] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=kmqk4gzr
2025-07-19 21:07:42 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=3rr133n1
2025-07-19 21:07:42 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:07:42 [clientInboundChannel-51] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user3rr133n1 subscriptionId=sub-0 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user3rr133n1 subscriptionId=sub-1 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [clientInboundChannel-60] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user3rr133n1 subscriptionId=sub-2 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [clientInboundChannel-57] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user3rr133n1 subscriptionId=sub-3 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [clientInboundChannel-63] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user3rr133n1 subscriptionId=sub-4 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user3rr133n1 subscriptionId=sub-5 session=3rr133n1 payload=byte[0]
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:07:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935862837", parameters={masked}
2025-07-19 21:07:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935862839", parameters={masked}
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935862839
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935862837
2025-07-19 21:07:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/556/aopjwsbe/websocket", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/556/aopjwsbe/websocket
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:07:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=aopjwsbe]
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/609/1bp0i0qh/websocket", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/609/1bp0i0qh/websocket
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:07:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1bp0i0qh]
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:07:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:07:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:07:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:07:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:07:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:07:43 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:07:43 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=aopjwsbe
2025-07-19 21:07:43 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:07:43 [clientInboundChannel-59] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1bp0i0qh
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:07:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752935863175", parameters={masked}
2025-07-19 21:07:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752935863175
2025-07-19 21:07:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:07:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/306/hvpl0lbm/websocket", parameters={}
2025-07-19 21:07:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:07:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/306/hvpl0lbm/websocket
2025-07-19 21:07:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:07:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hvpl0lbm]
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:07:43 [clientInboundChannel-60] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=hvpl0lbm
2025-07-19 21:07:43 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:07:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:43 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:07:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:07:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:45 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:07:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:07:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:07:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:07:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:07:48 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 4 sessions: [bzilvvt2, ql34kccq, 5qdmqkq4, dm2cdbtv]
2025-07-19 21:13:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=aopjwsbe]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-19 21:13:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=3rr133n1]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-19 21:18:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=aopjwsbe] closed with CloseStatus[code=1006, reason=null]
2025-07-19 21:18:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3rr133n1] closed with CloseStatus[code=1006, reason=null]
2025-07-19 21:18:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session aopjwsbe
2025-07-19 21:18:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3rr133n1
2025-07-19 21:18:12 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:12 [http-nio-8080-exec-9] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:13:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=hvpl0lbm]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-19 21:13:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=1bp0i0qh]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-19 21:18:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1bp0i0qh] closed with CloseStatus[code=1006, reason=null]
2025-07-19 21:18:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1bp0i0qh
2025-07-19 21:18:12 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hvpl0lbm] closed with CloseStatus[code=1006, reason=null]
2025-07-19 21:18:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hvpl0lbm
2025-07-19 21:18:12 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:12 [clientInboundChannel-72] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1bp0i0qh
2025-07-19 21:18:12 [clientInboundChannel-75] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hvpl0lbm
2025-07-19 21:13:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=kmqk4gzr]
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1331)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1219)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-19 21:18:12 [clientInboundChannel-69] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3rr133n1
2025-07-19 21:18:12 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3rr133n1}], simpSessionId=3rr133n1}]
2025-07-19 21:18:12 [clientInboundChannel-67] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=aopjwsbe
2025-07-19 21:18:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kmqk4gzr] closed with CloseStatus[code=1006, reason=null]
2025-07-19 21:18:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kmqk4gzr
2025-07-19 21:18:12 [http-nio-8080-exec-7] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:12 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=aopjwsbe}], simpSessionId=aopjwsbe}]
2025-07-19 21:18:12 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=hvpl0lbm}], simpSessionId=hvpl0lbm}]
2025-07-19 21:18:12 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1bp0i0qh}], simpSessionId=1bp0i0qh}]
2025-07-19 21:18:12 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kmqk4gzr
2025-07-19 21:18:12 [clientOutboundChannel-40] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=kmqk4gzr}], simpSessionId=kmqk4gzr}]
2025-07-19 21:18:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493174", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493176", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493174
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493176
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/352/j5s5z3bm/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/352/j5s5z3bm/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=j5s5z3bm]
2025-07-19 21:18:13 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=j5s5z3bm
2025-07-19 21:18:13 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/471/tecygafu/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/471/tecygafu/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tecygafu]
2025-07-19 21:18:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:13 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=tecygafu
2025-07-19 21:18:13 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493410", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493410
2025-07-19 21:18:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/240/xjumqldg/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/240/xjumqldg/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xjumqldg]
2025-07-19 21:18:13 [clientInboundChannel-69] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xjumqldg
2025-07-19 21:18:13 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493470", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493470
2025-07-19 21:18:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493472", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493472
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/669/umoz0od0/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/669/umoz0od0/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=umoz0od0]
2025-07-19 21:18:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/890/5y53rpfr/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/890/5y53rpfr/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5y53rpfr]
2025-07-19 21:18:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:13 [clientInboundChannel-75] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=umoz0od0
2025-07-19 21:18:13 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:13 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5y53rpfr
2025-07-19 21:18:13 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936493632", parameters={masked}
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936493632
2025-07-19 21:18:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/930/ykazqoy4/websocket", parameters={}
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/930/ykazqoy4/websocket
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ykazqoy4]
2025-07-19 21:18:13 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ykazqoy4
2025-07-19 21:18:13 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:18 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 5 sessions: [1bp0i0qh, hvpl0lbm, kmqk4gzr, 3rr133n1, aopjwsbe]
2025-07-19 21:18:23 [http-nio-8080-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@725033e8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:23 [http-nio-8080-exec-9] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3e4f1b59 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:23 [http-nio-8080-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5f33e6d (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:23 [http-nio-8080-exec-3] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6f198776 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:25 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1997a2de (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:33 [http-nio-8080-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@36d6c00b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:33 [http-nio-8080-exec-9] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@76d50784 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:33 [http-nio-8080-exec-5] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@426e4170 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:18:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:18:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:33 [http-nio-8080-exec-3] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@b9ded96 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:18:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:35 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1da82534 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-07-19 21:18:35 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m11s648ms871s800ns).
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tecygafu] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:18:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=j5s5z3bm] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:18:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xjumqldg] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tecygafu
2025-07-19 21:18:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session j5s5z3bm
2025-07-19 21:18:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xjumqldg
2025-07-19 21:18:52 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:52 [http-nio-8080-exec-2] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:52 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:18:52 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xjumqldg
2025-07-19 21:18:52 [clientInboundChannel-66] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=j5s5z3bm
2025-07-19 21:18:52 [clientInboundChannel-70] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tecygafu
2025-07-19 21:18:52 [clientOutboundChannel-48] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=j5s5z3bm}], simpSessionId=j5s5z3bm}]
2025-07-19 21:18:52 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xjumqldg}], simpSessionId=xjumqldg}]
2025-07-19 21:18:52 [clientOutboundChannel-49] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=tecygafu}], simpSessionId=tecygafu}]
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936532719", parameters={masked}
2025-07-19 21:18:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936532719
2025-07-19 21:18:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936532719", parameters={masked}
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936532719
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/248/1cysqwhl/websocket", parameters={}
2025-07-19 21:18:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/248/1cysqwhl/websocket
2025-07-19 21:18:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1cysqwhl]
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/895/pvtub2ap/websocket", parameters={}
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/895/pvtub2ap/websocket
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pvtub2ap]
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:52 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:52 [clientInboundChannel-75] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1cysqwhl
2025-07-19 21:18:52 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pvtub2ap
2025-07-19 21:18:52 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936532756", parameters={masked}
2025-07-19 21:18:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936532756
2025-07-19 21:18:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/541/iguswtb2/websocket", parameters={}
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/541/iguswtb2/websocket
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iguswtb2]
2025-07-19 21:18:52 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=iguswtb2
2025-07-19 21:18:52 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:18:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:53 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:18:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:53 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:53 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:18:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:18:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:18:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:18:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:18:58 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [xjumqldg, j5s5z3bm, tecygafu]
2025-07-19 21:19:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1cysqwhl] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iguswtb2] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pvtub2ap] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:19:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1cysqwhl
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pvtub2ap
2025-07-19 21:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iguswtb2
2025-07-19 21:19:01 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:01 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:01 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:01 [clientInboundChannel-72] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iguswtb2
2025-07-19 21:19:01 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1cysqwhl
2025-07-19 21:19:01 [clientInboundChannel-69] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pvtub2ap
2025-07-19 21:19:01 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iguswtb2}], simpSessionId=iguswtb2}]
2025-07-19 21:19:01 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1cysqwhl}], simpSessionId=1cysqwhl}]
2025-07-19 21:19:01 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pvtub2ap}], simpSessionId=pvtub2ap}]
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936541525", parameters={masked}
2025-07-19 21:19:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936541523", parameters={masked}
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936541525
2025-07-19 21:19:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936541523
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/944/0qppx2y0/websocket", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/944/0qppx2y0/websocket
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0qppx2y0]
2025-07-19 21:19:01 [clientInboundChannel-65] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=0qppx2y0
2025-07-19 21:19:01 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/401/5qde2zw4/websocket", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/401/5qde2zw4/websocket
2025-07-19 21:19:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5qde2zw4]
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:19:01 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:01 [clientInboundChannel-74] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=5qde2zw4
2025-07-19 21:19:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936541685", parameters={masked}
2025-07-19 21:19:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936541685
2025-07-19 21:19:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/442/j2xoya4u/websocket", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4f38acf
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/442/j2xoya4u/websocket
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=j2xoya4u]
2025-07-19 21:19:01 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:01 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=j2xoya4u
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:19:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:19:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:19:01 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:19:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:19:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:19:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:19:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:19:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:02 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:19:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:19:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:19:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-19 21:19:05 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session j2xoya4u with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=j2xoya4u]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=j2xoya4u] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session j2xoya4u
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [clientInboundChannel-76] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=j2xoya4u
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session umoz0od0 with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=umoz0od0]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=umoz0od0] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session umoz0od0
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 5qde2zw4 with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [clientInboundChannel-73] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=umoz0od0
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=5qde2zw4]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5qde2zw4] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5qde2zw4
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 5y53rpfr with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [clientInboundChannel-77] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5qde2zw4
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=5y53rpfr]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5y53rpfr] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5y53rpfr
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 0qppx2y0 with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [clientInboundChannel-65] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5y53rpfr
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=0qppx2y0]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0qppx2y0] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0qppx2y0
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ykazqoy4 with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [clientInboundChannel-68] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0qppx2y0
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ykazqoy4]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ykazqoy4] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ykazqoy4
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:19:05 [clientInboundChannel-78] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ykazqoy4
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2161cc6f]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:19:05 [RMI TCP Connection(16)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 21:19:07 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 10228 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:19:07 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:19:07 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 13684 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:19:07 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:19:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:19:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:19:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88 ms. Found 8 JPA repository interfaces.
2025-07-19 21:19:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 90 ms. Found 8 JPA repository interfaces.
2025-07-19 21:19:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:19:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:19:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:19:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:19:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:19:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:19:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:19:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1683 ms
2025-07-19 21:19:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:19:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1692 ms
2025-07-19 21:19:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:19:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:19:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:19:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:19:09 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:19:09 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:19:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:19:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:19:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:19:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:19:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1bb172dd
2025-07-19 21:19:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:19:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@46994f26
2025-07-19 21:19:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:19:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:19:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:19:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:19:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:19:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:19:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:19:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:19:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:19:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:19:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:19:13 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:19:13 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:19:14 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:19:14 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:19:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:19:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:19:15 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 21:19:15 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 8.58 seconds (process running for 9.741)
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3eebd1ee]
2025-07-19 21:19:15 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:19:15 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-07-19 21:19:15 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:19:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 21:19:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-19 21:19:16 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-19 21:19:16 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-07-19 21:19:56 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 21:19:56 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@726c1889
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@24546513
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 21:19:56 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936596736", parameters={masked}
2025-07-19 21:19:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936596734", parameters={masked}
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936596734
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936596736
2025-07-19 21:19:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/024/at34a1gk/websocket", parameters={}
2025-07-19 21:19:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/024/at34a1gk/websocket
2025-07-19 21:19:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936596927", parameters={masked}
2025-07-19 21:19:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936596927
2025-07-19 21:19:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/952/xec4g33a/websocket", parameters={}
2025-07-19 21:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/952/xec4g33a/websocket
2025-07-19 21:19:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=at34a1gk]
2025-07-19 21:19:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xec4g33a]
2025-07-19 21:19:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/203/1nycx1w5/websocket", parameters={}
2025-07-19 21:19:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:19:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/203/1nycx1w5/websocket
2025-07-19 21:19:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:19:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1nycx1w5]
2025-07-19 21:19:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=1nycx1w5
2025-07-19 21:19:57 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=at34a1gk
2025-07-19 21:19:57 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=xec4g33a
2025-07-19 21:19:57 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:57 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:57 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:19:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:19:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:19:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:20:15 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[3 current WS(3)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 4, completed tasks = 4]
2025-07-19 21:20:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:20:24 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-07-19 21:20:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:20:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=at34a1gk] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:20:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session at34a1gk
2025-07-19 21:20:56 [http-nio-8080-exec-1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:20:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=at34a1gk
2025-07-19 21:20:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xec4g33a] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:20:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xec4g33a
2025-07-19 21:20:56 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:20:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1nycx1w5] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:20:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1nycx1w5
2025-07-19 21:20:56 [http-nio-8080-exec-8] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:20:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1nycx1w5
2025-07-19 21:20:56 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xec4g33a
2025-07-19 21:20:56 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=at34a1gk}], simpSessionId=at34a1gk}]
2025-07-19 21:20:56 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1nycx1w5}], simpSessionId=1nycx1w5}]
2025-07-19 21:20:56 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xec4g33a}], simpSessionId=xec4g33a}]
2025-07-19 21:21:01 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [1nycx1w5, xec4g33a, at34a1gk]
2025-07-19 21:21:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936680752", parameters={masked}
2025-07-19 21:21:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936680754", parameters={masked}
2025-07-19 21:21:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936680752
2025-07-19 21:21:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936680754
2025-07-19 21:21:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/957/baqrcdsq/websocket", parameters={}
2025-07-19 21:21:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/957/baqrcdsq/websocket
2025-07-19 21:21:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:21:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/139/pqi2unh4/websocket", parameters={}
2025-07-19 21:21:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/139/pqi2unh4/websocket
2025-07-19 21:21:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=baqrcdsq]
2025-07-19 21:21:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:21:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pqi2unh4]
2025-07-19 21:21:20 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:21:20 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=baqrcdsq
2025-07-19 21:21:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:21:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:21:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:21:20 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:21:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=pqi2unh4
2025-07-19 21:21:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936680978", parameters={masked}
2025-07-19 21:21:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936680978
2025-07-19 21:21:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/360/2krb0s0o/websocket", parameters={}
2025-07-19 21:21:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/360/2krb0s0o/websocket
2025-07-19 21:21:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:21:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2krb0s0o]
2025-07-19 21:21:21 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=2krb0s0o
2025-07-19 21:21:21 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:21:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:21:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:21:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:21:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:21:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:21:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:21:45 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:21:45 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:21:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:46 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:21:46 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:21:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:21:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:21:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:21:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:21:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:55 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936715439", parameters={masked}
2025-07-19 21:21:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936715438", parameters={masked}
2025-07-19 21:21:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936715438
2025-07-19 21:21:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936715439
2025-07-19 21:21:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:55 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/356/4qpx4bnx/websocket", parameters={}
2025-07-19 21:21:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/356/4qpx4bnx/websocket
2025-07-19 21:21:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:21:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4qpx4bnx]
2025-07-19 21:21:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/547/vm3vqhpt/websocket", parameters={}
2025-07-19 21:21:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:21:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/547/vm3vqhpt/websocket
2025-07-19 21:21:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:21:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vm3vqhpt]
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:21:55 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=4qpx4bnx
2025-07-19 21:21:55 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:21:55 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=vm3vqhpt
2025-07-19 21:21:55 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:21:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:21:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:22:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:22:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:22:09 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:22:09 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:22:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:22:10 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-uservm3vqhpt subscriptionId=sub-1 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-uservm3vqhpt subscriptionId=sub-2 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-uservm3vqhpt subscriptionId=sub-4 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-uservm3vqhpt subscriptionId=sub-3 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-uservm3vqhpt subscriptionId=sub-5 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-uservm3vqhpt subscriptionId=sub-0 session=vm3vqhpt payload=byte[0]
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:22:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:22:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:22:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:22:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:22:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:22:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=99bc567a-f861-4700-9cd3-7dd91951dbe0&participantId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={masked}
2025-07-19 21:22:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(UUID, UUID)
2025-07-19 21:22:21 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Creating private conversation between 99bc567a-f861-4700-9cd3-7dd91951dbe0 and 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:22:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type, conversation_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:22:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:22:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:22:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:22:24 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:25 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Sending conversation update to userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:22:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 0
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Sending conversation update to userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:22:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:25 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 0
2025-07-19 21:22:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-19 21:22:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:25 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:22:26 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: New Conversation
2025-07-19 21:22:26 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:22:26 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:26 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 1
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pqi2unh4] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:22:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2krb0s0o] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:22:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2krb0s0o
2025-07-19 21:22:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=baqrcdsq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pqi2unh4
2025-07-19 21:22:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session baqrcdsq
2025-07-19 21:22:42 [http-nio-8080-exec-6] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:22:42 [http-nio-8080-exec-3] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:22:42 [http-nio-8080-exec-5] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:22:42 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2krb0s0o
2025-07-19 21:22:42 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=baqrcdsq
2025-07-19 21:22:42 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=2krb0s0o}], simpSessionId=2krb0s0o}]
2025-07-19 21:22:42 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=baqrcdsq}], simpSessionId=baqrcdsq}]
2025-07-19 21:22:42 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pqi2unh4
2025-07-19 21:22:42 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=pqi2unh4}], simpSessionId=pqi2unh4}]
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936762159", parameters={masked}
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936762160", parameters={masked}
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936762159
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936762160
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/414/kfwwnjwq/websocket", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/414/kfwwnjwq/websocket
2025-07-19 21:22:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:22:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kfwwnjwq]
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/089/id4citqv/websocket", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/089/id4citqv/websocket
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=id4citqv]
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:42 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=kfwwnjwq
2025-07-19 21:22:42 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:22:42 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=id4citqv
2025-07-19 21:22:42 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:22:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752936762216", parameters={masked}
2025-07-19 21:22:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752936762216
2025-07-19 21:22:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/660/53fadphr/websocket", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@5fc88c91
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/660/53fadphr/websocket
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:22:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=53fadphr]
2025-07-19 21:22:42 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=53fadphr
2025-07-19 21:22:42 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: null
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:22:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:22:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:22:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:22:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:22:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:22:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:22:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:22:51 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [2krb0s0o, baqrcdsq, pqi2unh4]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-19 21:27:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session id4citqv with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=id4citqv]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=id4citqv] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session id4citqv
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session vm3vqhpt with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=id4citqv
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=vm3vqhpt]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vm3vqhpt] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vm3vqhpt
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session kfwwnjwq with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vm3vqhpt
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=kfwwnjwq]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kfwwnjwq] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kfwwnjwq
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 4qpx4bnx with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kfwwnjwq
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=4qpx4bnx]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4qpx4bnx] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4qpx4bnx
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 53fadphr with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4qpx4bnx
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=53fadphr]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=53fadphr] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 53fadphr
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:27:00 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=53fadphr
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58e9cc9a]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 21:27:00 [RMI TCP Connection(11)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-19 21:27:02 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 23196 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:27:02 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:27:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:27:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 8 JPA repository interfaces.
2025-07-19 21:27:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:27:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:27:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:27:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:27:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1344 ms
2025-07-19 21:27:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:27:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:27:03 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:27:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:27:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:27:04 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5dacf18d
2025-07-19 21:27:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:27:05 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:27:05 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:27:05 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:27:05 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:27:06 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:27:07 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:27:07 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:27:08 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:27:08 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:27:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]
2025-07-19 21:27:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]]
2025-07-19 21:27:08 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:27:08 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:27:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 21:27:08 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 6.957 seconds (process running for 7.434)
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74a89061
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@d303dc9
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-19 21:27:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937035126", parameters={masked}
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937035057", parameters={masked}
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937035055", parameters={masked}
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937035057
2025-07-19 21:27:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937035126
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937035055
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/966/cijbw2gx/websocket", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/966/cijbw2gx/websocket
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:15 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:15 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cijbw2gx]
2025-07-19 21:27:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/431/ukk1hy5d/websocket", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/431/ukk1hy5d/websocket
2025-07-19 21:27:15 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:15 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:15 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ukk1hy5d]
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:15 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:15 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:15 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/544/jkfgieol/websocket", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/544/jkfgieol/websocket
2025-07-19 21:27:15 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:15 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:15 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jkfgieol]
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:15 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=jkfgieol
2025-07-19 21:27:15 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=cijbw2gx
2025-07-19 21:27:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=ukk1hy5d
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:15 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:15 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:15 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:15 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:15 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-usercijbw2gx subscriptionId=sub-0 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-usercijbw2gx subscriptionId=sub-1 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usercijbw2gx subscriptionId=sub-2 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usercijbw2gx subscriptionId=sub-3 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usercijbw2gx subscriptionId=sub-4 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usercijbw2gx subscriptionId=sub-5 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usercijbw2gx subscriptionId=sub-6 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usercijbw2gx subscriptionId=sub-7 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usercijbw2gx subscriptionId=sub-8 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usercijbw2gx subscriptionId=sub-9 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usercijbw2gx subscriptionId=sub-10 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usercijbw2gx subscriptionId=sub-11 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usercijbw2gx subscriptionId=sub-12 session=cijbw2gx user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937038746", parameters={masked}
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937038746
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937038748", parameters={masked}
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937038748
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/498/d3dp5ufy/websocket", parameters={}
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/498/d3dp5ufy/websocket
2025-07-19 21:27:18 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:18 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:18 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d3dp5ufy]
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/619/aprmahpm/websocket", parameters={}
2025-07-19 21:27:18 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/619/aprmahpm/websocket
2025-07-19 21:27:18 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:18 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:18 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=aprmahpm]
2025-07-19 21:27:18 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:18 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:18 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:18 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:18 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937038878", parameters={masked}
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937038878
2025-07-19 21:27:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/334/qi2gmb4x/websocket", parameters={}
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/334/qi2gmb4x/websocket
2025-07-19 21:27:18 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:18 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:18 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qi2gmb4x]
2025-07-19 21:27:18 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:18 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:18 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:18 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:18 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=d3dp5ufy
2025-07-19 21:27:18 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:18 [clientOutboundChannel-4] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:19 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [clientOutboundChannel-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:19 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=aprmahpm
2025-07-19 21:27:19 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:19 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=qi2gmb4x
2025-07-19 21:27:19 [clientOutboundChannel-6] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:19 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:19 [clientOutboundChannel-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=aprmahpm] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d3dp5ufy] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qi2gmb4x] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session aprmahpm
2025-07-19 21:27:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d3dp5ufy
2025-07-19 21:27:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qi2gmb4x
2025-07-19 21:27:21 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937041582", parameters={masked}
2025-07-19 21:27:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937041583", parameters={masked}
2025-07-19 21:27:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937041582
2025-07-19 21:27:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937041583
2025-07-19 21:27:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/621/0no3vogp/websocket", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/621/0no3vogp/websocket
2025-07-19 21:27:21 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:21 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:21 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0no3vogp]
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/499/v303rluf/websocket", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/499/v303rluf/websocket
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:21 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:21 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937041706", parameters={masked}
2025-07-19 21:27:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937041706
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=v303rluf]
2025-07-19 21:27:21 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:21 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:21 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:21 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:21 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/977/rtvrl2mj/websocket", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/977/rtvrl2mj/websocket
2025-07-19 21:27:21 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:21 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:21 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rtvrl2mj]
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=rtvrl2mj
2025-07-19 21:27:21 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=aprmahpm
2025-07-19 21:27:21 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=0no3vogp
2025-07-19 21:27:21 [clientOutboundChannel-9] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@553f760e, simpSessionId=aprmahpm}], simpUser=com.btalk.security.StompPrincipal@553f760e, simpSessionId=aprmahpm}]
2025-07-19 21:27:21 [clientOutboundChannel-7] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:21 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=v303rluf
2025-07-19 21:27:21 [clientOutboundChannel-10] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [clientOutboundChannel-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [clientOutboundChannel-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:21 [clientOutboundChannel-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:21 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qi2gmb4x
2025-07-19 21:27:21 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@325eb602, simpSessionId=qi2gmb4x}], simpUser=com.btalk.security.StompPrincipal@325eb602, simpSessionId=qi2gmb4x}]
2025-07-19 21:27:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:22 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d3dp5ufy
2025-07-19 21:27:22 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@548fb1c5, simpSessionId=d3dp5ufy}], simpUser=com.btalk.security.StompPrincipal@548fb1c5, simpSessionId=d3dp5ufy}]
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:27:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:27:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:27:30 [http-nio-8080-exec-5] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:27:30 [http-nio-8080-exec-5] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:27:30 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [d3dp5ufy, qi2gmb4x, aprmahpm]
2025-07-19 21:27:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:30 [http-nio-8080-exec-5] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:27:30 [http-nio-8080-exec-5] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:27:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:27:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:27:52 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:27:52 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:52 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:27:52 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:27:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rtvrl2mj] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0no3vogp] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=v303rluf] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rtvrl2mj
2025-07-19 21:27:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0no3vogp
2025-07-19 21:27:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session v303rluf
2025-07-19 21:27:55 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:55 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:55 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937076074", parameters={masked}
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937076074
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937076076", parameters={masked}
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937076076
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/434/nxkpra52/websocket", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/434/nxkpra52/websocket
2025-07-19 21:27:56 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:56 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:56 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nxkpra52]
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/934/eceurcnc/websocket", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/934/eceurcnc/websocket
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:56 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:56 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=eceurcnc]
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937076229", parameters={masked}
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937076229
2025-07-19 21:27:56 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:56 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:56 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:56 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:56 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:56 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/636/e4m0mxqw/websocket", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/636/e4m0mxqw/websocket
2025-07-19 21:27:56 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:56 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:56 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=e4m0mxqw]
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:27:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:56 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=v303rluf
2025-07-19 21:27:56 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@46cbce8b, simpSessionId=v303rluf}], simpUser=com.btalk.security.StompPrincipal@46cbce8b, simpSessionId=v303rluf}]
2025-07-19 21:27:56 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=eceurcnc
2025-07-19 21:27:56 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=nxkpra52
2025-07-19 21:27:56 [clientOutboundChannel-14] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [clientOutboundChannel-15] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:56 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0no3vogp
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=e4m0mxqw
2025-07-19 21:27:56 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:27:56 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@65586bad, simpSessionId=0no3vogp}], simpUser=com.btalk.security.StompPrincipal@65586bad, simpSessionId=0no3vogp}]
2025-07-19 21:27:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:56 [clientOutboundChannel-15] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [clientOutboundChannel-14] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:56 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rtvrl2mj
2025-07-19 21:27:56 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@23965f5f, simpSessionId=rtvrl2mj}], simpUser=com.btalk.security.StompPrincipal@23965f5f, simpSessionId=rtvrl2mj}]
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cijbw2gx] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jkfgieol] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jkfgieol
2025-07-19 21:27:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ukk1hy5d] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:27:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cijbw2gx
2025-07-19 21:27:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ukk1hy5d
2025-07-19 21:27:57 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:57 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:57 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937077986", parameters={masked}
2025-07-19 21:27:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937077985", parameters={masked}
2025-07-19 21:27:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937077986
2025-07-19 21:27:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937077985
2025-07-19 21:27:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/841/lm255ybu/websocket", parameters={}
2025-07-19 21:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/841/lm255ybu/websocket
2025-07-19 21:27:57 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:57 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:57 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lm255ybu]
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/645/tuy0vakq/websocket", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/645/tuy0vakq/websocket
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:58 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:58 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tuy0vakq]
2025-07-19 21:27:58 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:58 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937078036", parameters={masked}
2025-07-19 21:27:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937078036
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/759/zrkas1kb/websocket", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/759/zrkas1kb/websocket
2025-07-19 21:27:58 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:27:58 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:27:58 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zrkas1kb]
2025-07-19 21:27:58 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:27:58 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:27:58 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:27:58 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:58 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:58 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=lm255ybu
2025-07-19 21:27:58 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=tuy0vakq
2025-07-19 21:27:58 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [clientOutboundChannel-4] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=zrkas1kb
2025-07-19 21:27:58 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:27:58 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:58 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [clientOutboundChannel-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:27:58 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:27:58 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ukk1hy5d
2025-07-19 21:27:58 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@75d18e60, simpSessionId=ukk1hy5d}], simpUser=com.btalk.security.StompPrincipal@75d18e60, simpSessionId=ukk1hy5d}]
2025-07-19 21:27:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:27:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:58 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cijbw2gx
2025-07-19 21:27:58 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5bf892d9, simpSessionId=cijbw2gx}], simpUser=com.btalk.security.StompPrincipal@5bf892d9, simpSessionId=cijbw2gx}]
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:27:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:27:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:27:58 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jkfgieol
2025-07-19 21:27:58 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@3c994e39, simpSessionId=jkfgieol}], simpUser=com.btalk.security.StompPrincipal@3c994e39, simpSessionId=jkfgieol}]
2025-07-19 21:28:05 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [ukk1hy5d, cijbw2gx, rtvrl2mj, 0no3vogp, jkfgieol, v303rluf]
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:28:08 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[6 current WS(6)-HttpStream(0)-HttpPoll(0), 15 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(15)-CONNECTED(15)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 111], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 24], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 7, completed tasks = 17]
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:28:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:28:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Y", parameters={masked}
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[])]
2025-07-19 21:28:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:28:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:28:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:28:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&participantId=99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={masked}
2025-07-19 21:28:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(UUID, UUID)
2025-07-19 21:28:16 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController - Creating private conversation between 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 and 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:28:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:28:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type, conversation_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:28:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:28:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:28:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:28:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:28:19 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:28:20 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController - Sending conversation update to userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userzrkas1kb session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userlm255ybu session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-usertuy0vakq session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userlm255ybu session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usertuy0vakq session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userzrkas1kb session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 0
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController - Sending conversation update to userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-usere4m0mxqw session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-usereceurcnc session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-usernxkpra52 session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usere4m0mxqw session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usereceurcnc session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usernxkpra52 session=null payload=0
2025-07-19 21:28:20 [http-nio-8080-exec-3] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 0
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-19 21:28:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:28:20 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:28:21 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Conversation
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-usernxkpra52 session=null payload={"notificationId":"4419872c-5ee4-448f-9ebd-778695e3d494","recipientId":"99bc567a...(truncated)
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-usereceurcnc session=null payload={"notificationId":"4419872c-5ee4-448f-9ebd-778695e3d494","recipientId":"99bc567a...(truncated)
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-usere4m0mxqw session=null payload={"notificationId":"4419872c-5ee4-448f-9ebd-778695e3d494","recipientId":"99bc567a...(truncated)
2025-07-19 21:28:21 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:28:21 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usere4m0mxqw session=null payload=1
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usereceurcnc session=null payload=1
2025-07-19 21:28:21 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usernxkpra52 session=null payload=1
2025-07-19 21:28:21 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 1
2025-07-19 21:31:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nxkpra52] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:31:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=e4m0mxqw] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:31:50 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=eceurcnc] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:31:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nxkpra52
2025-07-19 21:31:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e4m0mxqw
2025-07-19 21:31:50 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session eceurcnc
2025-07-19 21:31:50 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937310269", parameters={masked}
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937310269
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937310270", parameters={masked}
2025-07-19 21:31:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937310270
2025-07-19 21:31:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/482/a5i5v4jq/websocket", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/482/a5i5v4jq/websocket
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:31:50 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:31:50 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=a5i5v4jq]
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/471/nqo2i0bf/websocket", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/471/nqo2i0bf/websocket
2025-07-19 21:31:50 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:31:50 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:31:50 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nqo2i0bf]
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:31:50 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:31:50 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:31:50 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937310419", parameters={masked}
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937310419
2025-07-19 21:31:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/545/vmqyrgew/websocket", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/545/vmqyrgew/websocket
2025-07-19 21:31:50 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:31:50 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:31:50 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vmqyrgew]
2025-07-19 21:31:50 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:31:50 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:31:50 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:31:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:31:50 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=eceurcnc
2025-07-19 21:31:50 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4a4ad725, simpSessionId=eceurcnc}], simpUser=com.btalk.security.StompPrincipal@4a4ad725, simpSessionId=eceurcnc}]
2025-07-19 21:31:50 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=a5i5v4jq
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:31:50 [clientOutboundChannel-18] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=nqo2i0bf
2025-07-19 21:31:50 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=vmqyrgew
2025-07-19 21:31:50 [clientOutboundChannel-19] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [clientOutboundChannel-20] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:31:50 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:31:50 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nxkpra52
2025-07-19 21:31:50 [clientOutboundChannel-21] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6c30e522, simpSessionId=nxkpra52}], simpUser=com.btalk.security.StompPrincipal@6c30e522, simpSessionId=nxkpra52}]
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:31:50 [clientOutboundChannel-18] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:50 [clientOutboundChannel-19] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [clientOutboundChannel-20] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:31:50 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=e4m0mxqw
2025-07-19 21:31:50 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@44115da4, simpSessionId=e4m0mxqw}], simpUser=com.btalk.security.StompPrincipal@44115da4, simpSessionId=e4m0mxqw}]
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:31:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:31:55 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [eceurcnc, e4m0mxqw, nxkpra52]
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:32:08 [http-nio-8080-exec-2] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:32:08 [http-nio-8080-exec-2] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:08 [http-nio-8080-exec-2] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:32:08 [http-nio-8080-exec-2] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:32:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:32:12 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:32:12 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:12 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:32:12 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:32:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lm255ybu] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lm255ybu
2025-07-19 21:32:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zrkas1kb] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zrkas1kb
2025-07-19 21:32:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tuy0vakq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:17 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tuy0vakq
2025-07-19 21:32:17 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937337159", parameters={masked}
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937337158", parameters={masked}
2025-07-19 21:32:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937337158
2025-07-19 21:32:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937337159
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/805/2rgafk3s/websocket", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/805/2rgafk3s/websocket
2025-07-19 21:32:17 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:17 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:17 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2rgafk3s]
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/311/hhveoel4/websocket", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/311/hhveoel4/websocket
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:17 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:17 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hhveoel4]
2025-07-19 21:32:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937337198", parameters={masked}
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937337198
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:32:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/985/cfenjc4t/websocket", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/985/cfenjc4t/websocket
2025-07-19 21:32:17 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cfenjc4t]
2025-07-19 21:32:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:32:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=2rgafk3s
2025-07-19 21:32:17 [clientOutboundChannel-23] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=cfenjc4t
2025-07-19 21:32:17 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=hhveoel4
2025-07-19 21:32:17 [clientOutboundChannel-24] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [clientOutboundChannel-25] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:17 [clientOutboundChannel-23] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:17 [clientOutboundChannel-24] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [clientOutboundChannel-25] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:17 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zrkas1kb
2025-07-19 21:32:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:17 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@451c6d29, simpSessionId=zrkas1kb}], simpUser=com.btalk.security.StompPrincipal@451c6d29, simpSessionId=zrkas1kb}]
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:17 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tuy0vakq
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:17 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@3ed05d21, simpSessionId=tuy0vakq}], simpUser=com.btalk.security.StompPrincipal@3ed05d21, simpSessionId=tuy0vakq}]
2025-07-19 21:32:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:17 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lm255ybu
2025-07-19 21:32:17 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@602cb14a, simpSessionId=lm255ybu}], simpUser=com.btalk.security.StompPrincipal@602cb14a, simpSessionId=lm255ybu}]
2025-07-19 21:32:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vmqyrgew] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nqo2i0bf] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=a5i5v4jq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a5i5v4jq
2025-07-19 21:32:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vmqyrgew
2025-07-19 21:32:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nqo2i0bf
2025-07-19 21:32:18 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:18 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:18 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937338461", parameters={masked}
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937338461
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937338463", parameters={masked}
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937338463
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/652/t4bgnvhx/websocket", parameters={}
2025-07-19 21:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/652/t4bgnvhx/websocket
2025-07-19 21:32:18 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:18 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:18 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=t4bgnvhx]
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937338603", parameters={masked}
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937338603
2025-07-19 21:32:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=t4bgnvhx]
java.io.IOException: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:626)
	at org.apache.tomcat.websocket.WsFrameBase.processDataControl(WsFrameBase.java:346)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:278)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: An established connection was aborted by the software in your host machine
	at java.base/sun.nio.ch.SocketDispatcher.writev0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:58)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:227)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:158)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:574)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:136)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 19 common frames omitted
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=t4bgnvhx] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:32:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session t4bgnvhx
2025-07-19 21:32:18 [http-nio-8080-exec-10] WARN  c.b.websocket.WebSocketEventListener - Disconnect event has no authenticated user
2025-07-19 21:32:18 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=t4bgnvhx
2025-07-19 21:32:18 [clientOutboundChannel-29] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=t4bgnvhx}], simpSessionId=t4bgnvhx}]
2025-07-19 21:32:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vmqyrgew
2025-07-19 21:32:18 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7849bab4, simpSessionId=vmqyrgew}], simpUser=com.btalk.security.StompPrincipal@7849bab4, simpSessionId=vmqyrgew}]
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:18 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a5i5v4jq
2025-07-19 21:32:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:18 [clientOutboundChannel-31] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4aa58ffb, simpSessionId=a5i5v4jq}], simpUser=com.btalk.security.StompPrincipal@4aa58ffb, simpSessionId=a5i5v4jq}]
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:18 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nqo2i0bf
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:18 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@1705df4e, simpSessionId=nqo2i0bf}], simpUser=com.btalk.security.StompPrincipal@1705df4e, simpSessionId=nqo2i0bf}]
2025-07-19 21:32:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937344840", parameters={masked}
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937344840
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937344842", parameters={masked}
2025-07-19 21:32:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937344842
2025-07-19 21:32:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/018/0ej3gicd/websocket", parameters={}
2025-07-19 21:32:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/018/0ej3gicd/websocket
2025-07-19 21:32:24 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:24 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:24 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:24 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0ej3gicd]
2025-07-19 21:32:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937344946", parameters={masked}
2025-07-19 21:32:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/642/1nyjo3wg/websocket", parameters={}
2025-07-19 21:32:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937344946
2025-07-19 21:32:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/642/1nyjo3wg/websocket
2025-07-19 21:32:24 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:24 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:24 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1nyjo3wg]
2025-07-19 21:32:24 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:24 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:24 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:24 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:24 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:24 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/486/t1zxfwzx/websocket", parameters={}
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/486/t1zxfwzx/websocket
2025-07-19 21:32:24 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:24 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:24 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=t1zxfwzx]
2025-07-19 21:32:24 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:24 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:24 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:24 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:25 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=1nyjo3wg
2025-07-19 21:32:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=0ej3gicd
2025-07-19 21:32:25 [clientOutboundChannel-17] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [clientOutboundChannel-21] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=t1zxfwzx
2025-07-19 21:32:25 [clientOutboundChannel-22] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:25 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 7 sessions: [vmqyrgew, lm255ybu, nqo2i0bf, a5i5v4jq, zrkas1kb, t4bgnvhx, tuy0vakq]
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:25 [clientOutboundChannel-22] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:25 [clientOutboundChannel-17] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:25 [clientOutboundChannel-21] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Thaw", parameters={masked}
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:32:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=t", parameters={masked}
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:32:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=Htin", parameters={masked}
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:32:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1nyjo3wg] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=t1zxfwzx] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0ej3gicd] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:32:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1nyjo3wg
2025-07-19 21:32:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0ej3gicd
2025-07-19 21:32:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session t1zxfwzx
2025-07-19 21:32:45 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937365672", parameters={masked}
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937365672
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937365673", parameters={masked}
2025-07-19 21:32:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937365673
2025-07-19 21:32:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/829/4uxuay3m/websocket", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/829/4uxuay3m/websocket
2025-07-19 21:32:45 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:45 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:45 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4uxuay3m]
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/409/mv1ss1bq/websocket", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/409/mv1ss1bq/websocket
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:45 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:45 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mv1ss1bq]
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:45 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:45 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937365791", parameters={masked}
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937365791
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:45 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/548/xipcombd/websocket", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:32:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/548/xipcombd/websocket
2025-07-19 21:32:45 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:32:45 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:32:45 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:32:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:32:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xipcombd]
2025-07-19 21:32:45 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:32:45 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:32:45 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:32:45 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:45 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:45 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=t1zxfwzx
2025-07-19 21:32:45 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:45 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@46ef1dac, simpSessionId=t1zxfwzx}], simpUser=com.btalk.security.StompPrincipal@46ef1dac, simpSessionId=t1zxfwzx}]
2025-07-19 21:32:45 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=4uxuay3m
2025-07-19 21:32:45 [clientOutboundChannel-20] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=mv1ss1bq
2025-07-19 21:32:45 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=xipcombd
2025-07-19 21:32:45 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [clientOutboundChannel-19] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [clientOutboundChannel-26] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:32:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:32:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:46 [clientOutboundChannel-20] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:32:46 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0ej3gicd
2025-07-19 21:32:46 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@3017a48b, simpSessionId=0ej3gicd}], simpUser=com.btalk.security.StompPrincipal@3017a48b, simpSessionId=0ej3gicd}]
2025-07-19 21:32:46 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:46 [clientOutboundChannel-26] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:32:46 [clientOutboundChannel-19] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:32:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:32:46 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1nyjo3wg
2025-07-19 21:32:46 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7cddca0e, simpSessionId=1nyjo3wg}], simpUser=com.btalk.security.StompPrincipal@7cddca0e, simpSessionId=1nyjo3wg}]
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:32:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:32:55 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [1nyjo3wg, 0ej3gicd, t1zxfwzx]
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:33:03 [http-nio-8080-exec-7] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:33:03 [http-nio-8080-exec-7] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:03 [http-nio-8080-exec-7] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:33:03 [http-nio-8080-exec-7] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:33:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mv1ss1bq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xipcombd] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4uxuay3m] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mv1ss1bq
2025-07-19 21:33:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4uxuay3m
2025-07-19 21:33:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xipcombd
2025-07-19 21:33:08 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:33:08 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:33:08 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:33:08 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937388930", parameters={masked}
2025-07-19 21:33:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937388930
2025-07-19 21:33:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937388932", parameters={masked}
2025-07-19 21:33:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937388932
2025-07-19 21:33:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/003/m0mqnkrb/websocket", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/003/m0mqnkrb/websocket
2025-07-19 21:33:09 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:09 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:09 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m0mqnkrb]
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/996/vgm3zban/websocket", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/996/vgm3zban/websocket
2025-07-19 21:33:09 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937389047", parameters={masked}
2025-07-19 21:33:09 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:09 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937389047
2025-07-19 21:33:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vgm3zban]
2025-07-19 21:33:09 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:09 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:09 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:09 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:09 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/446/z0ycehuj/websocket", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/446/z0ycehuj/websocket
2025-07-19 21:33:09 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:09 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:09 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z0ycehuj]
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:33:09 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:09 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:09 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:09 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=vgm3zban
2025-07-19 21:33:09 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [clientOutboundChannel-28] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:09 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4uxuay3m
2025-07-19 21:33:09 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7beeaaf9, simpSessionId=4uxuay3m}], simpUser=com.btalk.security.StompPrincipal@7beeaaf9, simpSessionId=4uxuay3m}]
2025-07-19 21:33:09 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=m0mqnkrb
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:09 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=z0ycehuj
2025-07-19 21:33:09 [clientOutboundChannel-25] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:33:09 [clientOutboundChannel-29] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:09 [clientOutboundChannel-28] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:09 [clientOutboundChannel-25] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:09 [clientOutboundChannel-29] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:09 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mv1ss1bq
2025-07-19 21:33:09 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@768e5bcd, simpSessionId=mv1ss1bq}], simpUser=com.btalk.security.StompPrincipal@768e5bcd, simpSessionId=mv1ss1bq}]
2025-07-19 21:33:09 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:09 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xipcombd
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:09 [clientOutboundChannel-31] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@446268df, simpSessionId=xipcombd}], simpUser=com.btalk.security.StompPrincipal@446268df, simpSessionId=xipcombd}]
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:33:09 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:15 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [xipcombd, 4uxuay3m, mv1ss1bq]
2025-07-19 21:33:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m0mqnkrb] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z0ycehuj] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m0mqnkrb
2025-07-19 21:33:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vgm3zban] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:33:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vgm3zban
2025-07-19 21:33:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z0ycehuj
2025-07-19 21:33:17 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:17 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:17 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937397851", parameters={masked}
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937397851
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937397853", parameters={masked}
2025-07-19 21:33:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937397853
2025-07-19 21:33:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/517/ustp4q3x/websocket", parameters={}
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/517/ustp4q3x/websocket
2025-07-19 21:33:17 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:17 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:17 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ustp4q3x]
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/198/psy0o0jw/websocket", parameters={}
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/198/psy0o0jw/websocket
2025-07-19 21:33:17 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=psy0o0jw]
2025-07-19 21:33:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937397970", parameters={masked}
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937397970
2025-07-19 21:33:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:17 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:17 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:17 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:17 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/271/s3np4ecp/websocket", parameters={}
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/271/s3np4ecp/websocket
2025-07-19 21:33:17 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:33:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:33:17 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:33:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=s3np4ecp]
2025-07-19 21:33:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:33:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:33:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:33:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:33:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:33:17 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:33:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:18 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:33:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:18 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=m0mqnkrb
2025-07-19 21:33:18 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=psy0o0jw
2025-07-19 21:33:18 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@19c223de, simpSessionId=m0mqnkrb}], simpUser=com.btalk.security.StompPrincipal@19c223de, simpSessionId=m0mqnkrb}]
2025-07-19 21:33:18 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientOutboundChannel-17] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=s3np4ecp
2025-07-19 21:33:18 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientOutboundChannel-22] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=ustp4q3x
2025-07-19 21:33:18 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [clientOutboundChannel-21] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:33:18 [clientOutboundChannel-17] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:18 [clientOutboundChannel-22] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:18 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vgm3zban
2025-07-19 21:33:18 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@23a3417a, simpSessionId=vgm3zban}], simpUser=com.btalk.security.StompPrincipal@23a3417a, simpSessionId=vgm3zban}]
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:33:18 [clientOutboundChannel-21] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:33:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:18 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z0ycehuj
2025-07-19 21:33:18 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@34283651, simpSessionId=z0ycehuj}], simpUser=com.btalk.security.StompPrincipal@34283651, simpSessionId=z0ycehuj}]
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:33:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:33:25 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [m0mqnkrb, z0ycehuj, vgm3zban]
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ustp4q3x] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ustp4q3x
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=s3np4ecp] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session s3np4ecp
2025-07-19 21:35:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=psy0o0jw] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session psy0o0jw
2025-07-19 21:35:11 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2rgafk3s] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hhveoel4] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2rgafk3s
2025-07-19 21:35:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cfenjc4t] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hhveoel4
2025-07-19 21:35:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cfenjc4t
2025-07-19 21:35:11 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511264", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511265", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511265
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511264
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/190/jhymo1u2/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/190/jhymo1u2/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jhymo1u2]
2025-07-19 21:35:11 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/783/3zz2uoqa/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/783/3zz2uoqa/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3zz2uoqa]
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511376", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511376
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/117/3cvg21pn/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/117/3cvg21pn/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-11] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-11] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3cvg21pn]
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=jhymo1u2
2025-07-19 21:35:11 [clientOutboundChannel-33] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=3zz2uoqa
2025-07-19 21:35:11 [clientOutboundChannel-34] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-11] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=3cvg21pn
2025-07-19 21:35:11 [clientOutboundChannel-35] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=s3np4ecp
2025-07-19 21:35:11 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@553082fe, simpSessionId=s3np4ecp}], simpUser=com.btalk.security.StompPrincipal@553082fe, simpSessionId=s3np4ecp}]
2025-07-19 21:35:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511575", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511575
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511578", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511578
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [clientOutboundChannel-33] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [clientOutboundChannel-34] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [clientOutboundChannel-35] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=psy0o0jw
2025-07-19 21:35:11 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5596af6b, simpSessionId=psy0o0jw}], simpUser=com.btalk.security.StompPrincipal@5596af6b, simpSessionId=psy0o0jw}]
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/948/r5n3h43f/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/948/r5n3h43f/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=r5n3h43f]
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/396/aadv4p4w/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/396/aadv4p4w/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=aadv4p4w]
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ustp4q3x
2025-07-19 21:35:11 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@850f105, simpSessionId=ustp4q3x}], simpUser=com.btalk.security.StompPrincipal@850f105, simpSessionId=ustp4q3x}]
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:11 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cfenjc4t
2025-07-19 21:35:11 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@49a4b648, simpSessionId=cfenjc4t}], simpUser=com.btalk.security.StompPrincipal@49a4b648, simpSessionId=cfenjc4t}]
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hhveoel4
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:11 [clientOutboundChannel-40] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5542a591, simpSessionId=hhveoel4}], simpUser=com.btalk.security.StompPrincipal@5542a591, simpSessionId=hhveoel4}]
2025-07-19 21:35:11 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937511868", parameters={masked}
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937511868
2025-07-19 21:35:11 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/418/0j52x4xa/websocket", parameters={}
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/418/0j52x4xa/websocket
2025-07-19 21:35:11 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:11 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:11 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0j52x4xa]
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2rgafk3s
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:11 [clientOutboundChannel-41] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@600912f6, simpSessionId=2rgafk3s}], simpUser=com.btalk.security.StompPrincipal@600912f6, simpSessionId=2rgafk3s}]
2025-07-19 21:35:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=aadv4p4w
2025-07-19 21:35:11 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=r5n3h43f
2025-07-19 21:35:11 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientOutboundChannel-42] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientOutboundChannel-43] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=0j52x4xa
2025-07-19 21:35:11 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:11 [clientOutboundChannel-44] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:12 [clientOutboundChannel-43] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:12 [clientOutboundChannel-42] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:12 [clientOutboundChannel-44] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:13 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user0j52x4xa subscriptionId=sub-0 session=0j52x4xa user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:13 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user0j52x4xa subscriptionId=sub-1 session=0j52x4xa user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:13 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user0j52x4xa subscriptionId=sub-2 session=0j52x4xa user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:13 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user0j52x4xa subscriptionId=sub-3 session=0j52x4xa user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:13 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user0j52x4xa subscriptionId=sub-4 session=0j52x4xa user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=aadv4p4w] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0j52x4xa] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session aadv4p4w
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0j52x4xa
2025-07-19 21:35:20 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=r5n3h43f] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session r5n3h43f
2025-07-19 21:35:20 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-12] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jhymo1u2] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jhymo1u2
2025-07-19 21:35:20 [http-nio-8080-exec-12] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3zz2uoqa] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3cvg21pn] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3zz2uoqa
2025-07-19 21:35:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3cvg21pn
2025-07-19 21:35:20 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [psy0o0jw, hhveoel4, cfenjc4t, 2rgafk3s, ustp4q3x, s3np4ecp]
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937520258", parameters={masked}
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937520259", parameters={masked}
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937520259
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937520258
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/915/z15vxvno/websocket", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/915/z15vxvno/websocket
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:20 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:20 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z15vxvno]
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/523/nk4m5zqo/websocket", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/523/nk4m5zqo/websocket
2025-07-19 21:35:20 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:20 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:20 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nk4m5zqo]
2025-07-19 21:35:20 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:20 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:20 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=z15vxvno
2025-07-19 21:35:20 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [clientOutboundChannel-45] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=nk4m5zqo
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937520399", parameters={masked}
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [clientOutboundChannel-46] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937520399
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0j52x4xa
2025-07-19 21:35:20 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@517f564f, simpSessionId=0j52x4xa}], simpUser=com.btalk.security.StompPrincipal@517f564f, simpSessionId=0j52x4xa}]
2025-07-19 21:35:20 [clientOutboundChannel-45] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/659/g2igxglk/websocket", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/659/g2igxglk/websocket
2025-07-19 21:35:20 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:20 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:20 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=g2igxglk]
2025-07-19 21:35:20 [clientOutboundChannel-46] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:20 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=aadv4p4w
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [clientOutboundChannel-48] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5a83b70d, simpSessionId=aadv4p4w}], simpUser=com.btalk.security.StompPrincipal@5a83b70d, simpSessionId=aadv4p4w}]
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=r5n3h43f
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5bf77628, simpSessionId=r5n3h43f}], simpUser=com.btalk.security.StompPrincipal@5bf77628, simpSessionId=r5n3h43f}]
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=g2igxglk
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [clientOutboundChannel-37] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:20 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jhymo1u2
2025-07-19 21:35:20 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6970e7f, simpSessionId=jhymo1u2}], simpUser=com.btalk.security.StompPrincipal@6970e7f, simpSessionId=jhymo1u2}]
2025-07-19 21:35:20 [clientOutboundChannel-37] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:20 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3zz2uoqa
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:20 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4763410c, simpSessionId=3zz2uoqa}], simpUser=com.btalk.security.StompPrincipal@4763410c, simpSessionId=3zz2uoqa}]
2025-07-19 21:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3cvg21pn
2025-07-19 21:35:20 [clientOutboundChannel-40] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5b854149, simpSessionId=3cvg21pn}], simpUser=com.btalk.security.StompPrincipal@5b854149, simpSessionId=3cvg21pn}]
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937520909", parameters={masked}
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937520905", parameters={masked}
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937520905
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937520909
2025-07-19 21:35:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/575/saymf1zj/websocket", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/575/saymf1zj/websocket
2025-07-19 21:35:20 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:20 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:20 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=saymf1zj]
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/890/ans5e3nm/websocket", parameters={}
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/890/ans5e3nm/websocket
2025-07-19 21:35:20 [http-nio-8080-exec-11] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:20 [http-nio-8080-exec-11] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:20 [http-nio-8080-exec-11] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:20 [http-nio-8080-exec-11] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ans5e3nm]
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:21 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:21 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:21 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:21 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:21 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:21 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937521270", parameters={masked}
2025-07-19 21:35:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937521270
2025-07-19 21:35:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/082/3tcnr1wv/websocket", parameters={}
2025-07-19 21:35:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6d91e1ba
2025-07-19 21:35:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/082/3tcnr1wv/websocket
2025-07-19 21:35:21 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:35:21 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:35:21 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:35:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:35:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3tcnr1wv]
2025-07-19 21:35:21 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:35:21 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:35:21 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:35:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:21 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=ans5e3nm
2025-07-19 21:35:21 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=saymf1zj
2025-07-19 21:35:21 [clientOutboundChannel-33] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [clientOutboundChannel-41] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:21 [http-nio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:35:21 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=3tcnr1wv
2025-07-19 21:35:21 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [clientOutboundChannel-34] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:21 [clientOutboundChannel-41] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:21 [clientOutboundChannel-33] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:21 [clientOutboundChannel-34] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:35:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:35:22 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user3tcnr1wv subscriptionId=sub-0 session=3tcnr1wv user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:22 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user3tcnr1wv subscriptionId=sub-1 session=3tcnr1wv user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:22 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user3tcnr1wv subscriptionId=sub-3 session=3tcnr1wv user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:22 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user3tcnr1wv subscriptionId=sub-2 session=3tcnr1wv user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:22 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user3tcnr1wv subscriptionId=sub-4 session=3tcnr1wv user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:35:25 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [jhymo1u2, r5n3h43f, 0j52x4xa, 3zz2uoqa, aadv4p4w, 3cvg21pn]
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-19 21:35:30 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session saymf1zj with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=saymf1zj]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=saymf1zj] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session saymf1zj
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session g2igxglk with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:30 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=saymf1zj
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=g2igxglk]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=g2igxglk] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session g2igxglk
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:30 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session nk4m5zqo with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:31 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=g2igxglk
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=nk4m5zqo]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nk4m5zqo] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nk4m5zqo
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ans5e3nm with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:31 [clientInboundChannel-48] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nk4m5zqo
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ans5e3nm]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ans5e3nm] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ans5e3nm
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:31 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 3tcnr1wv with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:32 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ans5e3nm
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=3tcnr1wv]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3tcnr1wv] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3tcnr1wv
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session z15vxvno with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:32 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3tcnr1wv
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=z15vxvno]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z15vxvno] closed with CloseStatus[code=1001, reason=null]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z15vxvno
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:35:32 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z15vxvno
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@194e913b]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:35:32 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 21:35:33 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-19 21:35:41 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 13032 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:35:41 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:35:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:35:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 8 JPA repository interfaces.
2025-07-19 21:35:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:35:43 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:35:43 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:35:43 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:35:43 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1580 ms
2025-07-19 21:35:43 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:35:43 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:35:43 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:35:43 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:35:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:35:45 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79d14037
2025-07-19 21:35:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:35:45 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:35:45 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:35:45 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:35:46 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:35:47 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:35:47 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:35:48 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:35:48 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:35:48 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:35:48 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:35:49 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:35:49 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]
2025-07-19 21:35:49 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]]
2025-07-19 21:35:49 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:35:49 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:35:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 21:35:49 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 8.222 seconds (process running for 8.842)
2025-07-19 21:36:49 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-07-19 21:37:55 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 21:37:55 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@244ba147
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a92652b
2025-07-19 21:37:55 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 21:37:55 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-07-19 21:37:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937675809", parameters={masked}
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937676009", parameters={masked}
2025-07-19 21:37:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937675811", parameters={masked}
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937676009
2025-07-19 21:37:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937675809
2025-07-19 21:37:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937675811
2025-07-19 21:37:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/526/wrxddbl5/websocket", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/526/wrxddbl5/websocket
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:37:56 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:37:56 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wrxddbl5]
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/895/rpueq5ca/websocket", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/895/rpueq5ca/websocket
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:37:56 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:37:56 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rpueq5ca]
2025-07-19 21:37:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/978/h5qsgjmm/websocket", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:37:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:37:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/978/h5qsgjmm/websocket
2025-07-19 21:37:56 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:37:56 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:37:56 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:37:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:37:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=h5qsgjmm]
2025-07-19 21:37:56 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:37:56 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:37:56 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:37:56 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=h5qsgjmm
2025-07-19 21:37:56 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=wrxddbl5
2025-07-19 21:37:56 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=rpueq5ca
2025-07-19 21:37:56 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:37:56 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:37:56 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:37:56 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:37:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:37:56 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userwrxddbl5 subscriptionId=sub-0 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userwrxddbl5 subscriptionId=sub-1 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userwrxddbl5 subscriptionId=sub-2 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userwrxddbl5 subscriptionId=sub-3 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userwrxddbl5 subscriptionId=sub-4 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userwrxddbl5 subscriptionId=sub-5 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userwrxddbl5 subscriptionId=sub-6 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userwrxddbl5 subscriptionId=sub-7 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:37:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:37:57 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userwrxddbl5 subscriptionId=sub-8 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:57 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userwrxddbl5 subscriptionId=sub-9 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:57 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userwrxddbl5 subscriptionId=sub-10 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:57 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userwrxddbl5 subscriptionId=sub-11 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:37:57 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userwrxddbl5 subscriptionId=sub-12 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937686977", parameters={masked}
2025-07-19 21:38:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937686978", parameters={masked}
2025-07-19 21:38:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937686978
2025-07-19 21:38:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937686977
2025-07-19 21:38:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/788/0irn1ido/websocket", parameters={}
2025-07-19 21:38:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/788/0irn1ido/websocket
2025-07-19 21:38:06 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:38:06 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:38:06 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:38:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:38:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0irn1ido]
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/062/waanyih2/websocket", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/062/waanyih2/websocket
2025-07-19 21:38:07 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:38:07 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:38:07 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=waanyih2]
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:38:07 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:38:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:38:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937687026", parameters={masked}
2025-07-19 21:38:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:38:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937687026
2025-07-19 21:38:07 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:38:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:38:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/566/yrcmr23t/websocket", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:38:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/566/yrcmr23t/websocket
2025-07-19 21:38:07 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:38:07 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:38:07 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:38:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:38:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yrcmr23t]
2025-07-19 21:38:07 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:38:07 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:38:07 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:38:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:07 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=0irn1ido
2025-07-19 21:38:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=yrcmr23t
2025-07-19 21:38:07 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [clientOutboundChannel-4] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:38:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=waanyih2
2025-07-19 21:38:07 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [clientOutboundChannel-6] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:38:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:38:07 [clientOutboundChannel-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:38:07 [clientOutboundChannel-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:38:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[])]
2025-07-19 21:38:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:07 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-useryrcmr23t subscriptionId=sub-0 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-useryrcmr23t subscriptionId=sub-1 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useryrcmr23t subscriptionId=sub-2 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useryrcmr23t subscriptionId=sub-3 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useryrcmr23t subscriptionId=sub-4 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useryrcmr23t subscriptionId=sub-5 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useryrcmr23t subscriptionId=sub-6 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useryrcmr23t subscriptionId=sub-7 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useryrcmr23t subscriptionId=sub-8 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useryrcmr23t subscriptionId=sub-9 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useryrcmr23t subscriptionId=sub-10 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useryrcmr23t subscriptionId=sub-11 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:07 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useryrcmr23t subscriptionId=sub-12 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=THaw", parameters={masked}
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:38:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/search?query=T", parameters={masked}
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.UserController#searchUsers(String)
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.name like replace(?, '\\', '\\\\')
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=[UserDto(userId=8ce12902-ecf8-4 (truncated)...]
2025-07-19 21:38:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/conversations/private?creatorId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&participantId=99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={masked}
2025-07-19 21:38:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#createPrivateConversation(UUID, UUID)
2025-07-19 21:38:19 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Creating private conversation between 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 and 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:38:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        conversations
        (created_at, creator_id, name, type, conversation_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:38:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:38:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        participants
        (conversation_id, joined_at, left_at, user_id, participant_id) 
    values
        (?, ?, ?, ?, ?)
2025-07-19 21:38:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:38:21 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:22 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Sending conversation update to userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-useryrcmr23t session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userwrxddbl5 session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userrpueq5ca session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userwaanyih2 session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-user0irn1ido session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/conversation-updates-userh5qsgjmm session=null payload={"success":true,"message":"New conversation created","data":{"eventType":"NEW_CO...(truncated)
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userwaanyih2 session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userwrxddbl5 session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userrpueq5ca session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userh5qsgjmm session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-useryrcmr23t session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-user0irn1ido session=null payload=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 0
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController - Sending conversation update to userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent conversation update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:22 [http-nio-8080-exec-8] INFO  c.b.c.ConversationController -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 0
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Private conversation created successfully, data=ConversationDto(co (truncated)...]
2025-07-19 21:38:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:22 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:38:23 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Conversation
2025-07-19 21:38:23 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:38:23 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:23 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 1
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:38:27 [http-nio-8080-exec-4] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-07-19 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useryrcmr23t subscriptionId=sub-13 session=yrcmr23t user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:38:33 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-14 session=yrcmr23t
2025-07-19 21:38:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:38:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:38:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:38:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:38:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:38:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 0 containing UNKNO (truncated)...]
2025-07-19 21:38:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:38:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:38:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"8ce12902-ecf8-4fdd-ac4c-5f8e480 (truncated)..."]
2025-07-19 21:38:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:38:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:38:39 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"68d747d9-373b-4ad0-b853-059543c1c908","conversationId":"5008fdd0-f...(truncated)
2025-07-19 21:38:39 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:38:39 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:40 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 21:38:40 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:38:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=68d747d9-373b (truncated)...]
2025-07-19 21:38:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:40 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:38:40 [Notification-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:38:41 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Message
2025-07-19 21:38:41 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:38:41 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:38:41 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 2
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:38:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:43 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/mark-all-read", parameters={}
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAllAsRead(Authentication)
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications marked as read, data=null)]
2025-07-19 21:38:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/mark-all-read", parameters={}
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAllAsRead(Authentication)
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/mark-all-read", parameters={}
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAllAsRead(Authentication)
2025-07-19 21:38:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications marked as read, data=null)]
2025-07-19 21:38:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/mark-all-read", parameters={}
2025-07-19 21:38:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAllAsRead(Authentication)
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications marked as read, data=null)]
2025-07-19 21:38:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0
2025-07-19 21:38:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:38:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:38:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications marked as read, data=null)]
2025-07-19 21:38:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:39:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:38 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userwrxddbl5 subscriptionId=sub-13 session=wrxddbl5 user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:39:38 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-14 session=wrxddbl5
2025-07-19 21:39:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:39:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:39:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:39:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:39:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:39:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:39:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:39:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:39:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:39:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 21:39:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 21:39:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 21:39:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 21:39:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 21:39:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 21:39:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 21:39:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 21:39:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=h5qsgjmm] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wrxddbl5] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session h5qsgjmm
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wrxddbl5
2025-07-19 21:39:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rpueq5ca] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:39:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rpueq5ca
2025-07-19 21:39:45 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937785516", parameters={masked}
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937785518", parameters={masked}
2025-07-19 21:39:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937785516
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937785518
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/216/akrgrqsq/websocket", parameters={}
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/216/akrgrqsq/websocket
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:39:45 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:39:45 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=akrgrqsq]
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/939/bkwqpqw3/websocket", parameters={}
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/939/bkwqpqw3/websocket
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:39:45 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:39:45 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bkwqpqw3]
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:39:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937785671", parameters={masked}
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937785671
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:39:45 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/641/vte2utof/websocket", parameters={}
2025-07-19 21:39:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:39:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/641/vte2utof/websocket
2025-07-19 21:39:45 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:39:45 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:39:45 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:39:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:39:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vte2utof]
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:39:45 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:39:45 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:39:45 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=akrgrqsq
2025-07-19 21:39:45 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientOutboundChannel-13] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientOutboundChannel-13] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=bkwqpqw3
2025-07-19 21:39:45 [clientOutboundChannel-14] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:39:45 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=vte2utof
2025-07-19 21:39:45 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientOutboundChannel-15] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:45 [clientOutboundChannel-14] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:39:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:45 [clientOutboundChannel-15] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:46 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:46 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=h5qsgjmm
2025-07-19 21:39:46 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@2c580ca4, simpSessionId=h5qsgjmm}], simpUser=com.btalk.security.StompPrincipal@2c580ca4, simpSessionId=h5qsgjmm}]
2025-07-19 21:39:46 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:46 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wrxddbl5
2025-07-19 21:39:46 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@950ac4b, simpSessionId=wrxddbl5}], simpUser=com.btalk.security.StompPrincipal@950ac4b, simpSessionId=wrxddbl5}]
2025-07-19 21:39:46 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:39:46 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rpueq5ca
2025-07-19 21:39:46 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@68e0b949, simpSessionId=rpueq5ca}], simpUser=com.btalk.security.StompPrincipal@68e0b949, simpSessionId=rpueq5ca}]
2025-07-19 21:39:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:39:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:39:51 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [wrxddbl5, rpueq5ca, h5qsgjmm]
2025-07-19 21:39:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:39:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:39:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:39:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"8ce12902-ecf8-4fdd-ac4c-5f8e480 (truncated)..."]
2025-07-19 21:39:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:39:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"27b30eba-00ee-4977-aea4-d127ea43ac90","conversationId":"5008fdd0-f...(truncated)
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:39:59 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=27b30eba-00ee (truncated)...]
2025-07-19 21:39:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:00 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:00 [Notification-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:40:00 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Message
2025-07-19 21:40:00 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:00 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:00 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 3
2025-07-19 21:40:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:40:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:40:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:40:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 0 containing  (truncated)...]
2025-07-19 21:40:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vte2utof] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bkwqpqw3] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vte2utof
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=akrgrqsq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bkwqpqw3
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session akrgrqsq
2025-07-19 21:40:13 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937813225", parameters={masked}
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937813223", parameters={masked}
2025-07-19 21:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937813225
2025-07-19 21:40:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937813223
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/139/0sgjodib/websocket", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/139/0sgjodib/websocket
2025-07-19 21:40:13 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:13 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:13 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0sgjodib]
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/701/kgfk4zjs/websocket", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/701/kgfk4zjs/websocket
2025-07-19 21:40:13 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:13 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:13 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kgfk4zjs]
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:13 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:13 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:13 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:40:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937813351", parameters={masked}
2025-07-19 21:40:13 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:13 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937813351
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/951/2hzz0x1g/websocket", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/951/2hzz0x1g/websocket
2025-07-19 21:40:13 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:13 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:13 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2hzz0x1g]
2025-07-19 21:40:13 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:13 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:13 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:40:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:40:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=0sgjodib
2025-07-19 21:40:13 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [clientOutboundChannel-21] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:13 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=2hzz0x1g
2025-07-19 21:40:13 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=kgfk4zjs
2025-07-19 21:40:13 [clientOutboundChannel-23] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [clientOutboundChannel-22] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:40:13 [clientOutboundChannel-21] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:13 [clientOutboundChannel-23] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [clientOutboundChannel-22] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:14 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bkwqpqw3
2025-07-19 21:40:14 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6b9c2db6, simpSessionId=bkwqpqw3}], simpUser=com.btalk.security.StompPrincipal@6b9c2db6, simpSessionId=bkwqpqw3}]
2025-07-19 21:40:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:14 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:14 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=akrgrqsq
2025-07-19 21:40:14 [clientOutboundChannel-25] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6ff3cd4f, simpSessionId=akrgrqsq}], simpUser=com.btalk.security.StompPrincipal@6ff3cd4f, simpSessionId=akrgrqsq}]
2025-07-19 21:40:14 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:14 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vte2utof
2025-07-19 21:40:14 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@42607e80, simpSessionId=vte2utof}], simpUser=com.btalk.security.StompPrincipal@42607e80, simpSessionId=vte2utof}]
2025-07-19 21:40:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:40:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:21 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [akrgrqsq, bkwqpqw3, vte2utof]
2025-07-19 21:40:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:40:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:40:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:40:28 [http-nio-8080-exec-6] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:40:28 [http-nio-8080-exec-6] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:40:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:29 [http-nio-8080-exec-6] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:40:29 [http-nio-8080-exec-6] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:40:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:40:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=3)]
2025-07-19 21:40:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:40:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user2hzz0x1g subscriptionId=sub-0 session=2hzz0x1g user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:40:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-1 session=2hzz0x1g
2025-07-19 21:40:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:40:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:40:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:40:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:40:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:40:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:40:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:40:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:40:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:40:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:40:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:40:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:37 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:40:37 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0sgjodib] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kgfk4zjs] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2hzz0x1g] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:40:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kgfk4zjs
2025-07-19 21:40:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0sgjodib
2025-07-19 21:40:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2hzz0x1g
2025-07-19 21:40:38 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:38 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:38 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:38 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937838774", parameters={masked}
2025-07-19 21:40:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937838775", parameters={masked}
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937838775
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937838774
2025-07-19 21:40:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/060/vzsj5c3r/websocket", parameters={}
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/060/vzsj5c3r/websocket
2025-07-19 21:40:38 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:38 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:38 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vzsj5c3r]
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/750/r2tq05gm/websocket", parameters={}
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:38 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/750/r2tq05gm/websocket
2025-07-19 21:40:38 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:38 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:38 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752937838899", parameters={masked}
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752937838899
2025-07-19 21:40:38 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=r2tq05gm]
2025-07-19 21:40:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:38 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:38 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:38 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:40:38 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/476/nprvst3b/websocket", parameters={}
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/476/nprvst3b/websocket
2025-07-19 21:40:38 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:40:38 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:40:38 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:40:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nprvst3b]
2025-07-19 21:40:38 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:40:38 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:40:38 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:40:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:38 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=3)]
2025-07-19 21:40:38 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:38 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:40:39 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=vzsj5c3r
2025-07-19 21:40:39 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=r2tq05gm
2025-07-19 21:40:39 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [clientOutboundChannel-28] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [clientOutboundChannel-27] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=nprvst3b
2025-07-19 21:40:39 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [clientOutboundChannel-13] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=3)]
2025-07-19 21:40:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:39 [clientOutboundChannel-28] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [clientOutboundChannel-27] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [clientOutboundChannel-13] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:40 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:40 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0sgjodib
2025-07-19 21:40:40 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@18eb6928, simpSessionId=0sgjodib}], simpUser=com.btalk.security.StompPrincipal@18eb6928, simpSessionId=0sgjodib}]
2025-07-19 21:40:40 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:40 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kgfk4zjs
2025-07-19 21:40:40 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@1502cc97, simpSessionId=kgfk4zjs}], simpUser=com.btalk.security.StompPrincipal@1502cc97, simpSessionId=kgfk4zjs}]
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:40 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:40:40 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2hzz0x1g
2025-07-19 21:40:40 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@229ff75f, simpSessionId=2hzz0x1g}], simpUser=com.btalk.security.StompPrincipal@229ff75f, simpSessionId=2hzz0x1g}]
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:40:40 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:40:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 21:40:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 21:40:44 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 21:40:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 21:40:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:40:46 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [2hzz0x1g, 0sgjodib, kgfk4zjs]
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/mark-all-read", parameters={}
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAllAsRead(Authentication)
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications marked as read, data=null)]
2025-07-19 21:40:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:41:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:41:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:41:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:41:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"8ce12902-ecf8-4fdd-ac4c-5f8e480 (truncated)..."]
2025-07-19 21:41:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:41:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"1b00de8c-4d37-4f84-95e4-12f46750b9d5","conversationId":"5008fdd0-f...(truncated)
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:10 [Notification-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=1b00de8c-4d37 (truncated)...]
2025-07-19 21:41:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:41:11 [Notification-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:11 [Notification-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:41:11 [Notification-4] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Message
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-userr2tq05gm session=null payload={"notificationId":"b548fe7a-4b94-45cd-bd7c-c2fa5c32afa3","recipientId":"99bc567a...(truncated)
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-usernprvst3b session=null payload={"notificationId":"b548fe7a-4b94-45cd-bd7c-c2fa5c32afa3","recipientId":"99bc567a...(truncated)
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-uservzsj5c3r session=null payload={"notificationId":"b548fe7a-4b94-45cd-bd7c-c2fa5c32afa3","recipientId":"99bc567a...(truncated)
2025-07-19 21:41:11 [Notification-4] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:11 [Notification-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usernprvst3b session=null payload=1
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userr2tq05gm session=null payload=1
2025-07-19 21:41:11 [Notification-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-uservzsj5c3r session=null payload=1
2025-07-19 21:41:11 [Notification-4] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 1
2025-07-19 21:41:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:41:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:41:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:41:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 21:41:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 21:41:20 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 21:41:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:41:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 21:41:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 21:41:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=r2tq05gm] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nprvst3b] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vzsj5c3r] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nprvst3b
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session r2tq05gm
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vzsj5c3r
2025-07-19 21:41:23 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:23 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:23 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0irn1ido] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yrcmr23t] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=waanyih2] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:41:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0irn1ido
2025-07-19 21:41:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yrcmr23t
2025-07-19 21:41:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session waanyih2
2025-07-19 21:41:24 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:24 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:24 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:24 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:24 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=r2tq05gm
2025-07-19 21:41:24 [clientOutboundChannel-31] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5664bb72, simpSessionId=r2tq05gm}], simpUser=com.btalk.security.StompPrincipal@5664bb72, simpSessionId=r2tq05gm}]
2025-07-19 21:41:24 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:24 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nprvst3b
2025-07-19 21:41:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@53eeb546, simpSessionId=nprvst3b}], simpUser=com.btalk.security.StompPrincipal@53eeb546, simpSessionId=nprvst3b}]
2025-07-19 21:41:24 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:41:24 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vzsj5c3r
2025-07-19 21:41:24 [clientOutboundChannel-33] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4f55d867, simpSessionId=vzsj5c3r}], simpUser=com.btalk.security.StompPrincipal@4f55d867, simpSessionId=vzsj5c3r}]
2025-07-19 21:41:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:41:25 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:25 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=waanyih2
2025-07-19 21:41:25 [clientOutboundChannel-34] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@36d2da, simpSessionId=waanyih2}], simpUser=com.btalk.security.StompPrincipal@36d2da, simpSessionId=waanyih2}]
2025-07-19 21:41:26 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:26 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0irn1ido
2025-07-19 21:41:26 [clientOutboundChannel-35] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4bfa9bca, simpSessionId=0irn1ido}], simpUser=com.btalk.security.StompPrincipal@4bfa9bca, simpSessionId=0irn1ido}]
2025-07-19 21:41:26 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:41:26 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yrcmr23t
2025-07-19 21:41:26 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@3e175a06, simpSessionId=yrcmr23t}], simpUser=com.btalk.security.StompPrincipal@3e175a06, simpSessionId=yrcmr23t}]
2025-07-19 21:41:31 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [waanyih2, r2tq05gm, vzsj5c3r, yrcmr23t, 0irn1ido, nprvst3b]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-19 21:45:56 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@bf0e435]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 21:45:56 [RMI TCP Connection(12)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-19 21:45:58 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 23424 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 21:45:58 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 21:45:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 21:45:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 8 JPA repository interfaces.
2025-07-19 21:45:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 21:45:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 21:45:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 21:45:59 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 21:45:59 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1239 ms
2025-07-19 21:46:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 21:46:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 21:46:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 21:46:00 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 21:46:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 21:46:01 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14239223
2025-07-19 21:46:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 21:46:01 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 21:46:01 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 21:46:01 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 21:46:02 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 21:46:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 21:46:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 21:46:04 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 21:46:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 21:46:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 21:46:05 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 21:46:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]
2025-07-19 21:46:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]]
2025-07-19 21:46:05 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:46:05 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 21:46:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 21:46:05 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 6.922 seconds (process running for 7.441)
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@39e67fbc
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7da7a932
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-19 21:46:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938180683", parameters={masked}
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938180684", parameters={masked}
2025-07-19 21:46:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938180684
2025-07-19 21:46:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938180683
2025-07-19 21:46:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/650/hlnjjg20/websocket", parameters={}
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/650/hlnjjg20/websocket
2025-07-19 21:46:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938180786", parameters={masked}
2025-07-19 21:46:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938180786
2025-07-19 21:46:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:20 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:20 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:20 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hlnjjg20]
2025-07-19 21:46:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/370/soc4bowt/websocket", parameters={}
2025-07-19 21:46:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/370/soc4bowt/websocket
2025-07-19 21:46:20 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:20 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:20 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=soc4bowt]
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:20 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:20 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:20 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:46:20 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/252/23oht0lc/websocket", parameters={}
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/252/23oht0lc/websocket
2025-07-19 21:46:20 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:20 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:20 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=23oht0lc]
2025-07-19 21:46:20 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:20 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:20 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:46:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:20 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:20 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:20 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:21 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=23oht0lc
2025-07-19 21:46:21 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=soc4bowt
2025-07-19 21:46:21 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=hlnjjg20
2025-07-19 21:46:21 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:46:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:46:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:46:21 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:21 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:21 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:46:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:46:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:21 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user23oht0lc subscriptionId=sub-0 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:21 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user23oht0lc subscriptionId=sub-1 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:21 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user23oht0lc subscriptionId=sub-2 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:21 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user23oht0lc subscriptionId=sub-3 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:21 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user23oht0lc subscriptionId=sub-4 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:46:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:46:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:46:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user23oht0lc subscriptionId=sub-5 session=23oht0lc user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:46:25 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-6 session=23oht0lc
2025-07-19 21:46:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:46:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:27 [http-nio-8080-exec-10] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-07-19 21:46:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:27 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:46:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:27 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:27 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:46:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:29 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938193975", parameters={masked}
2025-07-19 21:46:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938193975
2025-07-19 21:46:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938193975", parameters={masked}
2025-07-19 21:46:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938193975
2025-07-19 21:46:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/525/czezguj3/websocket", parameters={}
2025-07-19 21:46:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/525/czezguj3/websocket
2025-07-19 21:46:33 [http-nio-8080-exec-7] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:33 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:33 [http-nio-8080-exec-7] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=czezguj3]
2025-07-19 21:46:33 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:33 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:34 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:46:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/292/5e3rgwdn/websocket", parameters={}
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/292/5e3rgwdn/websocket
2025-07-19 21:46:34 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:34 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:34 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5e3rgwdn]
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:34 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:34 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938194041", parameters={masked}
2025-07-19 21:46:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:34 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:46:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938194041
2025-07-19 21:46:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/739/hzlkqo1u/websocket", parameters={}
2025-07-19 21:46:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:46:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/739/hzlkqo1u/websocket
2025-07-19 21:46:34 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:46:34 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:46:34 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:46:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:46:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hzlkqo1u]
2025-07-19 21:46:34 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:46:34 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:46:34 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:46:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:46:34 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=czezguj3
2025-07-19 21:46:34 [clientOutboundChannel-4] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:46:34 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:34 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:46:34 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=hzlkqo1u
2025-07-19 21:46:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=5e3rgwdn
2025-07-19 21:46:34 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:34 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [clientOutboundChannel-6] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:34 [clientOutboundChannel-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:46:34 [clientOutboundChannel-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:34 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:46:34 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:34 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userhzlkqo1u subscriptionId=sub-0 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userhzlkqo1u subscriptionId=sub-1 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:34 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userhzlkqo1u subscriptionId=sub-2 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:34 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userhzlkqo1u subscriptionId=sub-3 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userhzlkqo1u subscriptionId=sub-4 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:46:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:46:35 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:46:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:38 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userhzlkqo1u subscriptionId=sub-5 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:46:38 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-6 session=hzlkqo1u
2025-07-19 21:46:38 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:46:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:39 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:46:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:46:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:46:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:46:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:46:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:46:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:46:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"8ce12902-ecf8-4fdd-ac4c-5f8e480 (truncated)..."]
2025-07-19 21:46:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:46:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:46:51 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"3c38cb03-15d2-4407-a9ce-97b7ad540cb3","conversationId":"5008fdd0-f...(truncated)
2025-07-19 21:46:51 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-19 21:46:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:46:52 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:52 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-19 21:46:52 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2025-07-19 21:46:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=3c38cb03-15d2 (truncated)...]
2025-07-19 21:46:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:46:52 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:53 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:46:53 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: New Message
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-user23oht0lc session=null payload={"notificationId":"a4aeca5b-5101-495c-acec-d304f578d6bd","recipientId":"99bc567a...(truncated)
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-userhlnjjg20 session=null payload={"notificationId":"a4aeca5b-5101-495c-acec-d304f578d6bd","recipientId":"99bc567a...(truncated)
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-usersoc4bowt session=null payload={"notificationId":"a4aeca5b-5101-495c-acec-d304f578d6bd","recipientId":"99bc567a...(truncated)
2025-07-19 21:46:53 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:46:53 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-userhlnjjg20 session=null payload=1
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-user23oht0lc session=null payload=1
2025-07-19 21:46:53 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-usersoc4bowt session=null payload=1
2025-07-19 21:46:53 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 99bc567a-f861-4700-9cd3-7dd91951dbe0: 1
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:46:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=soc4bowt] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:47:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hlnjjg20] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:47:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session soc4bowt
2025-07-19 21:47:02 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=23oht0lc] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:47:02 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 23oht0lc
2025-07-19 21:47:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hlnjjg20
2025-07-19 21:47:02 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938222479", parameters={masked}
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938222478", parameters={masked}
2025-07-19 21:47:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938222479
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938222478
2025-07-19 21:47:02 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/221/sh3yot4d/websocket", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/221/sh3yot4d/websocket
2025-07-19 21:47:02 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:47:02 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:47:02 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sh3yot4d]
2025-07-19 21:47:02 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:47:02 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938222518", parameters={masked}
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938222518
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/631/al23b500/websocket", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/631/al23b500/websocket
2025-07-19 21:47:02 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:47:02 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:47:02 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=al23b500]
2025-07-19 21:47:02 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:47:02 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:47:02 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:47:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/560/thcoiskf/websocket", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/560/thcoiskf/websocket
2025-07-19 21:47:02 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:47:02 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:47:02 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:47:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=thcoiskf]
2025-07-19 21:47:02 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:47:02 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:47:02 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:47:02 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=sh3yot4d
2025-07-19 21:47:02 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=al23b500
2025-07-19 21:47:02 [clientOutboundChannel-12] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [clientOutboundChannel-11] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:47:02 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=thcoiskf
2025-07-19 21:47:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [clientOutboundChannel-13] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:02 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:02 [clientOutboundChannel-11] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [clientOutboundChannel-12] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:02 [clientOutboundChannel-13] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:47:02 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:02 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:03 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:03 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:03 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=23oht0lc
2025-07-19 21:47:03 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7f8bc660, simpSessionId=23oht0lc}], simpUser=com.btalk.security.StompPrincipal@7f8bc660, simpSessionId=23oht0lc}]
2025-07-19 21:47:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:47:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:04 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:04 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=soc4bowt
2025-07-19 21:47:04 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4c5374f2, simpSessionId=soc4bowt}], simpUser=com.btalk.security.StompPrincipal@4c5374f2, simpSessionId=soc4bowt}]
2025-07-19 21:47:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:04 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:47:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hlnjjg20
2025-07-19 21:47:04 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@5e8e600, simpSessionId=hlnjjg20}], simpUser=com.btalk.security.StompPrincipal@5e8e600, simpSessionId=hlnjjg20}]
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:47:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:05 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:05 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:05 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[6 current WS(6)-HttpStream(0)-HttpPoll(0), 9 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(9)-CONNECTED(9)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 78], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 16], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 7, completed tasks = 14]
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:47:05 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:47:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:10 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [soc4bowt, hlnjjg20, 23oht0lc]
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:47:31 [http-nio-8080-exec-9] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:47:31 [http-nio-8080-exec-9] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:31 [http-nio-8080-exec-9] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:47:31 [http-nio-8080-exec-9] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:47:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:31 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:31 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userhzlkqo1u subscriptionId=sub-7 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:47:31 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userhzlkqo1u subscriptionId=sub-8 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:47:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:47:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:47:32 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:47:32 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:32 [http-nio-8080-exec-8] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:47:32 [http-nio-8080-exec-8] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:47:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:32 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userthcoiskf subscriptionId=sub-0 session=thcoiskf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:47:32 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userthcoiskf subscriptionId=sub-1 session=thcoiskf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:47:32 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:47:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:33 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:33 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userhzlkqo1u subscriptionId=sub-9 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:47:33 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-10 session=hzlkqo1u
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:47:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:47:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:47:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:47:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:47:34 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:47:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userhzlkqo1u subscriptionId=sub-11 session=hzlkqo1u user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:47:34 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-12 session=hzlkqo1u
2025-07-19 21:47:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:47:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:47:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:35 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:47:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:47:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:47:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:47:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:47:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:47:38 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 21:47:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:47:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:47:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:47:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:47:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:47:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=thcoiskf] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session thcoiskf
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=al23b500] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session al23b500
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sh3yot4d] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:16 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sh3yot4d
2025-07-19 21:53:16 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938596522", parameters={masked}
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938596526", parameters={masked}
2025-07-19 21:53:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938596522
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938596526
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/571/fllbj4zw/websocket", parameters={}
2025-07-19 21:53:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/571/fllbj4zw/websocket
2025-07-19 21:53:16 [http-nio-8080-exec-5] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:16 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:16 [http-nio-8080-exec-5] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fllbj4zw]
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/852/vkhxvpbw/websocket", parameters={}
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/852/vkhxvpbw/websocket
2025-07-19 21:53:16 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:16 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:16 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vkhxvpbw]
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:16 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=fllbj4zw
2025-07-19 21:53:16 [clientOutboundChannel-17] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=vkhxvpbw
2025-07-19 21:53:16 [clientOutboundChannel-18] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:16 [clientOutboundChannel-17] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938596898", parameters={masked}
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938596898
2025-07-19 21:53:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/448/khrnpy51/websocket", parameters={}
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/448/khrnpy51/websocket
2025-07-19 21:53:16 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:16 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:16 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=khrnpy51]
2025-07-19 21:53:16 [clientOutboundChannel-18] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:16 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:16 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=khrnpy51
2025-07-19 21:53:17 [clientOutboundChannel-19] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:17 [clientOutboundChannel-19] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:17 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sh3yot4d
2025-07-19 21:53:17 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7308cf58, simpSessionId=sh3yot4d}], simpUser=com.btalk.security.StompPrincipal@7308cf58, simpSessionId=sh3yot4d}]
2025-07-19 21:53:17 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=thcoiskf
2025-07-19 21:53:17 [clientOutboundChannel-21] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@4a0bd165, simpSessionId=thcoiskf}], simpUser=com.btalk.security.StompPrincipal@4a0bd165, simpSessionId=thcoiskf}]
2025-07-19 21:53:17 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userkhrnpy51 subscriptionId=sub-0 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userkhrnpy51 subscriptionId=sub-1 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userkhrnpy51 subscriptionId=sub-2 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userkhrnpy51 subscriptionId=sub-3 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userkhrnpy51 subscriptionId=sub-4 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userkhrnpy51 subscriptionId=sub-5 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userkhrnpy51 subscriptionId=sub-6 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userkhrnpy51 subscriptionId=sub-7 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userkhrnpy51 subscriptionId=sub-8 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userkhrnpy51 subscriptionId=sub-9 session=khrnpy51 user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:17 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:17 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=al23b500
2025-07-19 21:53:17 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@60c8e551, simpSessionId=al23b500}], simpUser=com.btalk.security.StompPrincipal@60c8e551, simpSessionId=al23b500}]
2025-07-19 21:53:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:18 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:19 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vkhxvpbw] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vkhxvpbw
2025-07-19 21:53:22 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fllbj4zw] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fllbj4zw
2025-07-19 21:53:22 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=khrnpy51] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session khrnpy51
2025-07-19 21:53:22 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:22 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938603033", parameters={masked}
2025-07-19 21:53:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938603034", parameters={masked}
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938603034
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938603033
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/371/hzdsxfsc/websocket", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/371/hzdsxfsc/websocket
2025-07-19 21:53:23 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:23 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:23 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hzdsxfsc]
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/429/nqkxacia/websocket", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/429/nqkxacia/websocket
2025-07-19 21:53:23 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:23 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:23 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nqkxacia]
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:23 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:23 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938603189", parameters={masked}
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938603189
2025-07-19 21:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:23 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/269/0gvdnaei/websocket", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/269/0gvdnaei/websocket
2025-07-19 21:53:23 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:23 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:23 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0gvdnaei]
2025-07-19 21:53:23 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:23 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:23 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:53:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=hzdsxfsc
2025-07-19 21:53:23 [clientOutboundChannel-23] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-6] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=0gvdnaei
2025-07-19 21:53:23 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [clientOutboundChannel-24] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=nqkxacia
2025-07-19 21:53:23 [clientOutboundChannel-23] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [clientOutboundChannel-25] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:23 [clientOutboundChannel-24] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:23 [clientOutboundChannel-25] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:24 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user0gvdnaei subscriptionId=sub-0 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user0gvdnaei subscriptionId=sub-1 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user0gvdnaei subscriptionId=sub-2 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user0gvdnaei subscriptionId=sub-3 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user0gvdnaei subscriptionId=sub-4 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user0gvdnaei subscriptionId=sub-5 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user0gvdnaei subscriptionId=sub-6 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user0gvdnaei subscriptionId=sub-7 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user0gvdnaei subscriptionId=sub-8 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:24 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user0gvdnaei subscriptionId=sub-9 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:24 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:24 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:24 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vkhxvpbw
2025-07-19 21:53:24 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fllbj4zw
2025-07-19 21:53:24 [clientOutboundChannel-27] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@75229ae5, simpSessionId=fllbj4zw}], simpUser=com.btalk.security.StompPrincipal@75229ae5, simpSessionId=fllbj4zw}]
2025-07-19 21:53:24 [clientOutboundChannel-26] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@561950c7, simpSessionId=vkhxvpbw}], simpUser=com.btalk.security.StompPrincipal@561950c7, simpSessionId=vkhxvpbw}]
2025-07-19 21:53:24 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:53:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:24 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=khrnpy51
2025-07-19 21:53:24 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@708033fd, simpSessionId=khrnpy51}], simpUser=com.btalk.security.StompPrincipal@708033fd, simpSessionId=khrnpy51}]
2025-07-19 21:53:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:24 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:25 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [sh3yot4d, thcoiskf, al23b500]
2025-07-19 21:53:30 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [khrnpy51, fllbj4zw, vkhxvpbw]
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung26@gmail.com, password=apple671@)]
2025-07-19 21:53:36 [http-nio-8080-exec-9] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung26@gmail.com
2025-07-19 21:53:36 [http-nio-8080-exec-9] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung26@gmail.com
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:36 [http-nio-8080-exec-9] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung26@gmail.com
2025-07-19 21:53:36 [http-nio-8080-exec-9] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung26@gmail.com
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:53:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:36 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-user0gvdnaei subscriptionId=sub-10 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:36 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-user0gvdnaei subscriptionId=sub-11 session=0gvdnaei user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:53:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:53:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:53:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:36 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:53:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:37 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hzlkqo1u] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5e3rgwdn] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5e3rgwdn
2025-07-19 21:53:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=czezguj3] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:53:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session czezguj3
2025-07-19 21:53:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hzlkqo1u
2025-07-19 21:53:42 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938622722", parameters={masked}
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938622722
2025-07-19 21:53:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938622723", parameters={masked}
2025-07-19 21:53:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938622723
2025-07-19 21:53:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/554/lddhs5pp/websocket", parameters={}
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/554/lddhs5pp/websocket
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:42 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:42 [http-nio-8080-exec-1] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lddhs5pp]
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/982/s4bfjbkb/websocket", parameters={}
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/982/s4bfjbkb/websocket
2025-07-19 21:53:42 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:42 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:42 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=s4bfjbkb]
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:42 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:42 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:53:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938622790", parameters={masked}
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938622790
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/993/iloqa3pq/websocket", parameters={}
2025-07-19 21:53:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:53:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/993/iloqa3pq/websocket
2025-07-19 21:53:42 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:53:42 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:53:42 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:53:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:53:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iloqa3pq]
2025-07-19 21:53:42 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:53:42 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:53:42 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:53:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:53:42 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=lddhs5pp
2025-07-19 21:53:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:53:42 [clientOutboundChannel-29] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:42 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=iloqa3pq
2025-07-19 21:53:42 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=s4bfjbkb
2025-07-19 21:53:42 [clientOutboundChannel-30] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:42 [clientOutboundChannel-31] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:43 [clientOutboundChannel-29] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:43 [clientOutboundChannel-31] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [clientOutboundChannel-30] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:53:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useriloqa3pq subscriptionId=sub-0 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useriloqa3pq subscriptionId=sub-1 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useriloqa3pq subscriptionId=sub-2 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useriloqa3pq subscriptionId=sub-3 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useriloqa3pq subscriptionId=sub-4 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useriloqa3pq subscriptionId=sub-5 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useriloqa3pq subscriptionId=sub-6 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useriloqa3pq subscriptionId=sub-7 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useriloqa3pq subscriptionId=sub-8 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useriloqa3pq subscriptionId=sub-9 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:43 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:44 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:44 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hzlkqo1u
2025-07-19 21:53:44 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@c524443, simpSessionId=hzlkqo1u}], simpUser=com.btalk.security.StompPrincipal@c524443, simpSessionId=hzlkqo1u}]
2025-07-19 21:53:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:44 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:44 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5e3rgwdn
2025-07-19 21:53:44 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@304ba92c, simpSessionId=5e3rgwdn}], simpUser=com.btalk.security.StompPrincipal@304ba92c, simpSessionId=5e3rgwdn}]
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:44 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:53:44 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=czezguj3
2025-07-19 21:53:44 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7fcd756d, simpSessionId=czezguj3}], simpUser=com.btalk.security.StompPrincipal@7fcd756d, simpSessionId=czezguj3}]
2025-07-19 21:53:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:50 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [hzlkqo1u, czezguj3, 5e3rgwdn]
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.AuthController#login(LoginRequest)
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=thawhtinaung27@gmail.com, password=apple671@)]
2025-07-19 21:53:53 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login request received for email: thawhtinaung27@gmail.com
2025-07-19 21:53:53 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - Starting login for email: thawhtinaung27@gmail.com
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:53 [http-nio-8080-exec-3] INFO  c.btalk.service.impl.AuthServiceImpl - User logged in successfully: thawhtinaung27@gmail.com
2025-07-19 21:53:53 [http-nio-8080-exec-3] INFO  com.btalk.controller.AuthController - Login successful for email: thawhtinaung27@gmail.com
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJ (truncated)...]
2025-07-19 21:53:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:53 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-useriloqa3pq subscriptionId=sub-10 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:53 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-useriloqa3pq subscriptionId=sub-11 session=iloqa3pq user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:53:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:53 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:53:54 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:53:54 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:54 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:53:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:53:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:53:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:53:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lddhs5pp] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lddhs5pp
2025-07-19 21:54:02 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=s4bfjbkb] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session s4bfjbkb
2025-07-19 21:54:02 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iloqa3pq] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:02 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iloqa3pq
2025-07-19 21:54:02 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:02 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:02 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938643135", parameters={masked}
2025-07-19 21:54:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938643135
2025-07-19 21:54:03 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938643137", parameters={masked}
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938643137
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/091/exmzcg3l/websocket", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/091/exmzcg3l/websocket
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:03 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:03 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=exmzcg3l]
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/979/4szadfnl/websocket", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/979/4szadfnl/websocket
2025-07-19 21:54:03 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:03 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:03 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4szadfnl]
2025-07-19 21:54:03 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:03 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:03 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:03 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:03 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938643303", parameters={masked}
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938643303
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/028/gsgwcvci/websocket", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/028/gsgwcvci/websocket
2025-07-19 21:54:03 [http-nio-8080-exec-10] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:03 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:03 [http-nio-8080-exec-10] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gsgwcvci]
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:54:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:03 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:03 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:03 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:03 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:03 [http-nio-8080-exec-5] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=exmzcg3l
2025-07-19 21:54:03 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [clientOutboundChannel-19] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:03 [clientOutboundChannel-19] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=4szadfnl
2025-07-19 21:54:03 [clientOutboundChannel-20] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:03 [http-nio-8080-exec-7] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:54:03 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=gsgwcvci
2025-07-19 21:54:03 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [clientOutboundChannel-21] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [clientOutboundChannel-20] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [clientOutboundChannel-21] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:04 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usergsgwcvci subscriptionId=sub-0 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usergsgwcvci subscriptionId=sub-1 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usergsgwcvci subscriptionId=sub-2 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usergsgwcvci subscriptionId=sub-3 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usergsgwcvci subscriptionId=sub-4 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-usergsgwcvci subscriptionId=sub-5 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:04 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-usergsgwcvci subscriptionId=sub-6 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-usergsgwcvci subscriptionId=sub-7 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-usergsgwcvci subscriptionId=sub-8 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-usergsgwcvci subscriptionId=sub-9 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:04 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:04 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:04 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lddhs5pp
2025-07-19 21:54:04 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6e0f0738, simpSessionId=lddhs5pp}], simpUser=com.btalk.security.StompPrincipal@6e0f0738, simpSessionId=lddhs5pp}]
2025-07-19 21:54:04 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:04 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=s4bfjbkb
2025-07-19 21:54:04 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@72820e6f, simpSessionId=s4bfjbkb}], simpUser=com.btalk.security.StompPrincipal@72820e6f, simpSessionId=s4bfjbkb}]
2025-07-19 21:54:04 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:04 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iloqa3pq
2025-07-19 21:54:04 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@2bc2cdc8, simpSessionId=iloqa3pq}], simpUser=com.btalk.security.StompPrincipal@2bc2cdc8, simpSessionId=iloqa3pq}]
2025-07-19 21:54:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:54:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:54:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:10 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [s4bfjbkb, iloqa3pq, lddhs5pp]
2025-07-19 21:54:12 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-usergsgwcvci subscriptionId=sub-10 session=gsgwcvci user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:12 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-11 session=gsgwcvci
2025-07-19 21:54:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:54:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:54:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:54:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:54:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:54:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:54:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:54:14 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:54:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 21:54:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 21:54:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 21:54:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 21:54:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 21:54:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 21:54:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"99bc567a-f861-4700-9cd3-7dd9195 (truncated)..."]
2025-07-19 21:54:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 21:54:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"c6286c24-6b3d-4a17-ba63-65f849f42b5a","conversationId":"5008fdd0-f...(truncated)
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:23 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"message":{"messageId":...(truncated)
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=c6286c24-6b3d (truncated)...]
2025-07-19 21:54:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:24 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:24 [Notification-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 21:54:24 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: New Message
2025-07-19 21:54:24 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:54:24 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:54:24 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl -  Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 1
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 21:54:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/f62ba1d4-c284-44a6-b85f-38a9eb90d566/read", parameters={}
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAsRead(Authentication, UUID)
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.notification_id=?
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notification marked as read, data=null)]
2025-07-19 21:54:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4szadfnl] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4szadfnl
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=exmzcg3l] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gsgwcvci] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gsgwcvci
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session exmzcg3l
2025-07-19 21:54:57 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938697245", parameters={masked}
2025-07-19 21:54:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938697245
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938697252", parameters={masked}
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938697252
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/805/fohinaja/websocket", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/805/fohinaja/websocket
2025-07-19 21:54:57 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:57 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:57 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fohinaja]
2025-07-19 21:54:57 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:57 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:57 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:57 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/039/jqu1ua2i/websocket", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/039/jqu1ua2i/websocket
2025-07-19 21:54:57 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:57 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:57 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jqu1ua2i]
2025-07-19 21:54:57 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:57 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:57 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:57 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938697434", parameters={masked}
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938697434
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/259/ylwfhfpf/websocket", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/259/ylwfhfpf/websocket
2025-07-19 21:54:57 [http-nio-8080-exec-3] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:54:57 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:54:57 [http-nio-8080-exec-3] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:54:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ylwfhfpf]
2025-07-19 21:54:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:54:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:54:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:54:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=fohinaja
2025-07-19 21:54:57 [clientOutboundChannel-33] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=jqu1ua2i
2025-07-19 21:54:57 [clientOutboundChannel-34] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:54:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:57 [clientOutboundChannel-33] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [clientOutboundChannel-34] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:54:57 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=ylwfhfpf
2025-07-19 21:54:57 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [clientOutboundChannel-35] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:57 [clientOutboundChannel-35] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:57 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:58 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userylwfhfpf subscriptionId=sub-0 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userylwfhfpf subscriptionId=sub-1 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userylwfhfpf subscriptionId=sub-2 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userylwfhfpf subscriptionId=sub-3 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userylwfhfpf subscriptionId=sub-4 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userylwfhfpf subscriptionId=sub-5 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userylwfhfpf subscriptionId=sub-6 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userylwfhfpf subscriptionId=sub-7 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userylwfhfpf subscriptionId=sub-8 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userylwfhfpf subscriptionId=sub-9 session=ylwfhfpf user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:54:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:58 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:54:58 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=exmzcg3l
2025-07-19 21:54:58 [clientOutboundChannel-36] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@33116cb0, simpSessionId=exmzcg3l}], simpUser=com.btalk.security.StompPrincipal@33116cb0, simpSessionId=exmzcg3l}]
2025-07-19 21:54:58 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:58 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gsgwcvci
2025-07-19 21:54:58 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6893cfef, simpSessionId=gsgwcvci}], simpUser=com.btalk.security.StompPrincipal@6893cfef, simpSessionId=gsgwcvci}]
2025-07-19 21:54:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:54:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:54:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:54:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:54:58 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:54:58 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4szadfnl
2025-07-19 21:54:58 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@7a6f033e, simpSessionId=4szadfnl}], simpUser=com.btalk.security.StompPrincipal@7a6f033e, simpSessionId=4szadfnl}]
2025-07-19 21:54:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:54:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:54:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:54:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:54:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:55:00 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:55:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:55:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:55:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:55:05 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [gsgwcvci, exmzcg3l, 4szadfnl]
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fohinaja] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jqu1ua2i] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fohinaja
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jqu1ua2i
2025-07-19 21:57:41 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ylwfhfpf] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ylwfhfpf
2025-07-19 21:57:41 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nqkxacia] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0gvdnaei] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nqkxacia
2025-07-19 21:57:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0gvdnaei
2025-07-19 21:57:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hzdsxfsc] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:57:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hzdsxfsc
2025-07-19 21:57:41 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-6] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938861489", parameters={masked}
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938861489
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/438/i41hiu3b/websocket", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/438/i41hiu3b/websocket
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:57:41 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:57:41 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i41hiu3b]
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938861652", parameters={masked}
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938861652
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/689/0sadcuhn/websocket", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/689/0sadcuhn/websocket
2025-07-19 21:57:41 [http-nio-8080-exec-8] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:57:41 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:57:41 [http-nio-8080-exec-8] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0sadcuhn]
2025-07-19 21:57:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:57:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:57:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:57:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:57:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:57:41 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=i41hiu3b
2025-07-19 21:57:41 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [clientOutboundChannel-39] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=0sadcuhn
2025-07-19 21:57:41 [clientOutboundChannel-40] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:57:41 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [clientOutboundChannel-39] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:57:41 [clientOutboundChannel-40] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:57:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-useri41hiu3b subscriptionId=sub-0 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-useri41hiu3b subscriptionId=sub-1 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useri41hiu3b subscriptionId=sub-2 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useri41hiu3b subscriptionId=sub-3 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useri41hiu3b subscriptionId=sub-4 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useri41hiu3b subscriptionId=sub-5 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useri41hiu3b subscriptionId=sub-6 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useri41hiu3b subscriptionId=sub-7 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-user0sadcuhn subscriptionId=sub-0 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-user0sadcuhn subscriptionId=sub-1 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user0sadcuhn subscriptionId=sub-2 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-46] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user0sadcuhn subscriptionId=sub-3 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user0sadcuhn subscriptionId=sub-4 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user0sadcuhn subscriptionId=sub-5 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user0sadcuhn subscriptionId=sub-6 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user0sadcuhn subscriptionId=sub-7 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:42 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fohinaja
2025-07-19 21:57:42 [clientOutboundChannel-41] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@176232f9, simpSessionId=fohinaja}], simpUser=com.btalk.security.StompPrincipal@176232f9, simpSessionId=fohinaja}]
2025-07-19 21:57:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:42 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jqu1ua2i
2025-07-19 21:57:42 [clientOutboundChannel-42] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6631fc40, simpSessionId=jqu1ua2i}], simpUser=com.btalk.security.StompPrincipal@6631fc40, simpSessionId=jqu1ua2i}]
2025-07-19 21:57:42 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:42 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ylwfhfpf
2025-07-19 21:57:42 [clientOutboundChannel-43] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@43f86841, simpSessionId=ylwfhfpf}], simpUser=com.btalk.security.StompPrincipal@43f86841, simpSessionId=ylwfhfpf}]
2025-07-19 21:57:42 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:42 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hzdsxfsc
2025-07-19 21:57:42 [clientOutboundChannel-44] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@719bdb68, simpSessionId=hzdsxfsc}], simpUser=com.btalk.security.StompPrincipal@719bdb68, simpSessionId=hzdsxfsc}]
2025-07-19 21:57:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:57:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:42 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:42 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:42 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0gvdnaei
2025-07-19 21:57:42 [clientOutboundChannel-45] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@363427c9, simpSessionId=0gvdnaei}], simpUser=com.btalk.security.StompPrincipal@363427c9, simpSessionId=0gvdnaei}]
2025-07-19 21:57:43 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:57:43 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nqkxacia
2025-07-19 21:57:43 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@56421753, simpSessionId=nqkxacia}], simpUser=com.btalk.security.StompPrincipal@56421753, simpSessionId=nqkxacia}]
2025-07-19 21:57:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:57:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:43 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:57:44 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user0sadcuhn subscriptionId=sub-8 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user0sadcuhn subscriptionId=sub-9 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user0sadcuhn subscriptionId=sub-10 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-44] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user0sadcuhn subscriptionId=sub-11 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user0sadcuhn subscriptionId=sub-12 session=0sadcuhn user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useri41hiu3b subscriptionId=sub-8 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useri41hiu3b subscriptionId=sub-9 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useri41hiu3b subscriptionId=sub-10 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useri41hiu3b subscriptionId=sub-11 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:44 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useri41hiu3b subscriptionId=sub-12 session=i41hiu3b user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:57:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:57:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:57:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:57:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:57:50 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [nqkxacia, fohinaja, jqu1ua2i, 0gvdnaei, ylwfhfpf, hzdsxfsc]
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i41hiu3b] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i41hiu3b
2025-07-19 21:58:21 [http-nio-8080-exec-7] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0sadcuhn] closed with CloseStatus[code=1000, reason=null]
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0sadcuhn
2025-07-19 21:58:21 [http-nio-8080-exec-10] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938901421", parameters={masked}
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938901421
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/321/xm3y1y3z/websocket", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/321/xm3y1y3z/websocket
2025-07-19 21:58:21 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:58:21 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:58:21 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xm3y1y3z]
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752938901643", parameters={masked}
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752938901643
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/441/4iqgmjzj/websocket", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@bc168ac
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/441/4iqgmjzj/websocket
2025-07-19 21:58:21 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 21:58:21 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 21:58:21 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4iqgmjzj]
2025-07-19 21:58:21 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:58:21 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:58:21 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 21:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:58:21 [http-nio-8080-exec-8] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:21 [http-nio-8080-exec-8] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 21:58:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:21 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=xm3y1y3z
2025-07-19 21:58:21 [clientOutboundChannel-47] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:58:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:58:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:58:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:58:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:21 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 21:58:21 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 21:58:21 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 21:58:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:21 [clientOutboundChannel-47] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:22 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:58:22 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:58:22 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=4iqgmjzj
2025-07-19 21:58:22 [clientOutboundChannel-48] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:22 [clientOutboundChannel-48] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userxm3y1y3z subscriptionId=sub-0 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userxm3y1y3z subscriptionId=sub-1 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userxm3y1y3z subscriptionId=sub-2 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userxm3y1y3z subscriptionId=sub-3 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userxm3y1y3z subscriptionId=sub-4 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userxm3y1y3z subscriptionId=sub-5 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userxm3y1y3z subscriptionId=sub-6 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userxm3y1y3z subscriptionId=sub-7 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [clientInboundChannel-53] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-user4iqgmjzj subscriptionId=sub-0 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-49] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-user4iqgmjzj subscriptionId=sub-1 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-user4iqgmjzj subscriptionId=sub-2 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user4iqgmjzj subscriptionId=sub-3 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user4iqgmjzj subscriptionId=sub-4 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user4iqgmjzj subscriptionId=sub-5 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user4iqgmjzj subscriptionId=sub-6 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user4iqgmjzj subscriptionId=sub-7 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:22 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:22 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 21:58:22 [clientInboundChannel-50] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i41hiu3b
2025-07-19 21:58:22 [clientOutboundChannel-49] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@71431d56, simpSessionId=i41hiu3b}], simpUser=com.btalk.security.StompPrincipal@71431d56, simpSessionId=i41hiu3b}]
2025-07-19 21:58:22 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 21:58:22 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0sadcuhn
2025-07-19 21:58:22 [clientOutboundChannel-50] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@2e9ea786, simpSessionId=0sadcuhn}], simpUser=com.btalk.security.StompPrincipal@2e9ea786, simpSessionId=0sadcuhn}]
2025-07-19 21:58:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:58:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:58:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:23 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:24 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userxm3y1y3z subscriptionId=sub-8 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userxm3y1y3z subscriptionId=sub-9 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-user4iqgmjzj subscriptionId=sub-8 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-52] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userxm3y1y3z subscriptionId=sub-10 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-54] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-user4iqgmjzj subscriptionId=sub-9 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-47] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userxm3y1y3z subscriptionId=sub-11 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-user4iqgmjzj subscriptionId=sub-10 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-user4iqgmjzj subscriptionId=sub-11 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userxm3y1y3z subscriptionId=sub-12 session=xm3y1y3z user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 21:58:24 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-user4iqgmjzj subscriptionId=sub-12 session=4iqgmjzj user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 21:58:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:58:24 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:24 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 21:58:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 21:58:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 21:58:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 21:58:30 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [0sadcuhn, i41hiu3b]
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.b.a.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin - Application shutdown requested.
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-19 22:00:53 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 4iqgmjzj with CloseStatus[code=1001, reason=null]
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=4iqgmjzj]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4iqgmjzj] closed with CloseStatus[code=1001, reason=null]
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4iqgmjzj
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:00:53 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:00:54 [clientInboundChannel-56] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4iqgmjzj
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session xm3y1y3z with CloseStatus[code=1001, reason=null]
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=xm3y1y3z]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.admin.SpringApplicationAdminMXBeanRegistrar$SpringApplicationAdmin.shutdown(SpringApplicationAdminMXBeanRegistrar.java:160)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:97)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:193)
	at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.invokeWithOpenReturn(ConvertingMethod.java:175)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:115)
	at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.invokeM2(MXBeanIntrospector.java:52)
	at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:236)
	at java.management/com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at java.management/com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:252)
	at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)
	at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1405)
	at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
	at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)
	at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1665)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 55 common frames omitted
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xm3y1y3z] closed with CloseStatus[code=1001, reason=null]
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xm3y1y3z
2025-07-19 22:00:54 [RMI TCP Connection(18)-127.0.0.1] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:00:55 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:00:55 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:00:55 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:00:55 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 22:00:56 [clientInboundChannel-59] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xm3y1y3z
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]]
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5727a03d]
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-19 22:00:56 [RMI TCP Connection(18)-127.0.0.1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-19 22:00:59 [main] INFO  com.btalk.BackendApplication - Starting BackendApplication using Java 21.0.4 with PID 13908 (C:\Users\thawh\Desktop\B-Talk\backend\target\classes started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-19 22:00:59 [main] INFO  com.btalk.BackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-19 22:01:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-19 22:01:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 8 JPA repository interfaces.
2025-07-19 22:01:00 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-19 22:01:00 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-19 22:01:00 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-19 22:01:00 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-19 22:01:00 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1265 ms
2025-07-19 22:01:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-19 22:01:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-19 22:01:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-19 22:01:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-19 22:01:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-19 22:01:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12548f9a
2025-07-19 22:01:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-19 22:01:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-19 22:01:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-19 22:01:02 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-19 22:01:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-19 22:01:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-19 22:01:04 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-19 22:01:05 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-19 22:01:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 38 mappings in 'requestMappingHandlerMapping'
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(UUID,UUID)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(UUID,MessageDto)
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/status]}: handleCallStatusSignal(WebRtcSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(WebRtcSignal)
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(WebRtcSignal)
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-19 22:01:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-19 22:01:06 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-07-19 22:01:06 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@447dd61f]
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@447dd61f]
2025-07-19 22:01:06 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@447dd61f]]
2025-07-19 22:01:06 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 22:01:06 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-07-19 22:01:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-19 22:01:06 [main] INFO  com.btalk.BackendApplication - Started BackendApplication in 7.215 seconds (process running for 7.742)
2025-07-19 22:01:07 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-19 22:01:07 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2b65081d
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3e7de165
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-19 22:01:07 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752939067059", parameters={masked}
2025-07-19 22:01:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752939067058", parameters={masked}
2025-07-19 22:01:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752939067058
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752939067059
2025-07-19 22:01:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/550/lobh2cnh/websocket", parameters={}
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/152/cmjgljxv/websocket", parameters={}
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/152/cmjgljxv/websocket
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/550/lobh2cnh/websocket
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 22:01:07 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 22:01:07 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 22:01:07 [http-nio-8080-exec-2] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 22:01:07 [http-nio-8080-exec-4] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cmjgljxv]
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=lobh2cnh]
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 22:01:07 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:07 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=lobh2cnh
2025-07-19 22:01:07 [http-nio-8080-exec-2] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:07 [http-nio-8080-exec-4] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:07 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=cmjgljxv
2025-07-19 22:01:07 [clientOutboundChannel-1] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:07 [clientOutboundChannel-2] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:07 [clientOutboundChannel-2] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:07 [clientOutboundChannel-1] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cmjgljxv] closed with CloseStatus[code=1000, reason=null]
2025-07-19 22:01:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cmjgljxv
2025-07-19 22:01:14 [http-nio-8080-exec-5] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752939075146", parameters={masked}
2025-07-19 22:01:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752939075146
2025-07-19 22:01:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/492/bxrppg3j/websocket", parameters={}
2025-07-19 22:01:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/492/bxrppg3j/websocket
2025-07-19 22:01:15 [http-nio-8080-exec-9] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 22:01:15 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 22:01:15 [http-nio-8080-exec-9] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 22:01:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 22:01:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bxrppg3j]
2025-07-19 22:01:15 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 22:01:15 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 22:01:15 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung27@gmail.com
2025-07-19 22:01:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:15 [http-nio-8080-exec-1] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:15 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=99bc567a-f861-4700-9cd3-7dd91951dbe0 session=bxrppg3j
2025-07-19 22:01:15 [http-nio-8080-exec-1] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:15 [clientOutboundChannel-3] INFO  c.b.websocket.WebSocketEventListener - User connected: 99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 22:01:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:15 [clientOutboundChannel-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=1)]
2025-07-19 22:01:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:15 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-userbxrppg3j subscriptionId=sub-0 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-userbxrppg3j subscriptionId=sub-1 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userbxrppg3j subscriptionId=sub-2 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userbxrppg3j subscriptionId=sub-3 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userbxrppg3j subscriptionId=sub-4 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userbxrppg3j subscriptionId=sub-5 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userbxrppg3j subscriptionId=sub-6 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userbxrppg3j subscriptionId=sub-7 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:16 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:16 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=99bc567a-f861-4700-9cd3-7dd91951dbe0
2025-07-19 22:01:16 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cmjgljxv
2025-07-19 22:01:16 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@6a607dbc, simpSessionId=cmjgljxv}], simpUser=com.btalk.security.StompPrincipal@6a607dbc, simpSessionId=cmjgljxv}]
2025-07-19 22:01:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 22:01:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:16 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-userbxrppg3j subscriptionId=sub-8 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:16 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-userbxrppg3j subscriptionId=sub-9 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:16 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-userbxrppg3j subscriptionId=sub-10 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-userbxrppg3j subscriptionId=sub-11 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:16 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-userbxrppg3j subscriptionId=sub-12 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/99bc567a-f861-4700-9cd3-7dd91951dbe0", parameters={}
2025-07-19 22:01:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 22:01:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 22:01:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=lobh2cnh] closed with CloseStatus[code=1000, reason=null]
2025-07-19 22:01:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session lobh2cnh
2025-07-19 22:01:18 [http-nio-8080-exec-3] INFO  c.b.websocket.WebSocketEventListener - User disconnected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1752939078870", parameters={masked}
2025-07-19 22:01:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1752939078870
2025-07-19 22:01:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/730/axihcmjz/websocket", parameters={}
2025-07-19 22:01:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@224d6d02
2025-07-19 22:01:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/730/axihcmjz/websocket
2025-07-19 22:01:18 [http-nio-8080-exec-6] INFO  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Processing WebSocket handshake
2025-07-19 22:01:18 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: No Authorization header found
2025-07-19 22:01:18 [http-nio-8080-exec-6] WARN  c.b.security.CustomHandshakeHandler - CustomHandshakeHandler: Returning null Principal
2025-07-19 22:01:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-07-19 22:01:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=axihcmjz]
2025-07-19 22:01:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 22:01:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 22:01:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:01:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Processing WebSocket CONNECT request
2025-07-19 22:01:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Token found, length: 295
2025-07-19 22:01:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - Extracted email from token: thawhtinaung26@gmail.com
2025-07-19 22:01:19 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 22:01:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-9] INFO  c.b.s.AuthChannelInterceptorAdapter - WebSocket connected successfully for userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:19 [http-nio-8080-exec-9] INFO  c.b.websocket.WebSocketEventListener - WebSocket connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:19 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 session=axihcmjz
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications/unread-count", parameters={}
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUnreadCount(Authentication)
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:01:19 [clientOutboundChannel-5] INFO  c.b.websocket.WebSocketEventListener - User connected: 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Unread count retrieved successfully, data=0)]
2025-07-19 22:01:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:19 [clientOutboundChannel-5] DEBUG org.hibernate.SQL - 
    update
        users u1_0 
    set
        status=? 
    where
        u1_0.user_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:19 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/notifications-useraxihcmjz subscriptionId=sub-0 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/unread-count-useraxihcmjz subscriptionId=sub-1 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useraxihcmjz subscriptionId=sub-2 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useraxihcmjz subscriptionId=sub-3 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useraxihcmjz subscriptionId=sub-4 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useraxihcmjz subscriptionId=sub-5 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useraxihcmjz subscriptionId=sub-6 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useraxihcmjz subscriptionId=sub-7 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:19 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/user-offline session=null payload=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:01:20 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=lobh2cnh
2025-07-19 22:01:20 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=com.btalk.security.StompPrincipal@16d773f2, simpSessionId=lobh2cnh}], simpUser=com.btalk.security.StompPrincipal@16d773f2, simpSessionId=lobh2cnh}]
2025-07-19 22:01:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 22:01:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/user/8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4", parameters={}
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.ConversationController#getUserConversations(UUID)
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    join
        participants p1_0 
            on c1_0.conversation_id=p1_0.conversation_id 
    where
        p1_0.user_id=?
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:01:20 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/incoming-useraxihcmjz subscriptionId=sub-8 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:20 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/answered-useraxihcmjz subscriptionId=sub-9 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:20 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/rejected-useraxihcmjz subscriptionId=sub-10 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:20 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/ended-useraxihcmjz subscriptionId=sub-11 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:20 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/call/signals-useraxihcmjz subscriptionId=sub-12 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:01:20 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Conversations retrieved successfully, data=[ConversationDto(conver (truncated)...]
2025-07-19 22:01:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:22 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cmjgljxv]
2025-07-19 22:01:22 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userbxrppg3j subscriptionId=sub-13 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:22 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-14 session=bxrppg3j
2025-07-19 22:01:22 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:22 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-userbxrppg3j subscriptionId=sub-15 session=bxrppg3j user=99bc567a-f861-4700-9cd3-7dd91951dbe0 payload=byte[0]
2025-07-19 22:01:22 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-16 session=bxrppg3j
2025-07-19 22:01:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 22:01:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:01:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:01:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:23 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:01:25 [http-nio-8080-exec-7] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-07-19 22:01:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 22:01:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:01:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:01:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:27 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [lobh2cnh]
2025-07-19 22:01:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:01:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 22:01:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:01:27 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:01:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:28 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:01:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 22:01:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:01:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:01:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:01:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:01:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:01:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=99bc567a-f861-4700-9cd3-7dd91951dbe0&page=0&size=20", parameters={masked}
2025-07-19 22:01:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:01:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:01:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:33 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:01:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:01:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:01:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:02:01 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:02:01 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 22:02:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 22:02:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"99bc567a-f861-4700-9cd3-7dd9195 (truncated)..."]
2025-07-19 22:02:01 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 22:02:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"2ead09ff-22d7-4a1a-aec8-395238a9ba6f","conversationId":"5008fdd0-f...(truncated)
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:02:03 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=2ead09ff-22d7 (truncated)...]
2025-07-19 22:02:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:02:03 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:04 [Notification-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 22:02:04 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: New Message
2025-07-19 22:02:04 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-useraxihcmjz session=null payload={"notificationId":"14e76f9d-8b01-402d-914f-e54824cd7373","recipientId":"8ce12902...(truncated)
2025-07-19 22:02:04 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:04 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:02:04 [Notification-1] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:02:04 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-useraxihcmjz session=null payload=1
2025-07-19 22:02:04 [Notification-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:04 [Notification-1] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 1
2025-07-19 22:02:06 [MessageBroker-7] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 108], outboundChannel[pool size = 12, active threads = 0, queued tasks = 0, completed tasks = 12], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 14]
2025-07-19 22:02:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:02:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 22:02:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 22:02:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 22:02:10 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:02:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 22:02:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:02:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/api/notifications", parameters={}
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#deleteAllNotifications(Authentication)
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_deleted=1 
    where
        n1_0.recipient_id=?
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=All notifications deleted successfully, data=null)]
2025-07-19 22:02:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","senderId":"99bc567a-f861-4700-9cd3-7dd9195 (truncated)..."]
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 22:02:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 22:02:49 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"d276edd6-6540-498a-a446-def772560a4c","conversationId":"5008fdd0-f...(truncated)
2025-07-19 22:02:49 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:02:50 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:50 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 22:02:50 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:02:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=d276edd6-6540 (truncated)...]
2025-07-19 22:02:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:02:50 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:51 [Notification-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 22:02:51 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: New Message
2025-07-19 22:02:51 [Notification-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-useraxihcmjz session=null payload={"notificationId":"801c6db5-729b-4094-87c2-274975343ba0","recipientId":"8ce12902...(truncated)
2025-07-19 22:02:51 [Notification-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:51 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:02:51 [Notification-2] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:02:51 [Notification-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-useraxihcmjz session=null payload=1
2025-07-19 22:02:51 [Notification-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:02:51 [Notification-2] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 1
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 22:02:55 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages", parameters={multipart}
2025-07-19 22:03:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#sendMessage(String, List)
2025-07-19 22:03:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestPartMethodArgumentResolver - Read "application/json" to ["{"conversationId":"5008fdd0-f715-4c4d-9d07-70b25ff3141a","content":"","senderId":"99bc567a-f861-4700 (truncated)..."]
2025-07-19 22:03:06 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.conversation_id,
        c1_0.created_at,
        c1_0.creator_id,
        c1_0.name,
        c1_0.type 
    from
        conversations c1_0 
    where
        c1_0.conversation_id=?
2025-07-19 22:03:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:07 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        messages
        (content, conversation_id, message_type, sender_id, sent_at, message_id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"messageId":"e0d84327-4809-4830-8d66-60085c67d189","conversationId":"5008fdd0-f...(truncated)
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.participant_id,
        p1_0.conversation_id,
        p1_0.joined_at,
        p1_0.left_at,
        p1_0.user_id 
    from
        participants p1_0 
    where
        p1_0.conversation_id=?
2025-07-19 22:03:08 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages session=null payload={"success":true,"message":"New message received","data":{"eventType":"NEW_MESSAG...(truncated)
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Message sent successfully, data=MessageDto(messageId=e0d84327-4809 (truncated)...]
2025-07-19 22:03:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:09 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:09 [Notification-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        notifications
        (created_at, data, is_deleted, is_read, message, read_at, recipient_id, sender_id, title, type, updated_at, notification_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-19 22:03:09 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl - Sending real-time notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: New Message
2025-07-19 22:03:09 [Notification-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/notifications-useraxihcmjz session=null payload={"notificationId":"9c259619-6574-41c6-8986-ec713b0d69ae","recipientId":"8ce12902...(truncated)
2025-07-19 22:03:09 [Notification-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:03:09 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent notification to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4
2025-07-19 22:03:09 [Notification-3] DEBUG org.hibernate.SQL - 
    select
        count(n1_0.notification_id) 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_read=0 
        and n1_0.is_deleted=0
2025-07-19 22:03:09 [Notification-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/queue/unread-count-useraxihcmjz session=null payload=2
2025-07-19 22:03:09 [Notification-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-07-19 22:03:09 [Notification-3] INFO  c.b.s.impl.NotificationServiceImpl - Successfully sent unread count update to user 8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4: 2
2025-07-19 22:03:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 22:03:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 22:03:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 22:03:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 22:03:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/notifications/9c259619-6574-41c6-8986-ec713b0d69ae/read", parameters={}
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#markAsRead(Authentication, UUID)
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        notifications n1_0 
    set
        is_read=1,
        read_at=? 
    where
        n1_0.notification_id=?
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notification marked as read, data=null)]
2025-07-19 22:03:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:14 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/conversation-updates-useraxihcmjz subscriptionId=sub-13 session=axihcmjz user=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4 payload=byte[0]
2025-07-19 22:03:14 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/messages id=sub-14 session=axihcmjz
2025-07-19 22:03:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 22:03:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:03:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:03:14 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:03:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 22:03:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:03:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:03:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:03:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 22:03:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:03:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:03:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:23 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [ApiResponse(success=true, message=Messages retrieved successfully, data=Page 1 of 1 containing com.b (truncated)...]
2025-07-19 22:03:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/notifications?page=0&size=20", parameters={masked}
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.NotificationController#getUserNotifications(Authentication, int, int)
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        n1_0.notification_id,
        n1_0.created_at,
        n1_0.data,
        n1_0.is_deleted,
        n1_0.is_read,
        n1_0.message,
        n1_0.read_at,
        n1_0.recipient_id,
        n1_0.sender_id,
        n1_0.title,
        n1_0.type,
        n1_0.updated_at 
    from
        notifications n1_0 
    where
        n1_0.recipient_id=? 
        and n1_0.is_deleted=0 
    order by
        n1_0.created_at desc 
    limit
        ?
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Notifications retrieved successfully, data=Page 1 of 1 containing  (truncated)...]
2025-07-19 22:03:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-19 22:04:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.email=?
2025-07-19 22:04:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/conversation/5008fdd0-f715-4c4d-9d07-70b25ff3141a/page?userId=8ce12902-ecf8-4fdd-ac4c-5f8e480da4f4&page=0&size=20", parameters={masked}
2025-07-19 22:04:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.btalk.controller.MessageController#getConversationMessagesPaginated(UUID, UUID, int, int)
2025-07-19 22:04:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        m1_0.message_id,
        m1_0.content,
        m1_0.conversation_id,
        m1_0.message_type,
        m1_0.sender_id,
        m1_0.sent_at 
    from
        messages m1_0 
    where
        m1_0.conversation_id=? 
    order by
        m1_0.sent_at desc 
    limit
        ?
2025-07-19 22:04:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.user_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.last_name,
        u1_0.name,
        u1_0.password_hash,
        u1_0.profile_photo_url,
        u1_0.reset_token,
        u1_0.reset_token_expiry,
        u1_0.status 
    from
        users u1_0 
    where
        u1_0.user_id=?
2025-07-20 20:42:15 [main] INFO  com.btalk.BackendApplicationTests - Starting BackendApplicationTests using Java 21.0.4 with PID 9536 (started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-20 20:42:15 [main] INFO  com.btalk.BackendApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-07-20 20:42:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-20 20:42:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 8 JPA repository interfaces.
2025-07-20 20:42:17 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-20 20:42:17 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-20 20:42:17 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-20 20:42:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-20 20:42:18 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-20 20:42:19 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1115be8c
2025-07-20 20:42:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-20 20:42:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-20 20:42:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-20 20:42:19 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-20 20:42:20 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-20 20:42:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-20 20:42:22 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-20 20:42:23 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-20 20:42:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-20 20:42:23 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(String,String)
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(String,MessageDto)
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(CallSignal)
	{[MESSAGE],[/call/status]}: handleCallStatus(CallSignal)
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(CallSignal)
2025-07-20 20:42:24 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-20 20:42:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-20 20:42:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5046b9f]]
2025-07-20 20:42:24 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-20 20:42:24 [main] INFO  com.btalk.BackendApplicationTests - Started BackendApplicationTests in 9.724 seconds (process running for 11.043)
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5046b9f]]
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-20 20:42:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-20 21:48:01 [main] INFO  com.btalk.BackendApplicationTests - Starting BackendApplicationTests using Java 21.0.4 with PID 23492 (started by thawhtinaung in C:\Users\thawh\Desktop\B-Talk\backend)
2025-07-20 21:48:01 [main] INFO  com.btalk.BackendApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-07-20 21:48:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-20 21:48:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 100 ms. Found 8 JPA repository interfaces.
2025-07-20 21:48:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-20 21:48:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-20 21:48:03 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-20 21:48:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-20 21:48:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-20 21:48:05 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@590dea35
2025-07-20 21:48:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-20 21:48:05 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-20 21:48:05 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-07-20 21:48:05 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-20 21:48:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-20 21:48:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-20 21:48:08 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-20 21:48:09 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-07-20 21:48:10 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.AuthController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ChatController:
	{[MESSAGE],[/chat/{conversationId}/send]}: sendMessage(String,MessageDto)
	{[MESSAGE],[/chat/{conversationId}/read]}: markMessagesAsRead(String,String)
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.ConversationController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.FileUploadController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.MessageController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.NotificationController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.UserController:
	
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.b.c.WebRtcController:
	{[MESSAGE],[/call/private/signal]}: handlePrivateSignal(CallSignal)
	{[MESSAGE],[/call/group/signal]}: handleGroupSignal(CallSignal)
	{[MESSAGE],[/call/status]}: handleCallStatus(CallSignal)
2025-07-20 21:48:10 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-07-20 21:48:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-07-20 21:48:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@30e4cf5e]]
2025-07-20 21:48:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-07-20 21:48:11 [main] INFO  com.btalk.BackendApplicationTests - Started BackendApplicationTests in 10.224 seconds (process running for 11.674)
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@30e4cf5e]]
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-20 21:48:11 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
